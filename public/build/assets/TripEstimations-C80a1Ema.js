import{r as F,u as le,j as e,L as se,a as te}from"./app-B1Ijehg9.js";import{A as ce,M as oe,T as ae}from"./app-layout-Dbx2Oeow.js";import{D as de}from"./DateRangePicker-DwkEeZR5.js";import{c as ie,F as S}from"./createLucideIcon-B1DhxKix.js";import{C as G,a as H,b as O,c as z}from"./card-CaThUayS.js";import{B as me}from"./badge-CyjEjcqf.js";import{T as xe,a as ue,b as V,c as D,d as pe,e as q}from"./table-CD1z3cxE.js";import{A as he,a as ge,b as je,c as Ne,d as fe,e as ve,f as _e,g as ye}from"./alert-dialog-CEK8dEag.js";import{D as Y,b as J,c as X,d as Z}from"./dialog-wsPDAiu8.js";import{I as m}from"./input-DJXDQUXM.js";import{L as n}from"./label-DnhGvgIX.js";import{T as ne}from"./textarea-aibnGtVK.js";import{I as d}from"./InputError-DU-Ypm_9.js";import{P as ee}from"./plus-B2EX2e3e.js";import{T as Q}from"./trash-2-RxSDyOsm.js";import{D as W}from"./dollar-sign-C7bVD252.js";import{C as be}from"./calendar-BoPvwYTU.js";import{E as Ce}from"./eye-DJbon05O.js";import"./index-DNIgj2bq.js";import"./index-CfQIwQru.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],re=ie("Calculator",we);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Se=ie("Pen",$e);function Te({isOpen:b,onClose:C,products:_=[],suppliers:E=[],errors:c={}}){const[i,j]=F.useState([{product_name:"",supplier_name:"",quantity:1,unit_cost_price:0,unit_selling_price:0}]),{data:f,setData:h,post:y,processing:A,reset:T,clearErrors:g}=le({trip_date:new Date().toISOString().split("T")[0],description:"",location:"",transportation_cost:"",other_expenses:"",notes:"",items:[{product_name:"",quantity:1,unit_cost_price:0,unit_selling_price:0}]});F.useEffect(()=>{if(b){const a=[{product_name:"",supplier_name:"",quantity:1,unit_cost_price:0,unit_selling_price:0}];j(a),T(),g(),h(s=>({...s,trip_date:new Date().toISOString().split("T")[0],description:"",location:"",transportation_cost:"",other_expenses:"",notes:"",items:a}))}},[b,T,g]);function I(a){a.preventDefault(),h({...f,items:i}),y(route("trip-estimations.store"),{onSuccess:()=>{T(),g(),j([{product_name:"",supplier_name:"",quantity:1,unit_cost_price:0,unit_selling_price:0}]),C()},preserveScroll:!0,preserveState:!0,only:["trips","overview","errors","flash"]})}function U(){T(),g(),j([{product_name:"",supplier_name:"",quantity:1,unit_cost_price:0,unit_selling_price:0}]),C()}function R(){const a=[...i,{product_name:"",supplier_name:"",quantity:1,unit_cost_price:0,unit_selling_price:0}];j(a),h("items",a)}function L(a){if(i.length>1){const s=i.filter((t,x)=>x!==a);j(s),h("items",s)}}function P(a,s){const t=[...i];t[a]={...t[a],product_name:s},j(t),h("items",t)}function p(a,s,t){const x=[...i];x[a]={...x[a],[s]:t},j(x),h("items",x)}const $=i.reduce((a,s)=>{const t=parseInt(s.quantity)||0,x=parseFloat(s.unit_cost_price)||0,N=parseFloat(s.unit_selling_price)||0,w=t*x,r=t*N,u=r-w;return{totalCost:a.totalCost+w,totalSelling:a.totalSelling+r,grossProfit:a.grossProfit+u}},{totalCost:0,totalSelling:0,grossProfit:0}),k=parseFloat(f.transportation_cost)||0,K=parseFloat(f.other_expenses)||0,B=k+K,M=$.grossProfit-B;function v(a){return`${parseFloat(a||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`}return e.jsx(Y,{open:b,onOpenChange:C,children:e.jsxs(J,{className:"max-h-[95vh] w-[95vw] max-w-none overflow-y-auto",children:[e.jsx(X,{children:e.jsx(Z,{children:"Add Trip Estimation"})}),e.jsxs("form",{onSubmit:I,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"trip_date",children:"Trip Date *"}),e.jsx(m,{id:"trip_date",type:"date",value:f.trip_date,onChange:a=>h("trip_date",a.target.value),required:!0}),c.trip_date&&e.jsx(d,{message:c.trip_date,className:"mt-1"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"description",children:"Description"}),e.jsx(m,{id:"description",placeholder:"e.g., Weekly stock purchase",value:f.description,onChange:a=>h("description",a.target.value)}),c.description&&e.jsx(d,{message:c.description,className:"mt-1"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"location",children:"Location"}),e.jsx(m,{id:"location",placeholder:"e.g., Kumasi Market",value:f.location,onChange:a=>h("location",a.target.value)}),c.location&&e.jsx(d,{message:c.location,className:"mt-1"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(n,{className:"text-base font-semibold",children:"Products *"}),e.jsxs(S,{type:"button",variant:"outline",size:"sm",onClick:R,className:"h-8",children:[e.jsx(ee,{className:"mr-1 h-3 w-3"}),"Add Product"]})]}),i.map((a,s)=>{const t=parseInt(a.quantity)||0,x=parseFloat(a.unit_cost_price)||0,N=parseFloat(a.unit_selling_price)||0,w=t*x,u=t*N-w;return e.jsxs("div",{className:"rounded-lg border bg-white shadow-sm",children:[e.jsxs("div",{className:"block lg:hidden p-4 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h4",{className:"font-medium text-gray-700",children:["Product ",s+1]}),e.jsx(S,{type:"button",variant:"outline",size:"sm",onClick:()=>L(s),disabled:i.length===1,className:"h-8 w-8 p-0 text-red-600 disabled:text-gray-400 disabled:cursor-not-allowed",children:e.jsx(Q,{className:"h-3 w-3"})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(n,{className:"text-sm font-medium",children:"Product *"}),e.jsx(m,{list:`product-list-${s}`,value:a.product_name,onChange:l=>P(s,l.target.value),placeholder:"Type or select a product",className:"mt-1"}),e.jsx("datalist",{id:`product-list-${s}`,children:_.map(l=>e.jsx("option",{value:l.name},l.id))}),c[`items.${s}.product_name`]&&e.jsx(d,{message:c[`items.${s}.product_name`],className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(n,{className:"text-sm font-medium",children:"Supplier"}),e.jsx(m,{list:`supplier-list-${s}`,value:a.supplier_name,onChange:l=>p(s,"supplier_name",l.target.value),placeholder:"Type or select a supplier",className:"mt-1"}),e.jsx("datalist",{id:`supplier-list-${s}`,children:E.map(l=>e.jsx("option",{value:l.name},l.id))}),c[`items.${s}.supplier_name`]&&e.jsx(d,{message:c[`items.${s}.supplier_name`],className:"mt-1"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx(n,{className:"text-sm font-medium",children:"Quantity"}),e.jsx(m,{type:"number",placeholder:"1",value:a.quantity,onChange:l=>p(s,"quantity",l.target.value),min:"1",required:!0,className:"mt-1 w-full text-center text-lg font-medium h-12"}),c[`items.${s}.quantity`]&&e.jsx(d,{message:c[`items.${s}.quantity`],className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(n,{className:"text-sm font-medium",children:"Unit Cost (GHC)"}),e.jsx(m,{type:"number",step:"0.01",placeholder:"0.00",value:a.unit_cost_price,onChange:l=>p(s,"unit_cost_price",l.target.value),min:"0",required:!0,className:"mt-1"}),c[`items.${s}.unit_cost_price`]&&e.jsx(d,{message:c[`items.${s}.unit_cost_price`],className:"mt-1"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx(n,{className:"text-sm font-medium",children:"Total Cost"}),e.jsx("div",{className:"mt-1 flex h-10 w-full rounded-md border border-input bg-gray-50 px-3 py-2 text-sm text-gray-700 items-center",children:v(w)})]}),e.jsxs("div",{children:[e.jsx(n,{className:"text-sm font-medium",children:"Unit Selling (GHC)"}),e.jsx(m,{type:"number",step:"0.01",placeholder:"0.00",value:a.unit_selling_price,onChange:l=>p(s,"unit_selling_price",l.target.value),min:"0",required:!0,className:"mt-1"}),c[`items.${s}.unit_selling_price`]&&e.jsx(d,{message:c[`items.${s}.unit_selling_price`],className:"mt-1"})]})]}),e.jsxs("div",{children:[e.jsx(n,{className:"text-sm font-medium",children:"Profit"}),e.jsxs("div",{className:`mt-1 flex h-16 w-full rounded-md border-2 py-3 text-lg font-bold items-center justify-center ${u>0?"bg-green-50 text-green-700 border-green-300":u<0?"bg-red-50 text-red-700 border-red-300":"bg-gray-50 text-gray-700 border-gray-300"}`,children:[u>0?"+":"",v(u)]})]})]})]}),e.jsxs("div",{className:"hidden xl:block xl:p-4 xl:space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-4 gap-4 items-end",children:[e.jsxs("div",{className:"col-span-1",children:[e.jsx(n,{className:"text-sm font-medium mb-2 block",children:"Product *"}),e.jsx(m,{list:`product-list-${s}`,value:a.product_name,onChange:l=>P(s,l.target.value),placeholder:"Type or select a product",className:"w-full h-12"}),e.jsx("datalist",{id:`product-list-${s}`,children:_.map(l=>e.jsx("option",{value:l.name},l.id))}),c[`items.${s}.product_name`]&&e.jsx(d,{message:c[`items.${s}.product_name`],className:"mt-1"})]}),e.jsxs("div",{className:"col-span-1",children:[e.jsx(n,{className:"text-sm font-medium mb-2 block",children:"Supplier"}),e.jsx(m,{list:`supplier-list-${s}`,value:a.supplier_name,onChange:l=>p(s,"supplier_name",l.target.value),placeholder:"Type or select a supplier",className:"w-full h-12"}),e.jsx("datalist",{id:`supplier-list-${s}`,children:E.map(l=>e.jsx("option",{value:l.name},l.id))}),c[`items.${s}.supplier_name`]&&e.jsx(d,{message:c[`items.${s}.supplier_name`],className:"mt-1"})]}),e.jsx("div",{className:"col-span-2",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700 mb-2",children:"Profit"}),e.jsxs("div",{className:`inline-flex items-center justify-center px-4 py-2 rounded-lg text-xl font-bold h-12 ${u>0?"bg-green-100 text-green-800 border-2 border-green-300":u<0?"bg-red-100 text-red-800 border-2 border-red-300":"bg-gray-100 text-gray-800 border-2 border-gray-300"}`,children:[u>0?"+":"",v(u)]})]})})]}),e.jsxs("div",{className:"grid gap-4",style:{gridTemplateColumns:"1fr 1fr 1fr 40px"},children:[e.jsxs("div",{children:[e.jsx(n,{className:"text-sm font-medium mb-2 block",children:"Quantity"}),e.jsx(m,{type:"number",placeholder:"1",value:a.quantity,onChange:l=>p(s,"quantity",l.target.value),min:"1",required:!0,className:"text-center w-full text-lg font-bold h-12"}),c[`items.${s}.quantity`]&&e.jsx(d,{message:c[`items.${s}.quantity`],className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(n,{className:"text-sm font-medium mb-2 block",children:"Unit Cost"}),e.jsx(m,{type:"number",step:"0.01",placeholder:"0.00",value:a.unit_cost_price,onChange:l=>p(s,"unit_cost_price",l.target.value),min:"0",required:!0,className:"w-full h-12"}),e.jsxs("div",{className:"text-center text-xs text-gray-600 mt-1",children:["Total: ",v(t*x)]}),c[`items.${s}.unit_cost_price`]&&e.jsx(d,{message:c[`items.${s}.unit_cost_price`],className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(n,{className:"text-sm font-medium mb-2 block",children:"Unit Selling"}),e.jsx(m,{type:"number",step:"0.01",placeholder:"0.00",value:a.unit_selling_price,onChange:l=>p(s,"unit_selling_price",l.target.value),min:"0",required:!0,className:"w-full h-12"}),e.jsxs("div",{className:"text-center text-xs text-gray-600 mt-1",children:["Total: ",v(t*N)]}),c[`items.${s}.unit_selling_price`]&&e.jsx(d,{message:c[`items.${s}.unit_selling_price`],className:"mt-1"})]}),e.jsx("div",{className:"flex justify-center items-end h-12",children:e.jsx(Q,{className:`h-5 w-5 cursor-pointer transition-colors ${i.length===1?"text-gray-400 cursor-not-allowed":"text-red-600 hover:text-red-800"}`,onClick:()=>i.length>1&&L(s)})})]})]}),e.jsxs("div",{className:"hidden lg:block xl:hidden lg:p-3 lg:space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-3 items-end",children:[e.jsxs("div",{children:[e.jsx(n,{className:"text-sm font-medium mb-2 block",children:"Product *"}),e.jsx(m,{list:`product-list-${s}`,value:a.product_name,onChange:l=>P(s,l.target.value),placeholder:"Type or select a product",className:"w-full h-10"}),e.jsx("datalist",{id:`product-list-${s}`,children:_.map(l=>e.jsx("option",{value:l.name},l.id))}),c[`items.${s}.product_name`]&&e.jsx(d,{message:c[`items.${s}.product_name`],className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(n,{className:"text-sm font-medium mb-2 block",children:"Supplier"}),e.jsx(m,{list:`supplier-list-${s}`,value:a.supplier_name,onChange:l=>p(s,"supplier_name",l.target.value),placeholder:"Type or select a supplier",className:"w-full h-10"}),e.jsx("datalist",{id:`supplier-list-${s}`,children:E.map(l=>e.jsx("option",{value:l.name},l.id))}),c[`items.${s}.supplier_name`]&&e.jsx(d,{message:c[`items.${s}.supplier_name`],className:"mt-1"})]}),e.jsx("div",{children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700 mb-2",children:"Profit"}),e.jsxs("div",{className:`inline-flex items-center justify-center px-3 py-2 rounded-lg text-base font-bold h-10 w-full ${u>0?"bg-green-100 text-green-800 border-2 border-green-300":u<0?"bg-red-100 text-red-800 border-2 border-red-300":"bg-gray-100 text-gray-800 border-2 border-gray-300"}`,children:[u>0?"+":"",v(u)]})]})})]}),e.jsxs("div",{className:"grid gap-3",style:{gridTemplateColumns:"1fr 1fr 1fr 32px"},children:[e.jsxs("div",{children:[e.jsx(n,{className:"text-sm font-medium mb-2 block",children:"Quantity"}),e.jsx(m,{type:"number",placeholder:"1",value:a.quantity,onChange:l=>p(s,"quantity",l.target.value),min:"1",required:!0,className:"text-center w-full text-base font-medium h-10"}),c[`items.${s}.quantity`]&&e.jsx(d,{message:c[`items.${s}.quantity`],className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(n,{className:"text-sm font-medium mb-2 block",children:"Unit Cost"}),e.jsx(m,{type:"number",step:"0.01",placeholder:"0.00",value:a.unit_cost_price,onChange:l=>p(s,"unit_cost_price",l.target.value),min:"0",required:!0,className:"w-full h-10"}),e.jsx("div",{className:"text-center text-xs text-gray-600 mt-1",children:v(t*x)}),c[`items.${s}.unit_cost_price`]&&e.jsx(d,{message:c[`items.${s}.unit_cost_price`],className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(n,{className:"text-sm font-medium mb-2 block",children:"Unit Selling"}),e.jsx(m,{type:"number",step:"0.01",placeholder:"0.00",value:a.unit_selling_price,onChange:l=>p(s,"unit_selling_price",l.target.value),min:"0",required:!0,className:"w-full h-10"}),e.jsx("div",{className:"text-center text-xs text-gray-600 mt-1",children:v(t*N)}),c[`items.${s}.unit_selling_price`]&&e.jsx(d,{message:c[`items.${s}.unit_selling_price`],className:"mt-1"})]}),e.jsx("div",{className:"flex justify-center items-end h-10",children:e.jsx(Q,{className:`h-4 w-4 cursor-pointer transition-colors ${i.length===1?"text-gray-400 cursor-not-allowed":"text-red-600 hover:text-red-800"}`,onClick:()=>i.length>1&&L(s)})})]})]})]},s)})]}),e.jsxs("div",{className:"space-y-4 rounded-lg border p-4",children:[e.jsx(n,{className:"text-base font-semibold",children:"Trip Expenses"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"transportation_cost",children:"Transportation Cost (GHC)"}),e.jsx(m,{id:"transportation_cost",type:"number",step:"0.01",min:"0",placeholder:"0.00",value:f.transportation_cost,onChange:a=>h("transportation_cost",a.target.value)}),c.transportation_cost&&e.jsx(d,{message:c.transportation_cost,className:"mt-1"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"other_expenses",children:"Other Expenses (GHC)"}),e.jsx(m,{id:"other_expenses",type:"number",step:"0.01",min:"0",placeholder:"0.00",value:f.other_expenses,onChange:a=>h("other_expenses",a.target.value)}),c.other_expenses&&e.jsx(d,{message:c.other_expenses,className:"mt-1"})]})]})]}),e.jsxs("div",{className:"space-y-4 rounded-lg bg-blue-50 p-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(re,{className:"h-5 w-5 text-blue-600"}),e.jsx(n,{className:"text-base font-semibold text-blue-900",children:"Trip Summary"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 md:grid-cols-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Total Cost"}),e.jsx("div",{className:"text-lg font-semibold text-red-600",children:v($.totalCost)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Total Selling"}),e.jsx("div",{className:"text-lg font-semibold text-green-600",children:v($.totalSelling)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Gross Profit"}),e.jsx("div",{className:`text-lg font-semibold ${$.grossProfit>0?"text-green-600":$.grossProfit<0?"text-red-600":"text-gray-600"}`,children:v($.grossProfit)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Total Expenses"}),e.jsx("div",{className:"text-lg font-semibold text-orange-600",children:v(B)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Net Profit"}),e.jsx("div",{className:`text-lg font-semibold ${M>0?"text-green-600":M<0?"text-red-600":"text-gray-600"}`,children:v(M)})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"notes",children:"Notes"}),e.jsx(ne,{id:"notes",placeholder:"Additional notes about this trip",value:f.notes,onChange:a=>h("notes",a.target.value),rows:2}),c.notes&&e.jsx(d,{message:c.notes,className:"mt-1"})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(S,{type:"button",variant:"outline",onClick:U,children:"Cancel"}),e.jsx(S,{type:"submit",disabled:A,children:A?"Creating...":"Create Trip Estimation"})]})]})]})})}function qe({isOpen:b,onClose:C,trip:_,products:E=[],suppliers:c=[],errors:i={}}){const[j,f]=F.useState([]),{data:h,setData:y,put:A,processing:T,reset:g,clearErrors:I}=le({trip_date:"",description:"",location:"",transportation_cost:"",other_expenses:"",notes:"",items:[]});F.useEffect(()=>{if(_&&b){const t=new Date(_.trip_date).toISOString().split("T")[0],x=_.items||[{product_name:"",supplier_name:"",quantity:1,unit_cost_price:0,unit_selling_price:0}];f(x),y({trip_date:t,description:_.description||"",location:_.location||"",transportation_cost:_.transportation_cost||"",other_expenses:_.other_expenses||"",notes:_.notes||"",items:x}),I()}},[_,b,I]);function U(s){s.preventDefault(),_&&(y({...h,items:j}),A(route("trip-estimations.update",_.id),{onSuccess:()=>{g(),I(),C()},preserveScroll:!0,preserveState:!0,only:["trips","overview","errors","flash"]}))}function R(){g(),I(),f([]),C()}function L(){const s=[...j,{product_name:"",supplier_name:"",quantity:1,unit_cost_price:0,unit_selling_price:0}];f(s),y("items",s)}function P(s){if(j.length>1){const t=j.filter((x,N)=>N!==s);f(t),y("items",t)}}function p(s,t,x){const N=[...j];N[s]={...N[s],[t]:x},f(N),y("items",N)}function $(s,t){const x=[...j];x[s]={...x[s],product_name:t},f(x),y("items",x)}if(!_)return null;const k=j.reduce((s,t)=>{const x=parseInt(t.quantity)||0,N=parseFloat(t.unit_cost_price)||0,w=parseFloat(t.unit_selling_price)||0,r=x*N,u=x*w,l=u-r;return{totalCost:s.totalCost+r,totalSelling:s.totalSelling+u,grossProfit:s.grossProfit+l}},{totalCost:0,totalSelling:0,grossProfit:0}),K=parseFloat(h.transportation_cost)||0,B=parseFloat(h.other_expenses)||0,M=K+B,v=k.grossProfit-M;function a(s){return`${parseFloat(s||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`}return e.jsx(Y,{open:b,onOpenChange:C,children:e.jsxs(J,{className:"max-h-[95vh] w-[95vw] max-w-none overflow-y-auto",children:[e.jsx(X,{children:e.jsx(Z,{children:"Edit Trip Estimation"})}),e.jsxs("form",{onSubmit:U,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"trip_date",children:"Trip Date *"}),e.jsx(m,{id:"trip_date",type:"date",value:h.trip_date,onChange:s=>y("trip_date",s.target.value),required:!0}),i.trip_date&&e.jsx(d,{message:i.trip_date,className:"mt-1"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"description",children:"Description"}),e.jsx(m,{id:"description",placeholder:"e.g., Weekly stock purchase",value:h.description,onChange:s=>y("description",s.target.value)}),i.description&&e.jsx(d,{message:i.description,className:"mt-1"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"location",children:"Location"}),e.jsx(m,{id:"location",placeholder:"e.g., Kumasi Market",value:h.location,onChange:s=>y("location",s.target.value)}),i.location&&e.jsx(d,{message:i.location,className:"mt-1"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(n,{className:"text-base font-semibold",children:"Products *"}),e.jsxs(S,{type:"button",variant:"outline",size:"sm",onClick:L,className:"h-8",children:[e.jsx(ee,{className:"mr-1 h-3 w-3"}),"Add Product"]})]}),j.map((s,t)=>{const x=parseInt(s.quantity)||0,N=parseFloat(s.unit_cost_price)||0,w=parseFloat(s.unit_selling_price)||0,r=x*N,l=x*w-r;return e.jsxs("div",{className:"rounded-lg border bg-white shadow-sm",children:[e.jsxs("div",{className:"block lg:hidden p-4 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h4",{className:"font-medium text-gray-700",children:["Product ",t+1]}),e.jsx(S,{type:"button",variant:"outline",size:"sm",onClick:()=>P(t),disabled:j.length===1,className:"h-8 w-8 p-0 text-red-600 disabled:text-gray-400 disabled:cursor-not-allowed",children:e.jsx(Q,{className:"h-3 w-3"})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(n,{className:"text-sm font-medium",children:"Product *"}),e.jsx(m,{list:`product-list-${t}`,value:s.product_name,onChange:o=>$(t,o.target.value),placeholder:"Type or select a product",className:"mt-1"}),e.jsx("datalist",{id:`product-list-${t}`,children:E.map(o=>e.jsx("option",{value:o.name},o.id))}),i[`items.${t}.product_name`]&&e.jsx(d,{message:i[`items.${t}.product_name`],className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(n,{className:"text-sm font-medium",children:"Supplier"}),e.jsx(m,{list:`supplier-list-${t}`,value:s.supplier_name,onChange:o=>p(t,"supplier_name",o.target.value),placeholder:"Type or select a supplier",className:"mt-1"}),e.jsx("datalist",{id:`supplier-list-${t}`,children:c.map(o=>e.jsx("option",{value:o.name},o.id))}),i[`items.${t}.supplier_name`]&&e.jsx(d,{message:i[`items.${t}.supplier_name`],className:"mt-1"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx(n,{className:"text-sm font-medium",children:"Quantity"}),e.jsx(m,{type:"number",placeholder:"1",value:s.quantity,onChange:o=>p(t,"quantity",o.target.value),min:"1",required:!0,className:"mt-1 w-full text-center text-lg font-medium h-12"}),i[`items.${t}.quantity`]&&e.jsx(d,{message:i[`items.${t}.quantity`],className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(n,{className:"text-sm font-medium",children:"Unit Cost (GHC)"}),e.jsx(m,{type:"number",step:"0.01",placeholder:"0.00",value:s.unit_cost_price,onChange:o=>p(t,"unit_cost_price",o.target.value),min:"0",required:!0,className:"mt-1"}),i[`items.${t}.unit_cost_price`]&&e.jsx(d,{message:i[`items.${t}.unit_cost_price`],className:"mt-1"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx(n,{className:"text-sm font-medium",children:"Total Cost"}),e.jsx("div",{className:"mt-1 flex h-10 w-full rounded-md border border-input bg-gray-50 px-3 py-2 text-sm text-gray-700 items-center",children:a(r)})]}),e.jsxs("div",{children:[e.jsx(n,{className:"text-sm font-medium",children:"Unit Selling (GHC)"}),e.jsx(m,{type:"number",step:"0.01",placeholder:"0.00",value:s.unit_selling_price,onChange:o=>p(t,"unit_selling_price",o.target.value),min:"0",required:!0,className:"mt-1"}),i[`items.${t}.unit_selling_price`]&&e.jsx(d,{message:i[`items.${t}.unit_selling_price`],className:"mt-1"})]})]}),e.jsxs("div",{children:[e.jsx(n,{className:"text-sm font-medium",children:"Profit"}),e.jsxs("div",{className:`mt-1 flex h-16 w-full rounded-md border-2 px-4 py-3 text-lg font-bold items-center justify-center ${l>0?"bg-green-50 text-green-700 border-green-300":l<0?"bg-red-50 text-red-700 border-red-300":"bg-gray-50 text-gray-700 border-gray-300"}`,children:[l>0?"+":"",a(l)]})]})]})]}),e.jsxs("div",{className:"hidden xl:block xl:p-4 xl:space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-4 gap-4 items-end",children:[e.jsxs("div",{className:"col-span-1",children:[e.jsx(n,{className:"text-sm font-medium mb-2 block",children:"Product *"}),e.jsx(m,{list:`product-list-${t}`,value:s.product_name,onChange:o=>$(t,o.target.value),placeholder:"Type or select a product",className:"w-full h-12"}),e.jsx("datalist",{id:`product-list-${t}`,children:E.map(o=>e.jsx("option",{value:o.name},o.id))}),i[`items.${t}.product_name`]&&e.jsx(d,{message:i[`items.${t}.product_name`],className:"mt-1"})]}),e.jsxs("div",{className:"col-span-1",children:[e.jsx(n,{className:"text-sm font-medium mb-2 block",children:"Supplier"}),e.jsx(m,{list:`supplier-list-${t}`,value:s.supplier_name,onChange:o=>p(t,"supplier_name",o.target.value),placeholder:"Type or select a supplier",className:"w-full h-12"}),e.jsx("datalist",{id:`supplier-list-${t}`,children:c.map(o=>e.jsx("option",{value:o.name},o.id))}),i[`items.${t}.supplier_name`]&&e.jsx(d,{message:i[`items.${t}.supplier_name`],className:"mt-1"})]}),e.jsx("div",{className:"col-span-2",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700 mb-2",children:"Profit"}),e.jsxs("div",{className:`inline-flex items-center justify-center px-4 py-2 rounded-lg text-xl font-bold h-12 ${l>0?"bg-green-100 text-green-800 border-2 border-green-300":l<0?"bg-red-100 text-red-800 border-2 border-red-300":"bg-gray-100 text-gray-800 border-2 border-gray-300"}`,children:[l>0?"+":"",a(l)]})]})})]}),e.jsxs("div",{className:"grid gap-4",style:{gridTemplateColumns:"1fr 1fr 1fr 40px"},children:[e.jsxs("div",{children:[e.jsx(n,{className:"text-sm font-medium mb-2 block",children:"Quantity"}),e.jsx(m,{type:"number",placeholder:"1",value:s.quantity,onChange:o=>p(t,"quantity",o.target.value),min:"1",required:!0,className:"text-center w-full text-lg font-bold h-12"}),i[`items.${t}.quantity`]&&e.jsx(d,{message:i[`items.${t}.quantity`],className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(n,{className:"text-sm font-medium mb-2 block",children:"Unit Cost"}),e.jsx(m,{type:"number",step:"0.01",placeholder:"0.00",value:s.unit_cost_price,onChange:o=>p(t,"unit_cost_price",o.target.value),min:"0",required:!0,className:"w-full h-12"}),e.jsxs("div",{className:"text-center text-xs text-gray-600 mt-1",children:["Total: ",a(x*N)]}),i[`items.${t}.unit_cost_price`]&&e.jsx(d,{message:i[`items.${t}.unit_cost_price`],className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(n,{className:"text-sm font-medium mb-2 block",children:"Unit Selling"}),e.jsx(m,{type:"number",step:"0.01",placeholder:"0.00",value:s.unit_selling_price,onChange:o=>p(t,"unit_selling_price",o.target.value),min:"0",required:!0,className:"w-full h-12"}),e.jsxs("div",{className:"text-center text-xs text-gray-600 mt-1",children:["Total: ",a(x*w)]}),i[`items.${t}.unit_selling_price`]&&e.jsx(d,{message:i[`items.${t}.unit_selling_price`],className:"mt-1"})]}),e.jsx("div",{className:"flex justify-center items-end h-12",children:e.jsx(Q,{className:`h-5 w-5 cursor-pointer transition-colors ${j.length===1?"text-gray-400 cursor-not-allowed":"text-red-600 hover:text-red-800"}`,onClick:()=>j.length>1&&P(t)})})]})]}),e.jsxs("div",{className:"hidden lg:block xl:hidden lg:p-3 lg:space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-3 items-end",children:[e.jsxs("div",{children:[e.jsx(n,{className:"text-sm font-medium mb-2 block",children:"Product *"}),e.jsx(m,{list:`product-list-${t}`,value:s.product_name,onChange:o=>$(t,o.target.value),placeholder:"Type or select a product",className:"w-full h-10"}),e.jsx("datalist",{id:`product-list-${t}`,children:E.map(o=>e.jsx("option",{value:o.name},o.id))}),i[`items.${t}.product_name`]&&e.jsx(d,{message:i[`items.${t}.product_name`],className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(n,{className:"text-sm font-medium mb-2 block",children:"Supplier"}),e.jsx(m,{list:`supplier-list-${t}`,value:s.supplier_name,onChange:o=>p(t,"supplier_name",o.target.value),placeholder:"Type or select a supplier",className:"w-full h-10"}),e.jsx("datalist",{id:`supplier-list-${t}`,children:c.map(o=>e.jsx("option",{value:o.name},o.id))}),i[`items.${t}.supplier_name`]&&e.jsx(d,{message:i[`items.${t}.supplier_name`],className:"mt-1"})]}),e.jsx("div",{children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700 mb-2",children:"Profit"}),e.jsxs("div",{className:`inline-flex items-center justify-center px-3 py-2 rounded-lg text-base font-bold h-10 w-full ${l>0?"bg-green-100 text-green-800 border-2 border-green-300":l<0?"bg-red-100 text-red-800 border-2 border-red-300":"bg-gray-100 text-gray-800 border-2 border-gray-300"}`,children:[l>0?"+":"",a(l)]})]})})]}),e.jsxs("div",{className:"grid gap-3",style:{gridTemplateColumns:"1fr 1fr 1fr 32px"},children:[e.jsxs("div",{children:[e.jsx(n,{className:"text-sm font-medium mb-2 block",children:"Quantity"}),e.jsx(m,{type:"number",placeholder:"1",value:s.quantity,onChange:o=>p(t,"quantity",o.target.value),min:"1",required:!0,className:"text-center w-full text-base font-medium h-10"}),i[`items.${t}.quantity`]&&e.jsx(d,{message:i[`items.${t}.quantity`],className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(n,{className:"text-sm font-medium mb-2 block",children:"Unit Cost"}),e.jsx(m,{type:"number",step:"0.01",placeholder:"0.00",value:s.unit_cost_price,onChange:o=>p(t,"unit_cost_price",o.target.value),min:"0",required:!0,className:"w-full h-10"}),e.jsx("div",{className:"text-center text-xs text-gray-600 mt-1",children:a(x*N)}),i[`items.${t}.unit_cost_price`]&&e.jsx(d,{message:i[`items.${t}.unit_cost_price`],className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(n,{className:"text-sm font-medium mb-2 block",children:"Unit Selling"}),e.jsx(m,{type:"number",step:"0.01",placeholder:"0.00",value:s.unit_selling_price,onChange:o=>p(t,"unit_selling_price",o.target.value),min:"0",required:!0,className:"w-full h-10"}),e.jsx("div",{className:"text-center text-xs text-gray-600 mt-1",children:a(x*w)}),i[`items.${t}.unit_selling_price`]&&e.jsx(d,{message:i[`items.${t}.unit_selling_price`],className:"mt-1"})]}),e.jsx("div",{className:"flex justify-center items-end h-10",children:e.jsx(Q,{className:`h-4 w-4 cursor-pointer transition-colors ${j.length===1?"text-gray-400 cursor-not-allowed":"text-red-600 hover:text-red-800"}`,onClick:()=>j.length>1&&P(t)})})]})]})]},t)})]}),e.jsxs("div",{className:"space-y-4 rounded-lg border p-4",children:[e.jsx(n,{className:"text-base font-semibold",children:"Trip Expenses"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"transportation_cost",children:"Transportation Cost (GHC)"}),e.jsx(m,{id:"transportation_cost",type:"number",step:"0.01",min:"0",placeholder:"0.00",value:h.transportation_cost,onChange:s=>y("transportation_cost",s.target.value)}),i.transportation_cost&&e.jsx(d,{message:i.transportation_cost,className:"mt-1"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"other_expenses",children:"Other Expenses (GHC)"}),e.jsx(m,{id:"other_expenses",type:"number",step:"0.01",min:"0",placeholder:"0.00",value:h.other_expenses,onChange:s=>y("other_expenses",s.target.value)}),i.other_expenses&&e.jsx(d,{message:i.other_expenses,className:"mt-1"})]})]})]}),e.jsxs("div",{className:"space-y-4 rounded-lg bg-blue-50 p-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(re,{className:"h-5 w-5 text-blue-600"}),e.jsx(n,{className:"text-base font-semibold text-blue-900",children:"Trip Summary"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 md:grid-cols-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Total Cost"}),e.jsx("div",{className:"text-lg font-semibold text-red-600",children:a(k.totalCost)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Total Selling"}),e.jsx("div",{className:"text-lg font-semibold text-green-600",children:a(k.totalSelling)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Gross Profit"}),e.jsx("div",{className:`text-lg font-semibold ${k.grossProfit>0?"text-green-600":k.grossProfit<0?"text-red-600":"text-gray-600"}`,children:a(k.grossProfit)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Total Expenses"}),e.jsx("div",{className:"text-lg font-semibold text-orange-600",children:a(M)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Net Profit"}),e.jsx("div",{className:`text-lg font-semibold ${v>0?"text-green-600":v<0?"text-red-600":"text-gray-600"}`,children:a(v)})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"notes",children:"Notes"}),e.jsx(ne,{id:"notes",placeholder:"Additional notes about this trip",value:h.notes,onChange:s=>y("notes",s.target.value),rows:2}),i.notes&&e.jsx(d,{message:i.notes,className:"mt-1"})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(S,{type:"button",variant:"outline",onClick:R,children:"Cancel"}),e.jsx(S,{type:"submit",disabled:T,children:T?"Updating...":"Update Trip Estimation"})]})]})]})})}function Ye({trips:b=[],overview:C={},start_date:_="",end_date:E="",products:c=[],suppliers:i=[]}){var t,x,N,w;const[j,f]=F.useState(!1),[h,y]=F.useState(null),[A,T]=F.useState(null),[g,I]=F.useState(null),U=new Date,R=new Date(U.getFullYear(),U.getMonth(),1).toISOString().slice(0,10),L=new Date(U.getFullYear(),U.getMonth()+1,0).toISOString().slice(0,10),[P,p]=F.useState(_||R),[$,k]=F.useState(E||L),K=(r,u)=>{const l=u==="start"?r:P,o=u==="end"?r:$;u==="start"&&p(r),u==="end"&&k(r),te.get(route("trip-estimations.index"),{start_date:l,end_date:o,page:1},{preserveState:!0,preserveScroll:!0,replace:!0})};function B(r){y(r)}function M(){A&&te.delete(route("trip-estimations.destroy",A.id),{preserveScroll:!0,preserveState:!0,only:["trips","overview","errors","flash"],onSuccess:()=>T(null)})}function v(r){I(r)}function a(r){return`GHC ${parseFloat(r||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`}function s(r){const u=parseFloat(r||0);return u>0?"text-green-600":u<0?"text-red-600":"text-gray-600"}return e.jsx(ce,{breadcrumbs:[{title:"Trip Profit Estimator",href:"/trip-estimations"}],children:e.jsxs("div",{className:"min-h-screen space-y-6 bg-gray-100 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Trip Profit Estimator"}),e.jsxs(S,{onClick:()=>f(!0),className:"flex items-center gap-2",children:[e.jsx(ee,{className:"h-4 w-4"}),"Add Trip"]})]}),e.jsx(de,{startDate:P,endDate:$,onChange:K}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3",children:[e.jsxs(G,{children:[e.jsxs(H,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(O,{className:"text-sm font-medium",children:"Total Trips"}),e.jsx(oe,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(z,{children:e.jsx("div",{className:"text-2xl font-bold",children:C.total_trips||0})})]}),e.jsxs(G,{children:[e.jsxs(H,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(O,{className:"text-sm font-medium",children:"Total Selling Price"}),e.jsx(W,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(z,{children:e.jsx("div",{className:"text-2xl font-bold text-green-600",children:a(C.total_selling_price)})})]}),e.jsxs(G,{children:[e.jsxs(H,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(O,{className:"text-sm font-medium",children:"Total Cost Price"}),e.jsx(W,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(z,{children:e.jsx("div",{className:"text-2xl font-bold text-red-600",children:a(C.total_cost_price)})})]}),e.jsxs(G,{children:[e.jsxs(H,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(O,{className:"text-sm font-medium",children:"Gross Profit"}),e.jsx(ae,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(z,{children:e.jsx("div",{className:`text-2xl font-bold ${s(C.total_gross_profit)}`,children:a(C.total_gross_profit)})})]}),e.jsxs(G,{children:[e.jsxs(H,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(O,{className:"text-sm font-medium",children:"Total Expenses"}),e.jsx(W,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(z,{children:e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:a(C.total_expenses)})})]}),e.jsxs(G,{children:[e.jsxs(H,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(O,{className:"text-sm font-medium",children:"Net Profit"}),e.jsx(ae,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(z,{children:e.jsx("div",{className:`text-2xl font-bold ${s(C.total_net_profit)}`,children:a(C.total_net_profit)})})]})]}),e.jsxs(G,{children:[e.jsx(H,{children:e.jsx(O,{children:"Trip Estimations"})}),e.jsxs(z,{children:[e.jsxs(xe,{children:[e.jsx(ue,{children:e.jsxs(V,{children:[e.jsx(D,{children:"Date"}),e.jsx(D,{children:"Description"}),e.jsx(D,{children:"Location"}),e.jsx(D,{children:"Items"}),e.jsx(D,{className:"text-right",children:"Cost Price"}),e.jsx(D,{className:"text-right",children:"Selling Price"}),e.jsx(D,{className:"text-right",children:"Gross Profit"}),e.jsx(D,{className:"text-right",children:"Expenses"}),e.jsx(D,{className:"text-right",children:"Net Profit"}),e.jsx(D,{className:"text-center",children:"Actions"})]})}),e.jsx(pe,{children:((t=b.data)==null?void 0:t.length)>0?b.data.map(r=>e.jsxs(V,{children:[e.jsx(q,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(be,{className:"h-4 w-4 text-gray-400"}),r.trip_date]})}),e.jsx(q,{children:r.description||"-"}),e.jsx(q,{children:r.location||"-"}),e.jsx(q,{children:e.jsxs(me,{variant:"secondary",children:[r.items_count," items"]})}),e.jsx(q,{className:"text-right font-mono",children:a(r.total_cost_price)}),e.jsx(q,{className:"text-right font-mono",children:a(r.total_selling_price)}),e.jsx(q,{className:`text-right font-mono ${s(r.gross_profit)}`,children:a(r.gross_profit)}),e.jsx(q,{className:"text-right font-mono",children:a(r.total_expenses)}),e.jsx(q,{className:`text-right font-mono ${s(r.net_profit)}`,children:a(r.net_profit)}),e.jsx(q,{className:"text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(S,{variant:"outline",size:"sm",onClick:()=>v(r),children:e.jsx(Ce,{className:"h-3 w-3"})}),e.jsx(S,{variant:"outline",size:"sm",onClick:()=>B(r),children:e.jsx(Se,{className:"h-3 w-3"})}),e.jsx(S,{variant:"outline",size:"sm",onClick:()=>T(r),className:"text-red-600 hover:text-red-700",children:e.jsx(Q,{className:"h-3 w-3"})})]})})]},r.id)):e.jsx(V,{children:e.jsxs(q,{colSpan:10,className:"text-center py-8 text-gray-500",children:["No trip estimations found for the selected period.",e.jsx("br",{}),e.jsx(S,{variant:"link",onClick:()=>f(!0),className:"mt-2",children:"Add your first trip estimation"})]})})})]}),((x=b.data)==null?void 0:x.length)===0?e.jsx("div",{className:"text-muted-foreground py-8 text-center",children:"No trip estimations found for the selected period."}):e.jsxs("div",{className:"my-3 flex items-center justify-center gap-4",children:[b.prev_page_url&&e.jsx(se,{preserveScroll:!0,preserveState:!0,href:b.prev_page_url,className:"rounded border px-4 py-2 hover:bg-gray-100",children:"« Previous"}),e.jsxs("span",{className:"px-4 py-2 font-medium",children:["Page ",b.current_page]}),b.next_page_url&&e.jsx(se,{preserveScroll:!0,preserveState:!0,href:b.next_page_url,className:"rounded border px-4 py-2 hover:bg-gray-100",children:"Next »"})]})]})]}),e.jsx(Te,{isOpen:j,onClose:()=>f(!1),products:c,suppliers:i}),h&&e.jsx(qe,{isOpen:!!h,onClose:()=>y(null),trip:h,products:c,suppliers:i}),g&&e.jsx(Y,{open:!!g,onOpenChange:()=>I(null),children:e.jsxs(J,{className:"max-h-[90vh] max-w-3xl overflow-y-auto",children:[e.jsx(X,{children:e.jsx(Z,{children:"Trip Details"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Trip Date"}),e.jsx("div",{className:"font-medium",children:g.trip_date})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Location"}),e.jsx("div",{className:"font-medium",children:g.location||"-"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Description"}),e.jsx("div",{className:"font-medium",children:g.description||"-"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Notes"}),e.jsx("div",{className:"font-medium whitespace-pre-wrap",children:g.notes||"-"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Total Cost"}),e.jsx("div",{className:"font-mono",children:a(g.total_cost_price)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Total Selling"}),e.jsx("div",{className:"font-mono",children:a(g.total_selling_price)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Gross Profit"}),e.jsx("div",{className:`font-mono ${s(g.gross_profit)}`,children:a(g.gross_profit)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Expenses"}),e.jsx("div",{className:"font-mono",children:a(g.total_expenses)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Net Profit"}),e.jsx("div",{className:`font-mono ${s(g.net_profit)}`,children:a(g.net_profit)})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm font-semibold text-blue-900 mb-2",children:["Items (",((N=g.items)==null?void 0:N.length)||0,")"]}),e.jsx("div",{className:"space-y-2",children:(w=g.items)!=null&&w.length?g.items.map((r,u)=>e.jsxs("div",{className:"flex flex-wrap gap-4 p-3 bg-gray-50 rounded border",children:[e.jsxs("div",{className:"min-w-[120px]",children:[e.jsx("div",{className:"text-xs text-gray-600",children:"Product"}),e.jsx("div",{className:"font-medium",children:r.product_name})]}),e.jsxs("div",{className:"min-w-[120px]",children:[e.jsx("div",{className:"text-xs text-gray-600",children:"Supplier"}),e.jsx("div",{className:"font-medium",children:r.supplier_name||"-"})]}),e.jsxs("div",{className:"min-w-[60px]",children:[e.jsx("div",{className:"text-xs text-gray-600",children:"Qty"}),e.jsx("div",{className:"font-mono",children:r.quantity})]}),e.jsxs("div",{className:"min-w-[100px]",children:[e.jsx("div",{className:"text-xs text-gray-600",children:"Unit Prices"}),e.jsxs("div",{className:"font-mono text-xs",children:["Cost: ",Number(r.unit_cost_price).toLocaleString("en-US",{minimumFractionDigits:2}),e.jsx("br",{}),"Sell: ",Number(r.unit_selling_price).toLocaleString("en-US",{minimumFractionDigits:2})]})]}),e.jsxs("div",{className:"min-w-[100px]",children:[e.jsx("div",{className:"text-xs text-gray-600",children:"Total Cost"}),e.jsx("div",{className:"font-mono text-xs",children:Number(r.unit_cost_price*r.quantity).toLocaleString("en-US",{minimumFractionDigits:2})})]}),e.jsxs("div",{className:"min-w-[100px]",children:[e.jsx("div",{className:"text-xs text-gray-600",children:"Total Selling"}),e.jsx("div",{className:"font-mono text-xs",children:Number(r.unit_selling_price*r.quantity).toLocaleString("en-US",{minimumFractionDigits:2})})]}),e.jsxs("div",{className:"min-w-[100px]",children:[e.jsx("div",{className:"text-xs text-gray-600",children:"Profit (GHC)"}),e.jsx("div",{className:"font-mono text-green-600 font-bold",children:Number((parseFloat(r.unit_selling_price||0)-parseFloat(r.unit_cost_price||0))*parseFloat(r.quantity||0)).toLocaleString("en-US",{minimumFractionDigits:2})})]})]},u)):e.jsx("div",{className:"text-gray-500 text-sm",children:"No items found."})})]})]})]})}),e.jsx(he,{open:!!A,onOpenChange:()=>T(null),children:e.jsxs(ge,{children:[e.jsxs(je,{children:[e.jsx(Ne,{children:"Delete Trip Estimation"}),e.jsx(fe,{children:"Are you sure you want to delete this trip estimation? This action cannot be undone."})]}),e.jsxs(ve,{children:[e.jsx(_e,{children:"Cancel"}),e.jsx(ye,{onClick:M,className:"bg-red-600 hover:bg-red-700",children:"Delete"})]})]})})]})})}export{Ye as default};
