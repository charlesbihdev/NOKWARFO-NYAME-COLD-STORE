import{r as p,u as $,j as e,a as f}from"./app-Z_70yno1.js";import{A as ee}from"./app-layout-DmWjQ7WL.js";import{D as te}from"./DateRangePicker-DHo6XHC2.js";import{F as g}from"./createLucideIcon-BvOV7x4M.js";import{C as w,a as _,b as F,c as E}from"./card-DSUhXYZv.js";import{T as se,a as ae,b as v,c as o,d as re,e as l}from"./table-DZwhwyjH.js";import{D as le,a as ne,b as ie,c as de,d as ce}from"./dialog-DmPq_NqS.js";import{I as N}from"./index-Bt7K6JtI.js";import{L as n}from"./label-6XDpnsPw.js";import{S as A,a as O,b as I,c as H,d as b}from"./select-DHkiajad.js";import{T as oe}from"./textarea-DKEwuoIf.js";import{I as m}from"./InputError-B2BtLTzt.js";import{P as me}from"./plus-CbYTOEO-.js";import{T as xe}from"./trending-down-U-qWP_Xn.js";import"./index-D62GGxQv.js";import"./index-BICB9G1x.js";import"./index-ceQnuJCc.js";function Ee({expenses:s=[],start_date:L="",end_date:M="",type_filter:P="",total_amount:R=0}){var T,C;const k=()=>{const t=new Date,r=new Date(t.getFullYear(),t.getMonth(),1),c=new Date(t.getFullYear(),t.getMonth()+1,0);return{start:r.toISOString().slice(0,10),end:c.toISOString().slice(0,10)}},{start:q,end:G}=k(),[x,V]=p.useState(L||q),[h,z]=p.useState(M||G),[u,B]=p.useState(P||"all"),[Y,y]=p.useState(!1),{data:i,setData:d,post:J,processing:S,errors:a,reset:K}=$({description:"",amount:"",type:"others",notes:"",date:new Date().toISOString().split("T")[0]}),Q=[{title:"Expenses",href:"/expenses"}],j=[{value:"fixed",label:"Fixed"},{value:"additional",label:"Additional"},{value:"car_saving",label:"Car Saving"},{value:"trip_saving",label:"Trip Saving"},{value:"loan_saving",label:"Loan Saving"},{value:"others",label:"Others"}],U=(t,r)=>{const c=r==="start"?t:x,Z=r==="end"?t:h;r==="start"&&V(t),r==="end"&&z(t),f.get(route("expenses.index"),{start_date:c,end_date:Z,type_filter:u,page:1},{preserveState:!0,preserveScroll:!0,replace:!0})},W=t=>{B(t),f.get(route("expenses.index"),{start_date:x,end_date:h,type_filter:t,page:1},{preserveState:!0,preserveScroll:!0,replace:!0})},D=t=>{f.get(route("expenses.index"),{start_date:x,end_date:h,type_filter:u,page:t},{preserveState:!0,preserveScroll:!0,replace:!0})};function X(t){t.preventDefault(),J(route("expenses.store"),{onSuccess:()=>{K(),y(!1)},preserveScroll:!0})}return e.jsx(ee,{breadcrumbs:Q,children:e.jsxs("div",{className:"min-h-screen space-y-6 bg-gray-100 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Expenses Management"}),e.jsxs(le,{open:Y,onOpenChange:y,children:[e.jsx(ne,{asChild:!0,children:e.jsxs(g,{children:[e.jsx(me,{className:"mr-2 h-4 w-4"}),"Add Expense"]})}),e.jsxs(ie,{className:"sm:max-w-[425px]",children:[e.jsx(de,{children:e.jsx(ce,{children:"Add New Expense"})}),e.jsxs("form",{onSubmit:X,className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(n,{htmlFor:"description",className:"text-right",children:"Description"}),e.jsxs("div",{className:"col-span-3",children:[e.jsx(N,{id:"description",placeholder:"Expense description",value:i.description,onChange:t=>d("description",t.target.value),required:!0}),a.description&&e.jsx(m,{message:a.description,className:"mt-2"})]})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(n,{htmlFor:"amount",className:"text-right",children:"Amount (GH₵)"}),e.jsxs("div",{className:"col-span-3",children:[e.jsx(N,{id:"amount",type:"number",step:"0.01",placeholder:"0.00",value:i.amount,onChange:t=>d("amount",t.target.value),required:!0}),a.amount&&e.jsx(m,{message:a.amount,className:"mt-2"})]})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(n,{htmlFor:"type",className:"text-right",children:"Type"}),e.jsxs("div",{className:"col-span-3",children:[e.jsxs(A,{value:i.type,onValueChange:t=>d("type",t),children:[e.jsx(O,{children:e.jsx(I,{placeholder:"Select expense type"})}),e.jsx(H,{children:j.map(t=>e.jsx(b,{value:t.value,children:t.label},t.value))})]}),a.type&&e.jsx(m,{message:a.type,className:"mt-2"})]})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(n,{htmlFor:"date",className:"text-right",children:"Date"}),e.jsxs("div",{className:"col-span-3",children:[e.jsx(N,{id:"date",type:"date",value:i.date,onChange:t=>d("date",t.target.value),required:!0}),a.date&&e.jsx(m,{message:a.date,className:"mt-2"})]})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(n,{htmlFor:"notes",className:"text-right",children:"Notes"}),e.jsxs("div",{className:"col-span-3",children:[e.jsx(oe,{id:"notes",placeholder:"Optional notes",value:i.notes,onChange:t=>d("notes",t.target.value),rows:3}),a.notes&&e.jsx(m,{message:a.notes,className:"mt-2"})]})]}),e.jsx(g,{type:"submit",disabled:S,children:S?"Adding...":"Add Expense"})]})]})]})]}),e.jsxs("div",{className:"flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between",children:[e.jsx(te,{startDate:x,endDate:h,onChange:U}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(n,{htmlFor:"type-filter",children:"Filter by Type:"}),e.jsxs(A,{value:u,onValueChange:W,children:[e.jsx(O,{className:"w-48",children:e.jsx(I,{placeholder:"All Types"})}),e.jsxs(H,{children:[e.jsx(b,{value:"all",children:"All Types"}),j.map(t=>e.jsx(b,{value:t.value,children:t.label},t.value))]})]})]})]}),e.jsxs(w,{children:[e.jsxs(_,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(F,{className:"text-sm font-medium",children:"Total Expenses"}),e.jsx(xe,{className:"h-4 w-4 text-red-600"})]}),e.jsxs(E,{children:[e.jsxs("div",{className:"text-2xl font-bold text-red-600",children:["GH₵",Number(R||0).toFixed(2)]}),e.jsxs("p",{className:"text-muted-foreground text-xs",children:[((T=s.data)==null?void 0:T.length)||0," expense",(((C=s.data)==null?void 0:C.length)||0)!==1?"s":""," in selected period"]})]})]}),e.jsxs(w,{children:[e.jsx(_,{children:e.jsx(F,{children:"Expenses List"})}),e.jsxs(E,{children:[e.jsxs(se,{children:[e.jsx(ae,{children:e.jsxs(v,{children:[e.jsx(o,{children:"Date"}),e.jsx(o,{children:"Description"}),e.jsx(o,{children:"Type"}),e.jsx(o,{children:"Amount"}),e.jsx(o,{children:"Notes"})]})}),e.jsx(re,{children:s.data&&s.data.length>0?s.data.map(t=>{var r;return e.jsxs(v,{children:[e.jsx(l,{className:"font-medium",children:new Date(t.date).toLocaleDateString()}),e.jsx(l,{children:t.description}),e.jsx(l,{children:e.jsx("span",{className:"inline-flex items-center rounded-full bg-gray-100 px-2.5 py-0.5 text-xs font-medium text-gray-800",children:((r=j.find(c=>c.value===t.type))==null?void 0:r.label)||t.type})}),e.jsxs(l,{className:"font-medium text-red-600",children:["GH₵",Number(t.amount).toFixed(2)]}),e.jsx(l,{className:"text-gray-500",children:t.notes||"-"})]},t.id)}):e.jsx(v,{children:e.jsx(l,{colSpan:5,className:"text-center text-gray-500 py-8",children:"No expenses found for the selected period and filters."})})})]}),s.data&&s.data.length>0&&e.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-500",children:["Showing ",s.data.length," expense",s.data.length!==1?"s":""]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(g,{variant:"outline",size:"sm",onClick:()=>D(s.current_page-1),disabled:!s.prev_page_url,children:"Previous"}),e.jsxs("span",{className:"text-sm text-gray-500",children:["Page ",s.current_page," of ",s.last_page]}),e.jsx(g,{variant:"outline",size:"sm",onClick:()=>D(s.current_page+1),disabled:!s.next_page_url,children:"Next"})]})]})]})]})]})})}export{Ee as default};
