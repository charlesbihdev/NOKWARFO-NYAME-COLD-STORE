import{u as I,j as e,r as _,a as B}from"./app-Bf1yXYu3.js";import{B as T}from"./badge-BUuTcWUL.js";import{c as K,F as j}from"./createLucideIcon-DzYmC230.js";import{C as k,c as A,a as Y,b as Z}from"./card-CyYwfR1t.js";import{T as ee,a as te,b as U,c as P,d as ae,e as F}from"./table-BiKWLpiF.js";import{T as se,A as ne,U as z,C as le,M as ie}from"./app-layout-DYMxv3lH.js";import{I as f}from"./InputError-CRUyq97S.js";import{D as q,b as H,c as E,d as X,e as $}from"./dialog-DF6-71xx.js";import{I as y}from"./index-BtwiKp3V.js";import{L as d}from"./label-DjUe1oZM.js";import{T as w}from"./textarea-2HedKRtd.js";import{P as L}from"./plus-8Ff_EEmu.js";import{T as W}from"./trash-2-b1VqrOvS.js";import{T as de}from"./trending-down-DQeWVRjO.js";import{S as ce,a as re,b as oe,c as me,d as D}from"./select-BCuLBJM7.js";import{D as V}from"./dollar-sign-CtD1xMGt.js";import{P as xe,M as he}from"./phone-CYT2QaLF.js";import{S as ue}from"./square-pen-CWHTdpBh.js";import{H as pe}from"./history-DrzxSnML.js";import"./index-BTFNH9Ad.js";import"./index-Cm-rS_H1.js";import"./index-CD9CExFd.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=[["path",{d:"M5 12h14",key:"1ays0h"}]],ge=K("Minus",je);function ye({isOpen:o,onClose:h,errors:t={}}){const{data:s,setData:a,post:i,processing:p,reset:c}=I({name:"",contact_person:"",phone:"",email:"",address:"",additional_info:""});function x(m){m.preventDefault(),i(route("suppliers.store"),{onSuccess:()=>{c(),h()},preserveScroll:!0,preserveState:!0,only:["suppliers","errors","flash"]})}return e.jsx(q,{open:o,onOpenChange:h,children:e.jsxs(H,{className:"max-h-[90vh] max-w-2xl overflow-y-auto",children:[e.jsxs(E,{children:[e.jsx(X,{children:"Add New Supplier"}),e.jsx($,{children:"Enter the details for the new supplier. All fields marked with * are required."})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"name",children:"Supplier Name *"}),e.jsx(y,{id:"name",placeholder:"Enter supplier name",value:s.name,onChange:m=>a("name",m.target.value),required:!0}),t.name&&e.jsx(f,{message:t.name,className:"mt-1"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"contact_person",children:"Contact Person"}),e.jsx(y,{id:"contact_person",placeholder:"Contact person name",value:s.contact_person,onChange:m=>a("contact_person",m.target.value),required:!0}),t.contact_person&&e.jsx(f,{message:t.contact_person,className:"mt-1"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"phone",children:"Phone Number"}),e.jsx(y,{id:"phone",placeholder:"+233 XX XXX XXXX",value:s.phone,onChange:m=>a("phone",m.target.value),type:"tel"}),t.phone&&e.jsx(f,{message:t.phone,className:"mt-1"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"email",children:"Email Address"}),e.jsx(y,{id:"email",placeholder:"supplier@example.com",value:s.email,onChange:m=>a("email",m.target.value),type:"email"}),t.email&&e.jsx(f,{message:t.email,className:"mt-1"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"address",children:"Address"}),e.jsx(w,{id:"address",placeholder:"Business address",value:s.address,onChange:m=>a("address",m.target.value),rows:2}),t.address&&e.jsx(f,{message:t.address,className:"mt-1"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"additional_info",children:"Additional Information"}),e.jsx(w,{id:"additional_info",placeholder:"Any additional notes or information",value:s.additional_info,onChange:m=>a("additional_info",m.target.value),rows:3}),t.additional_info&&e.jsx(f,{message:t.additional_info,className:"mt-1"})]}),e.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[e.jsx(j,{type:"button",variant:"outline",onClick:h,children:"Cancel"}),e.jsx(j,{onClick:x,disabled:p,children:p?"Creating...":"Add Supplier"})]})]})]})})}function ve({isOpen:o,onClose:h,supplier:t,products:s,errors:a={}}){const[i,p]=_.useState([{product_name:"",quantity:1,unit_price:0}]),{data:c,setData:x,post:m,processing:u,reset:N}=I({supplier_id:(t==null?void 0:t.id)||"",transaction_date:new Date().toISOString().split("T")[0],notes:"",items:[],payment_amount:0,payment_method:"cash",payment_notes:"",make_payment:!1});_.useEffect(()=>{o&&(N(),p([{product_name:"",quantity:1,unit_price:0}]),x({supplier_id:(t==null?void 0:t.id)||"",transaction_date:new Date().toISOString().split("T")[0],notes:"",items:[],payment_amount:0,payment_method:"cash",payment_notes:"",make_payment:!1}))},[o,t,N]),_.useEffect(()=>{x("items",i)},[i]);function v(){p([...i,{product_name:"",quantity:1,unit_price:0}])}function M(r){if(i.length>1){const l=i.filter((g,S)=>S!==r);p(l)}}function C(r,l,g){const S=[...i];S[r][l]=g,p(S)}function b(){return i.reduce((r,l)=>{const g=parseFloat(l.quantity)||0,S=parseFloat(l.unit_price)||0;return r+g*S},0)}function G(r){r.preventDefault(),t&&m(route("suppliers.create-credit-transaction",t.id),{onSuccess:()=>{N(),h()},onError:l=>{console.log("Validation errors:",l)},preserveScroll:!0,preserveState:!0,only:["suppliers","products","errors","flash"]})}return t?e.jsx(q,{open:o,onOpenChange:h,children:e.jsxs(H,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(E,{children:[e.jsxs(X,{children:["Add Credit Transaction for ",t.name]}),e.jsx($,{children:"Add a new credit transaction for this supplier. Fill in the transaction details and items purchased."})]}),e.jsxs("form",{onSubmit:G,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"transaction_date",children:"Transaction Date *"}),e.jsx(y,{id:"transaction_date",type:"date",value:c.transaction_date,onChange:r=>x("transaction_date",r.target.value)}),a.transaction_date&&e.jsx("div",{className:"text-sm text-red-500",children:a.transaction_date})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{children:"Total Amount"}),e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["GHC ",b().toFixed(2)]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(d,{className:"text-lg font-semibold",children:"Items Purchased"}),e.jsxs(j,{type:"button",onClick:v,variant:"outline",size:"sm",children:[e.jsx(L,{className:"h-4 w-4 mr-2"}),"Add Item"]})]}),i.map((r,l)=>e.jsxs("div",{className:"grid grid-cols-12 gap-3 p-4 border rounded-lg bg-gray-50",children:[e.jsxs("div",{className:"col-span-5",children:[e.jsx(d,{htmlFor:`product_${l}`,children:"Product Name *"}),e.jsx(y,{id:`product_${l}`,list:`products-list-${l}`,placeholder:"Type or select product name",value:r.product_name,onChange:g=>C(l,"product_name",g.target.value),required:!0}),e.jsx("datalist",{id:`products-list-${l}`,children:s.map(g=>e.jsx("option",{value:g.name},g.id))}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Type to search or select from ",s.length," products"]}),a[`items.${l}.product_name`]&&e.jsx("div",{className:"mt-1 text-xs text-red-500",children:a[`items.${l}.product_name`]})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx(d,{htmlFor:`quantity_${l}`,children:"Quantity *"}),e.jsx(y,{id:`quantity_${l}`,type:"number",min:"1",value:r.quantity,onChange:g=>C(l,"quantity",parseInt(g.target.value)),required:!0}),a[`items.${l}.quantity`]&&e.jsx("div",{className:"mt-1 text-xs text-red-500",children:a[`items.${l}.quantity`]})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx(d,{htmlFor:`unit_price_${l}`,children:"Unit Price *"}),e.jsx(y,{id:`unit_price_${l}`,type:"number",min:"1",step:"1",value:r.unit_price,onChange:g=>C(l,"unit_price",parseFloat(g.target.value)),required:!0}),a[`items.${l}.unit_price`]&&e.jsx("div",{className:"mt-1 text-xs text-red-500",children:a[`items.${l}.unit_price`]})]}),e.jsxs("div",{className:"col-span-8",children:[e.jsx(d,{children:"Total"}),e.jsxs("div",{className:"text-base font-semibold text-gray-700",children:["GHC ",((r.quantity||0)*(r.unit_price||0)).toFixed(2)]})]}),e.jsx("div",{className:"col-span-1 flex items-end",children:i.length>1&&e.jsx(j,{type:"button",onClick:()=>M(l),variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700",children:e.jsx(W,{className:"h-4 w-4"})})})]},l)),a.items&&e.jsx("div",{className:"mt-1 text-xs text-red-500",children:a.items})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"notes",children:"Notes"}),e.jsx(w,{id:"notes",placeholder:"Additional notes about this transaction",value:c.notes,onChange:r=>x("notes",r.target.value),rows:3}),a.notes&&e.jsx("div",{className:"text-sm text-red-500",children:a.notes})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"make_payment",checked:c.make_payment,onChange:r=>x("make_payment",r.target.checked),className:"rounded border-gray-300"}),e.jsx(d,{htmlFor:"make_payment",className:"text-lg font-semibold text-green-700",children:"Make Payment for This Transaction"})]}),c.make_payment&&e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg space-y-4",children:[e.jsx("h4",{className:"font-semibold text-green-800",children:"Payment Details"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"payment_amount",children:"Payment Amount *"}),e.jsx(y,{id:"payment_amount",type:"number",min:"0",max:b(),step:"0.01",value:c.payment_amount,onChange:r=>x("payment_amount",parseFloat(r.target.value)||0),placeholder:"Enter payment amount",required:!0}),e.jsxs("div",{className:"text-xs text-gray-600",children:["Maximum: GHC ",b().toFixed(2)]}),a.payment_amount&&e.jsx("div",{className:"text-sm text-red-500",children:a.payment_amount})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"payment_method",children:"Payment Method"}),e.jsxs("select",{id:"payment_method",value:c.payment_method,onChange:r=>x("payment_method",r.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"cash",children:"Cash"}),e.jsx("option",{value:"bank_transfer",children:"Bank Transfer"}),e.jsx("option",{value:"check",children:"Check"}),e.jsx("option",{value:"mobile_money",children:"Mobile Money"}),e.jsx("option",{value:"other",children:"Other"})]}),a.payment_method&&e.jsx("div",{className:"text-sm text-red-500",children:a.payment_method})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"payment_notes",children:"Payment Notes"}),e.jsx(w,{id:"payment_notes",placeholder:"Notes about this payment (optional)",value:c.payment_notes,onChange:r=>x("payment_notes",r.target.value),rows:2}),a.payment_notes&&e.jsx("div",{className:"text-sm text-red-500",children:a.payment_notes})]}),e.jsxs("div",{className:"bg-white p-3 rounded border",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Transaction Amount:"}),e.jsxs("span",{className:"font-semibold",children:["GHC ",b().toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Payment Amount:"}),e.jsxs("span",{className:"font-semibold text-green-600",children:["GHC ",c.payment_amount||0]})]}),e.jsxs("div",{className:"flex justify-between text-sm border-t pt-1",children:[e.jsx("span",{children:"Remaining Balance:"}),e.jsxs("span",{className:"font-semibold text-red-600",children:["GHC ",Math.max(0,b()-(c.payment_amount||0)).toFixed(2)]})]})]})]})]}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-lg font-semibold text-blue-800",children:"Transaction Summary"}),e.jsxs("span",{className:"text-2xl font-bold text-blue-900",children:["Total: GHC ",b().toFixed(2)]})]}),e.jsx("div",{className:"text-sm text-blue-600 mt-2",children:c.make_payment&&c.payment_amount>0?e.jsxs(e.Fragment,{children:["Transaction amount: GHC ",b().toFixed(2)," | Payment: GHC ",c.payment_amount," | Remaining: GHC ",Math.max(0,b()-c.payment_amount).toFixed(2)]}):`This transaction will be added to ${t.name}'s outstanding balance. Payments can be made separately to reduce the overall debt.`})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx(j,{type:"button",variant:"outline",onClick:h,children:"Cancel"}),e.jsx(j,{type:"submit",disabled:u,children:u?"Creating...":"Create Transaction"})]})]})]})}):null}function fe({isOpen:o,onClose:h,supplier:t,errors:s={}}){const{data:a,setData:i,put:p,processing:c,reset:x}=I({name:"",contact_person:"",phone:"",email:"",address:"",additional_info:""});_.useEffect(()=>{t&&i({name:t.name||"",contact_person:t.contact_person||"",phone:t.phone||"",email:t.email||"",address:t.address||"",additional_info:t.additional_info||""})},[t]);function m(){t&&p(route("suppliers.update",t.id),{onSuccess:()=>{x(),h()},preserveScroll:!0,preserveState:!0,only:["suppliers","errors","flash"]})}return t?e.jsx(q,{open:o,onOpenChange:h,children:e.jsxs(H,{className:"max-h-[90vh] max-w-2xl overflow-y-auto",children:[e.jsxs(E,{children:[e.jsx(X,{children:"Edit Supplier"}),e.jsx($,{children:"Update the supplier information. All fields marked with * are required."})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"edit-name",children:"Supplier Name *"}),e.jsx(y,{id:"edit-name",placeholder:"Enter supplier name",value:a.name,onChange:u=>i("name",u.target.value),required:!0}),s.name&&e.jsx(f,{message:s.name,className:"mt-1"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"edit-contact_person",children:"Contact Person"}),e.jsx(y,{id:"edit-contact_person",placeholder:"Contact person name",value:a.contact_person,onChange:u=>i("contact_person",u.target.value)}),s.contact_person&&e.jsx(f,{message:s.contact_person,className:"mt-1"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"edit-phone",children:"Phone Number"}),e.jsx(y,{id:"edit-phone",placeholder:"+233 XX XXX XXXX",value:a.phone,onChange:u=>i("phone",u.target.value),type:"tel"}),s.phone&&e.jsx(f,{message:s.phone,className:"mt-1"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"edit-email",children:"Email Address"}),e.jsx(y,{id:"edit-email",placeholder:"supplier@example.com",value:a.email,onChange:u=>i("email",u.target.value),type:"email"}),s.email&&e.jsx(f,{message:s.email,className:"mt-1"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"edit-address",children:"Address"}),e.jsx(w,{id:"edit-address",placeholder:"Business address",value:a.address,onChange:u=>i("address",u.target.value),rows:2}),s.address&&e.jsx(f,{message:s.address,className:"mt-1"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"edit-additional_info",children:"Additional Information"}),e.jsx(w,{id:"edit-additional_info",placeholder:"Any additional notes or information",value:a.additional_info,onChange:u=>i("additional_info",u.target.value),rows:3}),s.additional_info&&e.jsx(f,{message:s.additional_info,className:"mt-1"})]}),e.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[e.jsx(j,{type:"button",variant:"outline",onClick:h,children:"Cancel"}),e.jsx(j,{onClick:m,disabled:c,children:c?"Updating...":"Update Supplier"})]})]})]})}):null}function Ne({supplier:o}){const h=parseFloat(o.total_owed||0)||0,t=parseFloat(o.total_paid||0)||0,s=parseFloat(o.total_outstanding||0)||0,a=o.transactions_count||0,i=()=>s>0?"text-red-600":s<0?"text-green-600":"text-gray-600",p=()=>s>0?e.jsx(se,{className:"h-3 w-3"}):s<0?e.jsx(de,{className:"h-3 w-3"}):e.jsx(ge,{className:"h-3 w-3"}),c=x=>`GHC ${(parseFloat(x)||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`;return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:`flex items-center gap-1 font-medium ${i()}`,children:[p(),e.jsxs("span",{className:"text-sm",children:[s>0&&"Outstanding: ",s<0&&"Credit: ",s===0&&"Settled: ",c(s)]})]}),a>0&&e.jsxs("div",{className:"space-y-1 text-xs text-gray-500",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Total Owed:"}),e.jsx("span",{children:c(h)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Total Paid:"}),e.jsx("span",{children:c(t)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Transactions:"}),e.jsx("span",{children:a})]}),o.last_transaction_date&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Last Activity:"}),e.jsx("span",{children:o.last_transaction_date})]})]}),e.jsxs("div",{className:"flex gap-1",children:[s>0&&e.jsx(T,{className:"text-xs bg-red-600 text-white hover:bg-red-700",children:"Outstanding"}),s<0&&e.jsx(T,{variant:"secondary",className:"text-xs",children:"Overpaid"}),s===0&&a>0&&e.jsx(T,{variant:"outline",className:"text-xs",children:"Settled"}),a===0&&e.jsx(T,{variant:"outline",className:"text-xs",children:"No Transactions"})]})]})}function _e({isOpen:o,onClose:h,supplier:t,errors:s={}}){const{data:a,setData:i,post:p,processing:c,reset:x,clearErrors:m}=I({payment_amount:"",payment_date:new Date().toISOString().split("T")[0],payment_method:"",notes:""});_.useEffect(()=>{o&&(x(),m(),i({payment_amount:"",payment_date:new Date().toISOString().split("T")[0],payment_method:"",notes:""}))},[o,x,m]);function u(v){v.preventDefault(),p(route("suppliers.make-payment",t.id),{onSuccess:()=>{x(),h()},preserveScroll:!0,preserveState:!0,only:["suppliers","errors","flash"]})}if(!t)return null;const N=t.total_outstanding||0;return e.jsx(q,{open:o,onOpenChange:h,children:e.jsxs(H,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(E,{children:[e.jsxs(X,{children:["Make Payment to ",t.name]}),e.jsx($,{children:"Record a payment made to this supplier to reduce their outstanding debt."})]}),e.jsxs("form",{onSubmit:u,className:"space-y-6",children:[e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-lg font-semibold text-yellow-800",children:"Current Outstanding Balance"}),e.jsxs("span",{className:"text-2xl font-bold text-yellow-900",children:["GHC ",N.toFixed(2)]})]}),e.jsxs("div",{className:"text-sm text-yellow-600 mt-2",children:["This payment will reduce the overall outstanding debt for ",t.name]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"payment_amount",children:"Payment Amount *"}),e.jsx(y,{id:"payment_amount",type:"number",min:"0.01",max:N,step:"0.01",placeholder:"Enter payment amount",value:a.payment_amount,onChange:v=>i("payment_amount",parseFloat(v.target.value)),required:!0}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Maximum payment: GHC ",N.toFixed(2)]}),s.payment_amount&&e.jsx("div",{className:"text-sm text-red-500",children:s.payment_amount})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"payment_date",children:"Payment Date *"}),e.jsx(y,{id:"payment_date",type:"date",value:a.payment_date,onChange:v=>i("payment_date",v.target.value),required:!0}),s.payment_date&&e.jsx("div",{className:"text-sm text-red-500",children:s.payment_date})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"payment_method",children:"Payment Method"}),e.jsxs(ce,{value:a.payment_method,onValueChange:v=>i("payment_method",v),children:[e.jsx(re,{children:e.jsx(oe,{placeholder:"Select payment method"})}),e.jsxs(me,{children:[e.jsx(D,{value:"cash",children:"Cash"}),e.jsx(D,{value:"bank_transfer",children:"Bank Transfer"}),e.jsx(D,{value:"mobile_money",children:"Mobile Money"}),e.jsx(D,{value:"check",children:"Check"}),e.jsx(D,{value:"other",children:"Other"})]})]}),s.payment_method&&e.jsx("div",{className:"text-sm text-red-500",children:s.payment_method})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"notes",children:"Notes"}),e.jsx(w,{id:"notes",placeholder:"Optional notes about this payment",value:a.notes,onChange:v=>i("notes",v.target.value),rows:3}),s.notes&&e.jsx("div",{className:"text-sm text-red-500",children:s.notes})]}),e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-lg font-semibold text-green-800",children:"Payment Summary"}),e.jsxs("span",{className:"text-2xl font-bold text-green-900",children:["GHC ",a.payment_amount||0]})]}),e.jsxs("div",{className:"text-sm text-green-600 mt-2",children:["After this payment, the new outstanding balance will be:",e.jsxs("span",{className:"font-semibold ml-1",children:["GHC ",Math.max(0,N-(a.payment_amount||0)).toFixed(2)]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx(j,{type:"button",variant:"outline",onClick:h,children:"Cancel"}),e.jsx(j,{type:"submit",disabled:c||!a.payment_amount||a.payment_amount<=0||a.payment_amount>N,children:c?"Processing...":"Record Payment"})]})]})]})})}function Le({suppliers:o=[],products:h=[],errors:t={}}){const[s,a]=_.useState(!1),[i,p]=_.useState(!1),[c,x]=_.useState(!1),[m,u]=_.useState(!1),[N,v]=_.useState(null),[M,C]=_.useState(null),b=[{title:"Suppliers",href:"/suppliers"}];function G(n){v(n),p(!0)}function r(n){confirm("Are you sure you want to delete this supplier?")&&B.delete(route("suppliers.destroy",n),{preserveScroll:!0,preserveState:!0,only:["suppliers","flash","errors"]})}function l(n){C(n),x(!0)}function g(n){C(n),u(!0)}function S(n){B.get(route("suppliers.transactions",n.id))}function Q(n){B.patch(route("suppliers.toggle-status",n.id),{},{preserveScroll:!0,preserveState:!0,only:["suppliers","flash"]})}const O={totalSuppliers:o.length,activeSuppliers:o.filter(n=>n.is_active).length,totalOutstanding:o.reduce((n,R)=>{const J=parseFloat(R.total_outstanding||0)||0;return n+J},0),suppliersWithDebt:o.filter(n=>(parseFloat(n.total_outstanding||0)||0)>0).length};return e.jsx(ne,{breadcrumbs:b,children:e.jsxs("div",{className:"min-h-screen space-y-6 bg-gray-100 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Supplier Management"}),e.jsxs(j,{onClick:()=>a(!0),children:[e.jsx(L,{className:"mr-2 h-4 w-4"}),"Add Supplier"]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-4",children:[e.jsx(k,{children:e.jsx(A,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(z,{className:"h-5 w-5 text-blue-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Suppliers"}),e.jsx("p",{className:"text-2xl font-bold",children:O.totalSuppliers})]})]})})}),e.jsx(k,{children:e.jsx(A,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(z,{className:"h-5 w-5 text-green-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Active Suppliers"}),e.jsx("p",{className:"text-2xl font-bold",children:O.activeSuppliers})]})]})})}),e.jsx(k,{children:e.jsx(A,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(V,{className:"h-5 w-5 text-red-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Outstanding"}),e.jsxs("p",{className:"text-2xl font-bold",children:["GHC ",O.totalOutstanding.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]})})}),e.jsx(k,{children:e.jsx(A,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"h-5 w-5 text-orange-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"With Outstanding Debt"}),e.jsx("p",{className:"text-2xl font-bold",children:O.suppliersWithDebt})]})]})})})]}),e.jsxs(k,{children:[e.jsx(Y,{children:e.jsxs(Z,{className:"flex items-center gap-2",children:[e.jsx(z,{className:"h-5 w-5"}),"Supplier Directory"]})}),e.jsx(A,{children:e.jsxs(ee,{children:[e.jsx(te,{children:e.jsxs(U,{children:[e.jsx(P,{children:"Supplier Details"}),e.jsx(P,{children:"Contact Info"}),e.jsx(P,{children:"Financial Status"}),e.jsx(P,{children:"Status"}),e.jsx(P,{children:"Actions"})]})}),e.jsxs(ae,{children:[o.map(n=>e.jsxs(U,{children:[e.jsx(F,{children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:n.name}),n.contact_person&&e.jsx("p",{className:"text-sm text-gray-500",children:n.contact_person})]})}),e.jsx(F,{children:e.jsxs("div",{className:"space-y-1",children:[n.phone&&e.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[e.jsx(xe,{className:"h-3 w-3"}),n.phone]}),n.email&&e.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[e.jsx(he,{className:"h-3 w-3"}),n.email]}),n.address&&e.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[e.jsx(ie,{className:"h-3 w-3"}),e.jsx("span",{className:"max-w-32 truncate",children:n.address})]})]})}),e.jsx(F,{children:e.jsx(Ne,{supplier:n})}),e.jsx(F,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(T,{variant:n.is_active?"default":"secondary",className:"cursor-pointer",onClick:()=>Q(n),children:n.is_active?"Active":"Inactive"}),n.has_outstanding_debt&&e.jsx(T,{className:"text-xs bg-red-600 text-white hover:bg-red-700",children:"Debt"})]})}),e.jsx(F,{children:e.jsxs("div",{className:"flex flex-wrap gap-1",children:[e.jsx(j,{variant:"outline",size:"sm",onClick:()=>G(n),children:e.jsx(ue,{className:"h-3 w-3"})}),e.jsx(j,{variant:"outline",size:"sm",onClick:()=>S(n),title:"View Transactions",children:e.jsx(pe,{className:"h-3 w-3"})}),e.jsx(j,{variant:"outline",size:"sm",onClick:()=>l(n),title:"Add Transaction",className:"text-blue-600",children:e.jsx(L,{className:"h-3 w-3"})}),e.jsx(j,{variant:"outline",size:"sm",onClick:()=>g(n),title:n.has_outstanding_debt?`Make Payment (Outstanding: GHC ${n.total_outstanding})`:"Make Payment",className:n.has_outstanding_debt?"text-green-600":"text-gray-400",disabled:!n.has_outstanding_debt,children:e.jsx(V,{className:"h-3 w-3"})}),e.jsx(j,{variant:"outline",size:"sm",onClick:()=>r(n.id),className:"text-red-600",disabled:n.has_outstanding_debt,title:n.has_outstanding_debt?"Cannot delete supplier with outstanding debt":"Delete supplier",children:e.jsx(W,{className:"h-3 w-3"})})]})})]},n.id)),o.length===0&&e.jsx(U,{children:e.jsx(F,{colSpan:5,className:"text-muted-foreground py-8 text-center",children:"No suppliers found. Add your first supplier to get started."})})]})]})})]}),e.jsx(ye,{isOpen:s,onClose:()=>a(!1),errors:t}),e.jsx(fe,{isOpen:i,onClose:()=>p(!1),supplier:N,errors:t}),e.jsx(ve,{isOpen:c,onClose:()=>{x(!1),C(null)},supplier:M,products:h,errors:t}),e.jsx(_e,{isOpen:m,onClose:()=>{u(!1),C(null)},supplier:M,errors:t})]})})}export{Le as default};
