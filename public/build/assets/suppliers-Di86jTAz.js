import{u as X,j as e,r as f,a as V}from"./app-CJAfpu_B.js";import{C as le}from"./ConfirmArchiveModal-D6yrxql8.js";import{B as A}from"./badge-CV-W2Fb_.js";import{c as ie,F as y}from"./createLucideIcon-Cg7ANiR-.js";import{C as I,c as O,a as re,b as de}from"./card-CqjrLppC.js";import{T as ce,a as oe,b as Q,c as $,d as me,e as k}from"./table-GVnBoJML.js";import{T as xe,A as he,U as W,e as pe,M as ue}from"./app-layout-BYjCDRLU.js";import{I as N}from"./InputError-DMNrc3h0.js";import{D as B,b as L,c as q,d as U,e as z}from"./dialog-CAA-wllh.js";import{I as j}from"./input-Dk-R2vtg.js";import{L as r}from"./label-Bg7Q41yp.js";import{T as D}from"./textarea-B8GjicWn.js";import{P as J}from"./plus-BdnMlgTQ.js";import{T as Y}from"./trash-2-DWws5xuW.js";import{T as je}from"./trending-down-CC7DSRVB.js";import{S as ge,a as ye,b as fe,c as ve,d as H}from"./select-Bk5mqKH1.js";import{D as K}from"./dollar-sign-N4yXL_bF.js";import{P as _e,M as Ne}from"./phone-D_Yihe_F.js";import{S as be}from"./square-pen-BFRhAgDe.js";import{H as Ce}from"./history-Bbfn3-5z.js";import"./triangle-alert-Ds5pzo1R.js";import"./index-Ca9tWU42.js";import"./index-Dqg2lGr_.js";import"./index-CzC18CvF.js";import"./index-DLss49vn.js";import"./index-BWkE5G2Y.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=[["path",{d:"M5 12h14",key:"1ays0h"}]],we=ie("Minus",Se);function Fe({isOpen:m,onClose:p,errors:a={}}){const{data:l,setData:t,post:d,processing:g,reset:c}=X({name:"",contact_person:"",phone:"",email:"",address:"",additional_info:""});function h(x){x.preventDefault(),d(route("suppliers.store"),{onSuccess:()=>{c(),p()},preserveScroll:!0,preserveState:!0,only:["suppliers","errors","flash"]})}return e.jsx(B,{open:m,onOpenChange:p,children:e.jsxs(L,{className:"max-h-[90vh] max-w-2xl overflow-y-auto",children:[e.jsxs(q,{children:[e.jsx(U,{children:"Add New Supplier"}),e.jsx(z,{children:"Enter the details for the new supplier. All fields marked with * are required."})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"name",children:"Supplier Name *"}),e.jsx(j,{id:"name",placeholder:"Enter supplier name",value:l.name,onChange:x=>t("name",x.target.value),required:!0}),a.name&&e.jsx(N,{message:a.name,className:"mt-1"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"contact_person",children:"Contact Person"}),e.jsx(j,{id:"contact_person",placeholder:"Contact person name",value:l.contact_person,onChange:x=>t("contact_person",x.target.value),required:!0}),a.contact_person&&e.jsx(N,{message:a.contact_person,className:"mt-1"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"phone",children:"Phone Number"}),e.jsx(j,{id:"phone",placeholder:"+233 XX XXX XXXX",value:l.phone,onChange:x=>t("phone",x.target.value),type:"tel"}),a.phone&&e.jsx(N,{message:a.phone,className:"mt-1"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"email",children:"Email Address"}),e.jsx(j,{id:"email",placeholder:"supplier@example.com",value:l.email,onChange:x=>t("email",x.target.value),type:"email"}),a.email&&e.jsx(N,{message:a.email,className:"mt-1"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"address",children:"Address"}),e.jsx(D,{id:"address",placeholder:"Business address",value:l.address,onChange:x=>t("address",x.target.value),rows:2}),a.address&&e.jsx(N,{message:a.address,className:"mt-1"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"additional_info",children:"Additional Information"}),e.jsx(D,{id:"additional_info",placeholder:"Any additional notes or information",value:l.additional_info,onChange:x=>t("additional_info",x.target.value),rows:3}),a.additional_info&&e.jsx(N,{message:a.additional_info,className:"mt-1"})]}),e.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[e.jsx(y,{type:"button",variant:"outline",onClick:p,children:"Cancel"}),e.jsx(y,{onClick:h,disabled:g,children:g?"Creating...":"Add Supplier"})]})]})]})})}function Te({isOpen:m,onClose:p,supplier:a,products:l,errors:t={}}){const[d,g]=f.useState([{product_id:null,product_name:"",cartons:0,lines:0,lines_per_carton:1,unit_price:0}]),{data:c,setData:h,post:x,processing:u,reset:b}=X({supplier_id:(a==null?void 0:a.id)||"",transaction_date:new Date().toISOString().split("T")[0],notes:"",items:[],payment_amount:0,payment_method:"cash",payment_notes:"",make_payment:!1});f.useEffect(()=>{m&&(b(),g([{product_id:null,product_name:"",cartons:0,lines:0,lines_per_carton:1,unit_price:0}]),h({supplier_id:(a==null?void 0:a.id)||"",transaction_date:new Date().toISOString().split("T")[0],notes:"",items:[],payment_amount:0,payment_method:"cash",payment_notes:"",make_payment:!1}))},[m,a,b]),f.useEffect(()=>{h("items",d)},[d]);function v(){g([...d,{product_id:null,product_name:"",cartons:0,lines:0,lines_per_carton:1,unit_price:0}])}function E(i){if(d.length>1){const n=d.filter((o,_)=>_!==i);g(n)}}function C(i,n,o){const _=[...d];if(_[i][n]=o,n==="product_name"){const T=l.find(P=>P.name===o);T?(_[i].product_id=T.id,_[i].lines_per_carton=T.lines_per_carton||1):_[i].product_id=null}g(_)}function S(){return d.reduce((i,n)=>{const o=parseInt(n.cartons)||0,_=parseInt(n.lines)||0,T=parseInt(n.lines_per_carton)||1,P=o*T+_,R=parseFloat(n.unit_price)||0;return i+P*R},0)}function M(i){const n=parseInt(i.cartons)||0,o=parseInt(i.lines)||0;return(parseInt(i.lines_per_carton)||1)<=1?n+o:n>0&&o>0?`${n}C${o}L`:n>0?`${n}C`:o>0?`${o}L`:"0"}function w(i){i.preventDefault(),a&&x(route("suppliers.create-credit-transaction",a.id),{onSuccess:()=>{b(),p()},onError:n=>{console.log("Validation errors:",n)},preserveScroll:!0,preserveState:!0,only:["suppliers","products","errors","flash"]})}return a?e.jsx(B,{open:m,onOpenChange:p,children:e.jsxs(L,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(q,{children:[e.jsxs(U,{children:["Add Credit Transaction for ",a.name]}),e.jsx(z,{children:"Add a new credit transaction for this supplier. Fill in the transaction details and items purchased."})]}),e.jsxs("form",{onSubmit:w,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"transaction_date",children:"Transaction Date *"}),e.jsx(j,{id:"transaction_date",type:"date",value:c.transaction_date,onChange:i=>h("transaction_date",i.target.value)}),t.transaction_date&&e.jsx("div",{className:"text-sm text-red-500",children:t.transaction_date})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"Total Amount"}),e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["GHC ",S().toFixed(2)]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(r,{className:"text-lg font-semibold",children:"Items Purchased"}),e.jsxs(y,{type:"button",onClick:v,variant:"outline",size:"sm",children:[e.jsx(J,{className:"h-4 w-4 mr-2"}),"Add Item"]})]}),d.map((i,n)=>e.jsxs("div",{className:"grid grid-cols-12 gap-3 p-4 border rounded-lg bg-gray-50",children:[e.jsxs("div",{className:"col-span-12",children:[e.jsx(r,{htmlFor:`product_${n}`,children:"Product Name *"}),e.jsx(j,{id:`product_${n}`,list:`products-list-${n}`,placeholder:"Type or select product name",value:i.product_name,onChange:o=>C(n,"product_name",o.target.value),required:!0}),e.jsx("datalist",{id:`products-list-${n}`,children:l.map(o=>e.jsx("option",{value:o.name},o.id))}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Type to search or select from ",l.length," products"]}),t[`items.${n}.product_name`]&&e.jsx("div",{className:"mt-1 text-xs text-red-500",children:t[`items.${n}.product_name`]})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx(r,{htmlFor:`cartons_${n}`,children:"Cartons"}),e.jsx(j,{id:`cartons_${n}`,type:"number",min:"0",value:i.cartons,onChange:o=>C(n,"cartons",parseInt(o.target.value)||0)}),t[`items.${n}.cartons`]&&e.jsx("div",{className:"mt-1 text-xs text-red-500",children:t[`items.${n}.cartons`]})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx(r,{htmlFor:`lines_${n}`,children:"Lines"}),e.jsx(j,{id:`lines_${n}`,type:"number",min:"0",value:i.lines,onChange:o=>C(n,"lines",parseInt(o.target.value)||0)}),t[`items.${n}.lines`]&&e.jsx("div",{className:"mt-1 text-xs text-red-500",children:t[`items.${n}.lines`]})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx(r,{htmlFor:`lines_per_carton_${n}`,children:"Lines/Carton"}),e.jsx(j,{id:`lines_per_carton_${n}`,type:"number",min:"1",value:i.lines_per_carton,onChange:o=>C(n,"lines_per_carton",parseInt(o.target.value)||1),disabled:i.product_id!==null,className:i.product_id!==null?"bg-gray-100":""}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:i.product_id!==null?"Auto-filled from product":"Manual entry"})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx(r,{htmlFor:`unit_price_${n}`,children:"Unit Price *"}),e.jsx(j,{id:`unit_price_${n}`,type:"number",min:"0",step:"0.01",value:i.unit_price,onChange:o=>C(n,"unit_price",parseFloat(o.target.value)||0),required:!0}),t[`items.${n}.unit_price`]&&e.jsx("div",{className:"mt-1 text-xs text-red-500",children:t[`items.${n}.unit_price`]})]}),e.jsxs("div",{className:"col-span-11",children:[e.jsx(r,{children:"Quantity & Total"}),e.jsxs("div",{className:"text-base font-semibold text-gray-700",children:[M(i)," Ã— GHC ",(i.unit_price||0).toFixed(2)," = GHC ",(((parseInt(i.cartons)||0)*(parseInt(i.lines_per_carton)||1)+(parseInt(i.lines)||0))*(parseFloat(i.unit_price)||0)).toFixed(2)]})]}),e.jsx("div",{className:"col-span-1 flex items-end",children:d.length>1&&e.jsx(y,{type:"button",onClick:()=>E(n),variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700",children:e.jsx(Y,{className:"h-4 w-4"})})})]},n)),t.items&&e.jsx("div",{className:"mt-1 text-xs text-red-500",children:t.items})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"notes",children:"Notes"}),e.jsx(D,{id:"notes",placeholder:"Additional notes about this transaction",value:c.notes,onChange:i=>h("notes",i.target.value),rows:3}),t.notes&&e.jsx("div",{className:"text-sm text-red-500",children:t.notes})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"make_payment",checked:c.make_payment,onChange:i=>h("make_payment",i.target.checked),className:"rounded border-gray-300"}),e.jsx(r,{htmlFor:"make_payment",className:"text-lg font-semibold text-green-700",children:"Make Payment for This Transaction"})]}),c.make_payment&&e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg space-y-4",children:[e.jsx("h4",{className:"font-semibold text-green-800",children:"Payment Details"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"payment_amount",children:"Payment Amount *"}),e.jsx(j,{id:"payment_amount",type:"number",min:"0",max:S(),step:"0.01",value:c.payment_amount,onChange:i=>h("payment_amount",parseFloat(i.target.value)||0),placeholder:"Enter payment amount",required:!0}),e.jsxs("div",{className:"text-xs text-gray-600",children:["Maximum: GHC ",S().toFixed(2)]}),t.payment_amount&&e.jsx("div",{className:"text-sm text-red-500",children:t.payment_amount})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"payment_method",children:"Payment Method"}),e.jsxs("select",{id:"payment_method",value:c.payment_method,onChange:i=>h("payment_method",i.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"cash",children:"Cash"}),e.jsx("option",{value:"bank_transfer",children:"Bank Transfer"}),e.jsx("option",{value:"check",children:"Check"}),e.jsx("option",{value:"mobile_money",children:"Mobile Money"}),e.jsx("option",{value:"other",children:"Other"})]}),t.payment_method&&e.jsx("div",{className:"text-sm text-red-500",children:t.payment_method})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"payment_notes",children:"Payment Notes"}),e.jsx(D,{id:"payment_notes",placeholder:"Notes about this payment (optional)",value:c.payment_notes,onChange:i=>h("payment_notes",i.target.value),rows:2}),t.payment_notes&&e.jsx("div",{className:"text-sm text-red-500",children:t.payment_notes})]}),e.jsxs("div",{className:"bg-white p-3 rounded border",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Transaction Amount:"}),e.jsxs("span",{className:"font-semibold",children:["GHC ",S().toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Payment Amount:"}),e.jsxs("span",{className:"font-semibold text-green-600",children:["GHC ",c.payment_amount||0]})]}),e.jsxs("div",{className:"flex justify-between text-sm border-t pt-1",children:[e.jsx("span",{children:"Remaining Balance:"}),e.jsxs("span",{className:"font-semibold text-red-600",children:["GHC ",Math.max(0,S()-(c.payment_amount||0)).toFixed(2)]})]})]})]})]}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-lg font-semibold text-blue-800",children:"Transaction Summary"}),e.jsxs("span",{className:"text-2xl font-bold text-blue-900",children:["Total: GHC ",S().toFixed(2)]})]}),e.jsx("div",{className:"text-sm text-blue-600 mt-2",children:c.make_payment&&c.payment_amount>0?e.jsxs(e.Fragment,{children:["Transaction amount: GHC ",S().toFixed(2)," | Payment: GHC ",c.payment_amount," | Remaining: GHC ",Math.max(0,S()-c.payment_amount).toFixed(2)]}):`This transaction will be added to ${a.name}'s outstanding balance. Payments can be made separately to reduce the overall debt.`})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx(y,{type:"button",variant:"outline",onClick:p,children:"Cancel"}),e.jsx(y,{type:"submit",disabled:u,children:u?"Creating...":"Create Transaction"})]})]})]})}):null}function De({isOpen:m,onClose:p,supplier:a,errors:l={}}){const{data:t,setData:d,put:g,processing:c,reset:h}=X({name:"",contact_person:"",phone:"",email:"",address:"",additional_info:""});f.useEffect(()=>{a&&d({name:a.name||"",contact_person:a.contact_person||"",phone:a.phone||"",email:a.email||"",address:a.address||"",additional_info:a.additional_info||""})},[a]);function x(){a&&g(route("suppliers.update",a.id),{onSuccess:()=>{h(),p()},preserveScroll:!0,preserveState:!0,only:["suppliers","errors","flash"]})}return a?e.jsx(B,{open:m,onOpenChange:p,children:e.jsxs(L,{className:"max-h-[90vh] max-w-2xl overflow-y-auto",children:[e.jsxs(q,{children:[e.jsx(U,{children:"Edit Supplier"}),e.jsx(z,{children:"Update the supplier information. All fields marked with * are required."})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"edit-name",children:"Supplier Name *"}),e.jsx(j,{id:"edit-name",placeholder:"Enter supplier name",value:t.name,onChange:u=>d("name",u.target.value),required:!0}),l.name&&e.jsx(N,{message:l.name,className:"mt-1"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"edit-contact_person",children:"Contact Person"}),e.jsx(j,{id:"edit-contact_person",placeholder:"Contact person name",value:t.contact_person,onChange:u=>d("contact_person",u.target.value)}),l.contact_person&&e.jsx(N,{message:l.contact_person,className:"mt-1"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"edit-phone",children:"Phone Number"}),e.jsx(j,{id:"edit-phone",placeholder:"+233 XX XXX XXXX",value:t.phone,onChange:u=>d("phone",u.target.value),type:"tel"}),l.phone&&e.jsx(N,{message:l.phone,className:"mt-1"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"edit-email",children:"Email Address"}),e.jsx(j,{id:"edit-email",placeholder:"supplier@example.com",value:t.email,onChange:u=>d("email",u.target.value),type:"email"}),l.email&&e.jsx(N,{message:l.email,className:"mt-1"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"edit-address",children:"Address"}),e.jsx(D,{id:"edit-address",placeholder:"Business address",value:t.address,onChange:u=>d("address",u.target.value),rows:2}),l.address&&e.jsx(N,{message:l.address,className:"mt-1"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"edit-additional_info",children:"Additional Information"}),e.jsx(D,{id:"edit-additional_info",placeholder:"Any additional notes or information",value:t.additional_info,onChange:u=>d("additional_info",u.target.value),rows:3}),l.additional_info&&e.jsx(N,{message:l.additional_info,className:"mt-1"})]}),e.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[e.jsx(y,{type:"button",variant:"outline",onClick:p,children:"Cancel"}),e.jsx(y,{onClick:x,disabled:c,children:c?"Updating...":"Update Supplier"})]})]})]})}):null}function ke({supplier:m}){const p=parseFloat(m.total_owed||0)||0,a=parseFloat(m.total_paid||0)||0,l=parseFloat(m.total_outstanding||0)||0,t=m.transactions_count||0,d=()=>l>0?"text-red-600":l<0?"text-green-600":"text-gray-600",g=()=>l>0?e.jsx(xe,{className:"h-3 w-3"}):l<0?e.jsx(je,{className:"h-3 w-3"}):e.jsx(we,{className:"h-3 w-3"}),c=h=>`GHC ${(parseFloat(h)||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`;return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:`flex items-center gap-1 font-medium ${d()}`,children:[g(),e.jsxs("span",{className:"text-sm",children:[l>0&&"Outstanding: ",l<0&&"Credit: ",l===0&&"Settled: ",c(l)]})]}),t>0&&e.jsxs("div",{className:"space-y-1 text-xs text-gray-500",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Total Owed:"}),e.jsx("span",{children:c(p)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Total Paid:"}),e.jsx("span",{children:c(a)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Transactions:"}),e.jsx("span",{children:t})]}),m.last_transaction_date&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Last Activity:"}),e.jsx("span",{children:m.last_transaction_date})]})]}),e.jsxs("div",{className:"flex gap-1",children:[l>0&&e.jsx(A,{className:"text-xs bg-red-600 text-white hover:bg-red-700",children:"Outstanding"}),l<0&&e.jsx(A,{variant:"secondary",className:"text-xs",children:"Overpaid"}),l===0&&t>0&&e.jsx(A,{variant:"outline",className:"text-xs",children:"Settled"}),t===0&&e.jsx(A,{variant:"outline",className:"text-xs",children:"No Transactions"})]})]})}function Ae({isOpen:m,onClose:p,supplier:a,errors:l={}}){const{data:t,setData:d,post:g,processing:c,reset:h,clearErrors:x}=X({payment_amount:"",payment_date:new Date().toISOString().split("T")[0],payment_method:"",notes:""});f.useEffect(()=>{m&&(h(),x(),d({payment_amount:"",payment_date:new Date().toISOString().split("T")[0],payment_method:"",notes:""}))},[m,h,x]);function u(v){v.preventDefault(),g(route("suppliers.make-payment",a.id),{onSuccess:()=>{h(),p()},preserveScroll:!0,preserveState:!0,only:["suppliers","errors","flash"]})}if(!a)return null;const b=a.total_outstanding||0;return e.jsx(B,{open:m,onOpenChange:p,children:e.jsxs(L,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(q,{children:[e.jsxs(U,{children:["Make Payment to ",a.name]}),e.jsx(z,{children:"Record a payment made to this supplier to reduce their outstanding debt."})]}),e.jsxs("form",{onSubmit:u,className:"space-y-6",children:[e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-lg font-semibold text-yellow-800",children:"Current Outstanding Balance"}),e.jsxs("span",{className:"text-2xl font-bold text-yellow-900",children:["GHC ",b.toFixed(2)]})]}),e.jsxs("div",{className:"text-sm text-yellow-600 mt-2",children:["This payment will reduce the overall outstanding debt for ",a.name]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"payment_amount",children:"Payment Amount *"}),e.jsx(j,{id:"payment_amount",type:"number",min:"0.01",max:b,step:"0.01",placeholder:"Enter payment amount",value:t.payment_amount,onChange:v=>d("payment_amount",parseFloat(v.target.value)),required:!0}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Maximum payment: GHC ",b.toFixed(2)]}),l.payment_amount&&e.jsx("div",{className:"text-sm text-red-500",children:l.payment_amount})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"payment_date",children:"Payment Date *"}),e.jsx(j,{id:"payment_date",type:"date",value:t.payment_date,onChange:v=>d("payment_date",v.target.value),required:!0}),l.payment_date&&e.jsx("div",{className:"text-sm text-red-500",children:l.payment_date})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"payment_method",children:"Payment Method"}),e.jsxs(ge,{value:t.payment_method,onValueChange:v=>d("payment_method",v),children:[e.jsx(ye,{children:e.jsx(fe,{placeholder:"Select payment method"})}),e.jsxs(ve,{children:[e.jsx(H,{value:"cash",children:"Cash"}),e.jsx(H,{value:"bank_transfer",children:"Bank Transfer"}),e.jsx(H,{value:"mobile_money",children:"Mobile Money"}),e.jsx(H,{value:"check",children:"Check"}),e.jsx(H,{value:"other",children:"Other"})]})]}),l.payment_method&&e.jsx("div",{className:"text-sm text-red-500",children:l.payment_method})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"notes",children:"Notes"}),e.jsx(D,{id:"notes",placeholder:"Optional notes about this payment",value:t.notes,onChange:v=>d("notes",v.target.value),rows:3}),l.notes&&e.jsx("div",{className:"text-sm text-red-500",children:l.notes})]}),e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-lg font-semibold text-green-800",children:"Payment Summary"}),e.jsxs("span",{className:"text-2xl font-bold text-green-900",children:["GHC ",t.payment_amount||0]})]}),e.jsxs("div",{className:"text-sm text-green-600 mt-2",children:["After this payment, the new outstanding balance will be:",e.jsxs("span",{className:"font-semibold ml-1",children:["GHC ",Math.max(0,b-(t.payment_amount||0)).toFixed(2)]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx(y,{type:"button",variant:"outline",onClick:p,children:"Cancel"}),e.jsx(y,{type:"submit",disabled:c||!t.payment_amount||t.payment_amount<=0||t.payment_amount>b,children:c?"Processing...":"Record Payment"})]})]})]})})}function nt({suppliers:m=[],products:p=[],errors:a={}}){const[l,t]=f.useState(!1),[d,g]=f.useState(!1),[c,h]=f.useState(!1),[x,u]=f.useState(!1),[b,v]=f.useState(null),[E,C]=f.useState(null),[S,M]=f.useState(!1),[w,i]=f.useState(null),[n,o]=f.useState(!1),_=[{title:"Suppliers",href:"/suppliers"}];function T(s){v(s),g(!0)}function P(s){i(s),M(!0)}function R(){w&&(o(!0),V.delete(route("suppliers.destroy",w.id),{preserveScroll:!0,preserveState:!0,only:["suppliers","flash","errors"],onFinish:()=>{o(!1),M(!1),i(null)}}))}function Z(s){const F=[];return s.transactions_count>0&&F.push(`${s.transactions_count} transactions`),s.payments_count>0&&F.push(`${s.payments_count} payments`),s.debts_count>0&&F.push(`${s.debts_count} debts`),s.total_outstanding>0&&F.push(`GHC ${s.total_outstanding.toLocaleString()} outstanding`),F.length>0?F.join(", "):null}function ee(s){C(s),h(!0)}function te(s){C(s),u(!0)}function se(s){V.get(route("suppliers.transactions",s.id))}function ae(s){V.patch(route("suppliers.toggle-status",s.id),{},{preserveScroll:!0,preserveState:!0,only:["suppliers","flash"]})}const G={totalSuppliers:m.length,activeSuppliers:m.filter(s=>s.is_active).length,totalOutstanding:m.reduce((s,F)=>{const ne=parseFloat(F.total_outstanding||0)||0;return s+ne},0),suppliersWithDebt:m.filter(s=>(parseFloat(s.total_outstanding||0)||0)>0).length};return e.jsx(he,{breadcrumbs:_,children:e.jsxs("div",{className:"min-h-screen space-y-6 bg-gray-100 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Supplier Management"}),e.jsxs(y,{onClick:()=>t(!0),children:[e.jsx(J,{className:"mr-2 h-4 w-4"}),"Add Supplier"]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-4",children:[e.jsx(I,{children:e.jsx(O,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(W,{className:"h-5 w-5 text-blue-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Suppliers"}),e.jsx("p",{className:"text-2xl font-bold",children:G.totalSuppliers})]})]})})}),e.jsx(I,{children:e.jsx(O,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(W,{className:"h-5 w-5 text-green-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Active Suppliers"}),e.jsx("p",{className:"text-2xl font-bold",children:G.activeSuppliers})]})]})})}),e.jsx(I,{children:e.jsx(O,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(K,{className:"h-5 w-5 text-red-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Outstanding"}),e.jsxs("p",{className:"text-2xl font-bold",children:["GHC ",G.totalOutstanding.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]})})}),e.jsx(I,{children:e.jsx(O,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(pe,{className:"h-5 w-5 text-orange-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"With Outstanding Debt"}),e.jsx("p",{className:"text-2xl font-bold",children:G.suppliersWithDebt})]})]})})})]}),e.jsxs(I,{children:[e.jsx(re,{children:e.jsxs(de,{className:"flex items-center gap-2",children:[e.jsx(W,{className:"h-5 w-5"}),"Supplier Directory"]})}),e.jsx(O,{children:e.jsxs(ce,{children:[e.jsx(oe,{children:e.jsxs(Q,{children:[e.jsx($,{children:"Supplier Details"}),e.jsx($,{children:"Contact Info"}),e.jsx($,{children:"Financial Status"}),e.jsx($,{children:"Status"}),e.jsx($,{children:"Actions"})]})}),e.jsxs(me,{children:[m.map(s=>e.jsxs(Q,{children:[e.jsx(k,{children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.name}),s.contact_person&&e.jsx("p",{className:"text-sm text-gray-500",children:s.contact_person})]})}),e.jsx(k,{children:e.jsxs("div",{className:"space-y-1",children:[s.phone&&e.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[e.jsx(_e,{className:"h-3 w-3"}),s.phone]}),s.email&&e.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[e.jsx(Ne,{className:"h-3 w-3"}),s.email]}),s.address&&e.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[e.jsx(ue,{className:"h-3 w-3"}),e.jsx("span",{className:"max-w-32 truncate",children:s.address})]})]})}),e.jsx(k,{children:e.jsx(ke,{supplier:s})}),e.jsx(k,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(A,{variant:s.is_active?"default":"secondary",className:"cursor-pointer",onClick:()=>ae(s),children:s.is_active?"Active":"Inactive"}),s.has_outstanding_debt&&e.jsx(A,{className:"text-xs bg-red-600 text-white hover:bg-red-700",children:"Debt"})]})}),e.jsx(k,{children:e.jsxs("div",{className:"flex flex-wrap gap-1",children:[e.jsx(y,{variant:"outline",size:"sm",onClick:()=>T(s),children:e.jsx(be,{className:"h-3 w-3"})}),e.jsx(y,{variant:"outline",size:"sm",onClick:()=>se(s),title:"View Transactions",children:e.jsx(Ce,{className:"h-3 w-3"})}),e.jsx(y,{variant:"outline",size:"sm",onClick:()=>ee(s),title:"Add Transaction",className:"text-blue-600",children:e.jsx(J,{className:"h-3 w-3"})}),e.jsx(y,{variant:"outline",size:"sm",onClick:()=>te(s),title:s.has_outstanding_debt?`Make Payment (Outstanding: GHC ${s.total_outstanding})`:"Make Payment",className:s.has_outstanding_debt?"text-green-600":"text-gray-400",disabled:!s.has_outstanding_debt,children:e.jsx(K,{className:"h-3 w-3"})}),e.jsx(y,{variant:"outline",size:"sm",onClick:()=>P(s),className:"text-red-600",title:s.has_outstanding_debt?"Cannot delete supplier with outstanding debt":"Delete supplier",children:e.jsx(Y,{className:"h-3 w-3"})})]})})]},s.id)),m.length===0&&e.jsx(Q,{children:e.jsx(k,{colSpan:5,className:"text-muted-foreground py-8 text-center",children:"No suppliers found. Add your first supplier to get started."})})]})]})})]}),e.jsx(Fe,{isOpen:l,onClose:()=>t(!1),errors:a}),e.jsx(De,{isOpen:d,onClose:()=>g(!1),supplier:b,errors:a}),e.jsx(Te,{isOpen:c,onClose:()=>{h(!1),C(null)},supplier:E,products:p,errors:a}),e.jsx(Ae,{isOpen:x,onClose:()=>{u(!1),C(null)},supplier:E,errors:a}),e.jsx(le,{isOpen:S,onClose:()=>{M(!1),i(null)},onConfirm:R,title:"Delete Supplier",itemName:w==null?void 0:w.name,relatedDataMessage:w?Z(w):null,isProcessing:n})]})})}export{nt as default};
