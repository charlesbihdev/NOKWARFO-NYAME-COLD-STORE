import{j as e,r as _,U as B,u as re,L as ae,a as ie}from"./app-1Notxd3e.js";import{A as De,M as Se,T as le}from"./app-layout-DP6IZWd4.js";import{D as Te}from"./DateRangePicker-DxtaA00k.js";import{c as J,u as ne,a as Ae,b as M,d as ce,F as S}from"./createLucideIcon-B7W1q_uQ.js";import{C as O,a as U,b as L,c as G}from"./card-DfvEkdop.js";import{B as $e}from"./badge-C5cK0jYn.js";import{T as Pe,a as qe,b as Y,c as q,d as Ee,e as P}from"./table-B4nc4C0T.js";import{c as ke,a as Fe}from"./index-BxglnvVj.js";import{g as oe,R as Ie,P as Me,W as Re,C as Oe,T as Ue,h as Le,i as de,O as Ge,j as He,D as X,b as Z,c as ee,d as te}from"./dialog-Dx9yVP87.js";import{I as u}from"./index-Xk3s--Yf.js";import{L as o}from"./label-Brq_mziV.js";import{T as me}from"./textarea-640VWfOb.js";import{I as x}from"./InputError-CYqUW_vg.js";import{P as se}from"./plus-6p939pSQ.js";import{T as H}from"./trash-2-DYDRsOaj.js";import{D as K}from"./dollar-sign-QtGlXpc0.js";import{C as ze}from"./calendar-BhSDQqFj.js";import"./index-BIqwGjeY.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qe=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],xe=J("Calculator",Qe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],We=J("Eye",Be);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ve=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Ye=J("Pen",Ve);var ue="AlertDialog",[Ke,zt]=ke(ue,[oe]),k=oe(),pe=d=>{const{__scopeAlertDialog:n,...s}=d,a=k(n);return e.jsx(Ie,{...a,...s,modal:!0})};pe.displayName=ue;var Je="AlertDialogTrigger",Xe=_.forwardRef((d,n)=>{const{__scopeAlertDialog:s,...a}=d,m=k(s);return e.jsx(He,{...m,...a,ref:n})});Xe.displayName=Je;var Ze="AlertDialogPortal",he=d=>{const{__scopeAlertDialog:n,...s}=d,a=k(n);return e.jsx(Me,{...a,...s})};he.displayName=Ze;var et="AlertDialogOverlay",ge=_.forwardRef((d,n)=>{const{__scopeAlertDialog:s,...a}=d,m=k(s);return e.jsx(Ge,{...m,...a,ref:n})});ge.displayName=et;var Q="AlertDialogContent",[tt,st]=Ke(Q),at=Ae("AlertDialogContent"),je=_.forwardRef((d,n)=>{const{__scopeAlertDialog:s,children:a,...m}=d,f=k(s),h=_.useRef(null),C=ne(n,h),A=_.useRef(null);return e.jsx(Re,{contentName:Q,titleName:fe,docsSlug:"alert-dialog",children:e.jsx(tt,{scope:s,cancelRef:A,children:e.jsxs(Oe,{role:"alertdialog",...f,...m,ref:C,onOpenAutoFocus:Fe(m.onOpenAutoFocus,w=>{var g;w.preventDefault(),(g=A.current)==null||g.focus({preventScroll:!0})}),onPointerDownOutside:w=>w.preventDefault(),onInteractOutside:w=>w.preventDefault(),children:[e.jsx(at,{children:a}),e.jsx(lt,{contentRef:h})]})})})});je.displayName=Q;var fe="AlertDialogTitle",Ne=_.forwardRef((d,n)=>{const{__scopeAlertDialog:s,...a}=d,m=k(s);return e.jsx(Ue,{...m,...a,ref:n})});Ne.displayName=fe;var ve="AlertDialogDescription",_e=_.forwardRef((d,n)=>{const{__scopeAlertDialog:s,...a}=d,m=k(s);return e.jsx(Le,{...m,...a,ref:n})});_e.displayName=ve;var it="AlertDialogAction",ye=_.forwardRef((d,n)=>{const{__scopeAlertDialog:s,...a}=d,m=k(s);return e.jsx(de,{...m,...a,ref:n})});ye.displayName=it;var be="AlertDialogCancel",Ce=_.forwardRef((d,n)=>{const{__scopeAlertDialog:s,...a}=d,{cancelRef:m}=st(be,s),f=k(s),h=ne(n,m);return e.jsx(de,{...f,...a,ref:h})});Ce.displayName=be;var lt=({contentRef:d})=>{const n=`\`${Q}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Q}\` by passing a \`${ve}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Q}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return _.useEffect(()=>{var a;document.getElementById((a=d.current)==null?void 0:a.getAttribute("aria-describedby"))||console.warn(n)},[n,d]),null},rt=pe,nt=he,ct=ge,ot=je,dt=ye,mt=Ce,xt=Ne,ut=_e;const pt=rt,ht=nt,gt=B.forwardRef(function({className:n,...s},a){return e.jsx(ct,{className:M("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...s,ref:a})}),jt=B.forwardRef(function({className:n,...s},a){return e.jsxs(ht,{children:[e.jsx(gt,{}),e.jsx(ot,{ref:a,className:M("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",n),...s})]})}),ft=function({className:n,...s}){return e.jsx("div",{className:M("flex flex-col space-y-2 text-center sm:text-left",n),...s})},Nt=function({className:n,...s}){return e.jsx("div",{className:M("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",n),...s})},vt=B.forwardRef(function({className:n,...s},a){return e.jsx(xt,{ref:a,className:M("text-lg font-semibold",n),...s})}),_t=B.forwardRef(function({className:n,...s},a){return e.jsx(ut,{ref:a,className:M("text-sm text-muted-foreground",n),...s})}),yt=B.forwardRef(function({className:n,...s},a){return e.jsx(dt,{ref:a,className:M(ce(),n),...s})}),bt=B.forwardRef(function({className:n,...s},a){return e.jsx(mt,{ref:a,className:M(ce({variant:"outline"}),"mt-2 sm:mt-0",n),...s})});function Ct({isOpen:d,onClose:n,errors:s={}}){const[a,m]=_.useState([{product_name:"",quantity:1,unit_cost_price:0,unit_selling_price:0}]),{data:f,setData:h,post:C,processing:A,reset:w,clearErrors:g}=re({trip_date:new Date().toISOString().split("T")[0],description:"",location:"",transportation_cost:"",other_expenses:"",notes:"",items:[{product_name:"",quantity:1,unit_cost_price:0,unit_selling_price:0}]});_.useEffect(()=>{if(d){const l=[{product_name:"",quantity:1,unit_cost_price:0,unit_selling_price:0}];m(l),w(),g(),h(t=>({...t,trip_date:new Date().toISOString().split("T")[0],description:"",location:"",transportation_cost:"",other_expenses:"",notes:"",items:l}))}},[d,w,g]);function E(l){l.preventDefault(),h({...f,items:a}),C(route("trip-estimations.store"),{onSuccess:()=>{w(),g(),m([{product_name:"",quantity:1,unit_cost_price:0,unit_selling_price:0}]),n()},preserveScroll:!0,preserveState:!0,only:["trips","overview","errors","flash"]})}function F(){w(),g(),m([{product_name:"",quantity:1,unit_cost_price:0,unit_selling_price:0}]),n()}function W(){const l=[...a,{product_name:"",quantity:1,unit_cost_price:0,unit_selling_price:0}];m(l),h("items",l)}function R(l){if(a.length>1){const t=a.filter((i,p)=>p!==l);m(t),h("items",t)}}function y(l,t,i){const p=[...a];p[l]={...p[l],[t]:i},m(p),h("items",p)}const N=a.reduce((l,t)=>{const i=parseInt(t.quantity)||0,p=parseFloat(t.unit_cost_price)||0,v=parseFloat(t.unit_selling_price)||0,D=i*p,T=i*v,r=T-D;return{totalCost:l.totalCost+D,totalSelling:l.totalSelling+T,grossProfit:l.grossProfit+r}},{totalCost:0,totalSelling:0,grossProfit:0}),$=parseFloat(f.transportation_cost)||0,V=parseFloat(f.other_expenses)||0,z=$+V,I=N.grossProfit-z;function b(l){return`${parseFloat(l||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`}return e.jsx(X,{open:d,onOpenChange:n,children:e.jsxs(Z,{className:"max-h-[95vh] w-[95vw] max-w-none overflow-y-auto",children:[e.jsx(ee,{children:e.jsx(te,{children:"Add Trip Estimation"})}),e.jsxs("form",{onSubmit:E,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"trip_date",children:"Trip Date *"}),e.jsx(u,{id:"trip_date",type:"date",value:f.trip_date,onChange:l=>h("trip_date",l.target.value),required:!0}),s.trip_date&&e.jsx(x,{message:s.trip_date,className:"mt-1"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"description",children:"Description"}),e.jsx(u,{id:"description",placeholder:"e.g., Weekly stock purchase",value:f.description,onChange:l=>h("description",l.target.value)}),s.description&&e.jsx(x,{message:s.description,className:"mt-1"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"location",children:"Location"}),e.jsx(u,{id:"location",placeholder:"e.g., Kumasi Market",value:f.location,onChange:l=>h("location",l.target.value)}),s.location&&e.jsx(x,{message:s.location,className:"mt-1"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(o,{className:"text-base font-semibold",children:"Products *"}),e.jsxs(S,{type:"button",variant:"outline",size:"sm",onClick:W,className:"h-8",children:[e.jsx(se,{className:"mr-1 h-3 w-3"}),"Add Product"]})]}),a.map((l,t)=>{const i=parseInt(l.quantity)||0,p=parseFloat(l.unit_cost_price)||0,v=parseFloat(l.unit_selling_price)||0,D=i*p,r=i*v-D;return e.jsxs("div",{className:"rounded-lg border bg-white shadow-sm",children:[e.jsxs("div",{className:"block lg:hidden p-4 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h4",{className:"font-medium text-gray-700",children:["Product ",t+1]}),e.jsx(S,{type:"button",variant:"outline",size:"sm",onClick:()=>R(t),disabled:a.length===1,className:"h-8 w-8 p-0 text-red-600 disabled:text-gray-400 disabled:cursor-not-allowed",children:e.jsx(H,{className:"h-3 w-3"})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(o,{className:"text-sm font-medium",children:"Product Name"}),e.jsx(u,{placeholder:"Enter product name",value:l.product_name,onChange:c=>y(t,"product_name",c.target.value),required:!0,className:"mt-1"}),s[`items.${t}.product_name`]&&e.jsx(x,{message:s[`items.${t}.product_name`],className:"mt-1"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx(o,{className:"text-sm font-medium",children:"Quantity"}),e.jsx(u,{type:"number",placeholder:"1",value:l.quantity,onChange:c=>y(t,"quantity",c.target.value),min:"1",required:!0,className:"mt-1 w-full text-center text-lg font-medium h-12"}),s[`items.${t}.quantity`]&&e.jsx(x,{message:s[`items.${t}.quantity`],className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(o,{className:"text-sm font-medium",children:"Unit Cost (GHC)"}),e.jsx(u,{type:"number",step:"0.01",placeholder:"0.00",value:l.unit_cost_price,onChange:c=>y(t,"unit_cost_price",c.target.value),min:"0",required:!0,className:"mt-1"}),s[`items.${t}.unit_cost_price`]&&e.jsx(x,{message:s[`items.${t}.unit_cost_price`],className:"mt-1"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx(o,{className:"text-sm font-medium",children:"Total Cost"}),e.jsx("div",{className:"mt-1 flex h-10 w-full rounded-md border border-input bg-gray-50 px-3 py-2 text-sm text-gray-700 items-center",children:b(D)})]}),e.jsxs("div",{children:[e.jsx(o,{className:"text-sm font-medium",children:"Unit Selling (GHC)"}),e.jsx(u,{type:"number",step:"0.01",placeholder:"0.00",value:l.unit_selling_price,onChange:c=>y(t,"unit_selling_price",c.target.value),min:"0",required:!0,className:"mt-1"}),s[`items.${t}.unit_selling_price`]&&e.jsx(x,{message:s[`items.${t}.unit_selling_price`],className:"mt-1"})]})]}),e.jsxs("div",{children:[e.jsx(o,{className:"text-sm font-medium",children:"Profit"}),e.jsxs("div",{className:`mt-1 flex h-16 w-full rounded-md border-2 py-3 text-lg font-bold items-center justify-center ${r>0?"bg-green-50 text-green-700 border-green-300":r<0?"bg-red-50 text-red-700 border-red-300":"bg-gray-50 text-gray-700 border-gray-300"}`,children:[r>0?"+":"",b(r)]})]})]})]}),e.jsxs("div",{className:"hidden xl:block xl:p-4 xl:space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-4 gap-4 items-end",children:[e.jsxs("div",{className:"col-span-2",children:[e.jsx(o,{className:"text-sm font-medium mb-2 block",children:"Product Name"}),e.jsx(u,{placeholder:"Enter product name",value:l.product_name,onChange:c=>y(t,"product_name",c.target.value),required:!0,className:"w-full h-12"}),s[`items.${t}.product_name`]&&e.jsx(x,{message:s[`items.${t}.product_name`],className:"mt-1"})]}),e.jsx("div",{className:"col-span-2",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700 mb-2",children:"Profit"}),e.jsxs("div",{className:`inline-flex items-center justify-center px-4 py-2 rounded-lg text-xl font-bold h-12 ${r>0?"bg-green-100 text-green-800 border-2 border-green-300":r<0?"bg-red-100 text-red-800 border-2 border-red-300":"bg-gray-100 text-gray-800 border-2 border-gray-300"}`,children:[r>0?"+":"",b(r)]})]})})]}),e.jsxs("div",{className:"grid gap-4",style:{gridTemplateColumns:"1fr 1fr 1fr 40px"},children:[e.jsxs("div",{children:[e.jsx(o,{className:"text-sm font-medium mb-2 block",children:"Quantity"}),e.jsx(u,{type:"number",placeholder:"1",value:l.quantity,onChange:c=>y(t,"quantity",c.target.value),min:"1",required:!0,className:"text-center w-full text-lg font-bold h-12"}),s[`items.${t}.quantity`]&&e.jsx(x,{message:s[`items.${t}.quantity`],className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(o,{className:"text-sm font-medium mb-2 block",children:"Unit Cost"}),e.jsx(u,{type:"number",step:"0.01",placeholder:"0.00",value:l.unit_cost_price,onChange:c=>y(t,"unit_cost_price",c.target.value),min:"0",required:!0,className:"w-full h-12"}),e.jsxs("div",{className:"text-center text-xs text-gray-600 mt-1",children:["Total: ",b(i*p)]}),s[`items.${t}.unit_cost_price`]&&e.jsx(x,{message:s[`items.${t}.unit_cost_price`],className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(o,{className:"text-sm font-medium mb-2 block",children:"Unit Selling"}),e.jsx(u,{type:"number",step:"0.01",placeholder:"0.00",value:l.unit_selling_price,onChange:c=>y(t,"unit_selling_price",c.target.value),min:"0",required:!0,className:"w-full h-12"}),e.jsxs("div",{className:"text-center text-xs text-gray-600 mt-1",children:["Total: ",b(i*v)]}),s[`items.${t}.unit_selling_price`]&&e.jsx(x,{message:s[`items.${t}.unit_selling_price`],className:"mt-1"})]}),e.jsx("div",{className:"flex justify-center items-end h-12",children:e.jsx(H,{className:`h-5 w-5 cursor-pointer transition-colors ${a.length===1?"text-gray-400 cursor-not-allowed":"text-red-600 hover:text-red-800"}`,onClick:()=>a.length>1&&R(t)})})]})]}),e.jsxs("div",{className:"hidden lg:block xl:hidden lg:p-3 lg:space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3 items-end",children:[e.jsxs("div",{children:[e.jsx(o,{className:"text-sm font-medium mb-2 block",children:"Product Name"}),e.jsx(u,{placeholder:"Enter product name",value:l.product_name,onChange:c=>y(t,"product_name",c.target.value),required:!0,className:"w-full h-10"}),s[`items.${t}.product_name`]&&e.jsx(x,{message:s[`items.${t}.product_name`],className:"mt-1"})]}),e.jsx("div",{children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700 mb-2",children:"Profit"}),e.jsxs("div",{className:`inline-flex items-center justify-center px-3 py-2 rounded-lg text-base font-bold h-10 w-full ${r>0?"bg-green-100 text-green-800 border-2 border-green-300":r<0?"bg-red-100 text-red-800 border-2 border-red-300":"bg-gray-100 text-gray-800 border-2 border-gray-300"}`,children:[r>0?"+":"",b(r)]})]})})]}),e.jsxs("div",{className:"grid gap-3",style:{gridTemplateColumns:"1fr 1fr 1fr 32px"},children:[e.jsxs("div",{children:[e.jsx(o,{className:"text-sm font-medium mb-2 block",children:"Quantity"}),e.jsx(u,{type:"number",placeholder:"1",value:l.quantity,onChange:c=>y(t,"quantity",c.target.value),min:"1",required:!0,className:"text-center w-full text-base font-medium h-10"}),s[`items.${t}.quantity`]&&e.jsx(x,{message:s[`items.${t}.quantity`],className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(o,{className:"text-sm font-medium mb-2 block",children:"Unit Cost"}),e.jsx(u,{type:"number",step:"0.01",placeholder:"0.00",value:l.unit_cost_price,onChange:c=>y(t,"unit_cost_price",c.target.value),min:"0",required:!0,className:"w-full h-10"}),e.jsx("div",{className:"text-center text-xs text-gray-600 mt-1",children:b(i*p)}),s[`items.${t}.unit_cost_price`]&&e.jsx(x,{message:s[`items.${t}.unit_cost_price`],className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(o,{className:"text-sm font-medium mb-2 block",children:"Unit Selling"}),e.jsx(u,{type:"number",step:"0.01",placeholder:"0.00",value:l.unit_selling_price,onChange:c=>y(t,"unit_selling_price",c.target.value),min:"0",required:!0,className:"w-full h-10"}),e.jsx("div",{className:"text-center text-xs text-gray-600 mt-1",children:b(i*v)}),s[`items.${t}.unit_selling_price`]&&e.jsx(x,{message:s[`items.${t}.unit_selling_price`],className:"mt-1"})]}),e.jsx("div",{className:"flex justify-center items-end h-10",children:e.jsx(H,{className:`h-4 w-4 cursor-pointer transition-colors ${a.length===1?"text-gray-400 cursor-not-allowed":"text-red-600 hover:text-red-800"}`,onClick:()=>a.length>1&&R(t)})})]})]})]},t)})]}),e.jsxs("div",{className:"space-y-4 rounded-lg border p-4",children:[e.jsx(o,{className:"text-base font-semibold",children:"Trip Expenses"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"transportation_cost",children:"Transportation Cost (GHC)"}),e.jsx(u,{id:"transportation_cost",type:"number",step:"0.01",min:"0",placeholder:"0.00",value:f.transportation_cost,onChange:l=>h("transportation_cost",l.target.value)}),s.transportation_cost&&e.jsx(x,{message:s.transportation_cost,className:"mt-1"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"other_expenses",children:"Other Expenses (GHC)"}),e.jsx(u,{id:"other_expenses",type:"number",step:"0.01",min:"0",placeholder:"0.00",value:f.other_expenses,onChange:l=>h("other_expenses",l.target.value)}),s.other_expenses&&e.jsx(x,{message:s.other_expenses,className:"mt-1"})]})]})]}),e.jsxs("div",{className:"space-y-4 rounded-lg bg-blue-50 p-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(xe,{className:"h-5 w-5 text-blue-600"}),e.jsx(o,{className:"text-base font-semibold text-blue-900",children:"Trip Summary"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 md:grid-cols-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Total Cost"}),e.jsx("div",{className:"text-lg font-semibold text-red-600",children:b(N.totalCost)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Total Selling"}),e.jsx("div",{className:"text-lg font-semibold text-green-600",children:b(N.totalSelling)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Gross Profit"}),e.jsx("div",{className:`text-lg font-semibold ${N.grossProfit>0?"text-green-600":N.grossProfit<0?"text-red-600":"text-gray-600"}`,children:b(N.grossProfit)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Total Expenses"}),e.jsx("div",{className:"text-lg font-semibold text-orange-600",children:b(z)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Net Profit"}),e.jsx("div",{className:`text-lg font-semibold ${I>0?"text-green-600":I<0?"text-red-600":"text-gray-600"}`,children:b(I)})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"notes",children:"Notes"}),e.jsx(me,{id:"notes",placeholder:"Additional notes about this trip",value:f.notes,onChange:l=>h("notes",l.target.value),rows:2}),s.notes&&e.jsx(x,{message:s.notes,className:"mt-1"})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(S,{type:"button",variant:"outline",onClick:F,children:"Cancel"}),e.jsx(S,{type:"submit",disabled:A,children:A?"Creating...":"Create Trip Estimation"})]})]})]})})}function wt({isOpen:d,onClose:n,trip:s,errors:a={}}){const[m,f]=_.useState([]),{data:h,setData:C,put:A,processing:w,reset:g,clearErrors:E}=re({trip_date:"",description:"",location:"",transportation_cost:"",other_expenses:"",notes:"",items:[]});_.useEffect(()=>{if(s&&d){const i=new Date(s.trip_date).toISOString().split("T")[0],p=s.items||[{product_name:"",quantity:1,unit_cost_price:0,unit_selling_price:0}];f(p),C({trip_date:i,description:s.description||"",location:s.location||"",transportation_cost:s.transportation_cost||"",other_expenses:s.other_expenses||"",notes:s.notes||"",items:p}),E()}},[s,d,E]);function F(t){t.preventDefault(),s&&(C({...h,items:m}),A(route("trip-estimations.update",s.id),{onSuccess:()=>{g(),E(),n()},preserveScroll:!0,preserveState:!0,only:["trips","overview","errors","flash"]}))}function W(){g(),E(),f([]),n()}function R(){const t=[...m,{product_name:"",quantity:1,unit_cost_price:0,unit_selling_price:0}];f(t),C("items",t)}function y(t){if(m.length>1){const i=m.filter((p,v)=>v!==t);f(i),C("items",i)}}function N(t,i,p){const v=[...m];v[t]={...v[t],[i]:p},f(v),C("items",v)}if(!s)return null;const $=m.reduce((t,i)=>{const p=parseInt(i.quantity)||0,v=parseFloat(i.unit_cost_price)||0,D=parseFloat(i.unit_selling_price)||0,T=p*v,r=p*D,c=r-T;return{totalCost:t.totalCost+T,totalSelling:t.totalSelling+r,grossProfit:t.grossProfit+c}},{totalCost:0,totalSelling:0,grossProfit:0}),V=parseFloat(h.transportation_cost)||0,z=parseFloat(h.other_expenses)||0,I=V+z,b=$.grossProfit-I;function l(t){return`${parseFloat(t||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`}return e.jsx(X,{open:d,onOpenChange:n,children:e.jsxs(Z,{className:"max-h-[95vh] w-[95vw] max-w-none overflow-y-auto",children:[e.jsx(ee,{children:e.jsx(te,{children:"Edit Trip Estimation"})}),e.jsxs("form",{onSubmit:F,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"trip_date",children:"Trip Date *"}),e.jsx(u,{id:"trip_date",type:"date",value:h.trip_date,onChange:t=>C("trip_date",t.target.value),required:!0}),a.trip_date&&e.jsx(x,{message:a.trip_date,className:"mt-1"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"description",children:"Description"}),e.jsx(u,{id:"description",placeholder:"e.g., Weekly stock purchase",value:h.description,onChange:t=>C("description",t.target.value)}),a.description&&e.jsx(x,{message:a.description,className:"mt-1"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"location",children:"Location"}),e.jsx(u,{id:"location",placeholder:"e.g., Kumasi Market",value:h.location,onChange:t=>C("location",t.target.value)}),a.location&&e.jsx(x,{message:a.location,className:"mt-1"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(o,{className:"text-base font-semibold",children:"Products *"}),e.jsxs(S,{type:"button",variant:"outline",size:"sm",onClick:R,className:"h-8",children:[e.jsx(se,{className:"mr-1 h-3 w-3"}),"Add Product"]})]}),m.map((t,i)=>{const p=parseInt(t.quantity)||0,v=parseFloat(t.unit_cost_price)||0,D=parseFloat(t.unit_selling_price)||0,T=p*v,c=p*D-T;return e.jsxs("div",{className:"rounded-lg border bg-white shadow-sm",children:[e.jsxs("div",{className:"block lg:hidden p-4 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h4",{className:"font-medium text-gray-700",children:["Product ",i+1]}),e.jsx(S,{type:"button",variant:"outline",size:"sm",onClick:()=>y(i),disabled:m.length===1,className:"h-8 w-8 p-0 text-red-600 disabled:text-gray-400 disabled:cursor-not-allowed",children:e.jsx(H,{className:"h-3 w-3"})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(o,{className:"text-sm font-medium",children:"Product Name"}),e.jsx(u,{placeholder:"Enter product name",value:t.product_name,onChange:j=>N(i,"product_name",j.target.value),required:!0,className:"mt-1"}),a[`items.${i}.product_name`]&&e.jsx(x,{message:a[`items.${i}.product_name`],className:"mt-1"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx(o,{className:"text-sm font-medium",children:"Quantity"}),e.jsx(u,{type:"number",placeholder:"1",value:t.quantity,onChange:j=>N(i,"quantity",j.target.value),min:"1",required:!0,className:"mt-1 w-full text-center text-lg font-medium h-12"}),a[`items.${i}.quantity`]&&e.jsx(x,{message:a[`items.${i}.quantity`],className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(o,{className:"text-sm font-medium",children:"Unit Cost (GHC)"}),e.jsx(u,{type:"number",step:"0.01",placeholder:"0.00",value:t.unit_cost_price,onChange:j=>N(i,"unit_cost_price",j.target.value),min:"0",required:!0,className:"mt-1"}),a[`items.${i}.unit_cost_price`]&&e.jsx(x,{message:a[`items.${i}.unit_cost_price`],className:"mt-1"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx(o,{className:"text-sm font-medium",children:"Total Cost"}),e.jsx("div",{className:"mt-1 flex h-10 w-full rounded-md border border-input bg-gray-50 px-3 py-2 text-sm text-gray-700 items-center",children:l(T)})]}),e.jsxs("div",{children:[e.jsx(o,{className:"text-sm font-medium",children:"Unit Selling (GHC)"}),e.jsx(u,{type:"number",step:"0.01",placeholder:"0.00",value:t.unit_selling_price,onChange:j=>N(i,"unit_selling_price",j.target.value),min:"0",required:!0,className:"mt-1"}),a[`items.${i}.unit_selling_price`]&&e.jsx(x,{message:a[`items.${i}.unit_selling_price`],className:"mt-1"})]})]}),e.jsxs("div",{children:[e.jsx(o,{className:"text-sm font-medium",children:"Profit"}),e.jsxs("div",{className:`mt-1 flex h-16 w-full rounded-md border-2 px-4 py-3 text-lg font-bold items-center justify-center ${c>0?"bg-green-50 text-green-700 border-green-300":c<0?"bg-red-50 text-red-700 border-red-300":"bg-gray-50 text-gray-700 border-gray-300"}`,children:[c>0?"+":"",l(c)]})]})]})]}),e.jsxs("div",{className:"hidden xl:block xl:p-4 xl:space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-4 gap-4 items-end",children:[e.jsxs("div",{className:"col-span-2",children:[e.jsx(o,{className:"text-sm font-medium mb-2 block",children:"Product Name"}),e.jsx(u,{placeholder:"Enter product name",value:t.product_name,onChange:j=>N(i,"product_name",j.target.value),required:!0,className:"w-full h-12"}),a[`items.${i}.product_name`]&&e.jsx(x,{message:a[`items.${i}.product_name`],className:"mt-1"})]}),e.jsx("div",{className:"col-span-2",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700 mb-2",children:"Profit"}),e.jsxs("div",{className:`inline-flex items-center justify-center px-4 py-2 rounded-lg text-xl font-bold h-12 ${c>0?"bg-green-100 text-green-800 border-2 border-green-300":c<0?"bg-red-100 text-red-800 border-2 border-red-300":"bg-gray-100 text-gray-800 border-2 border-gray-300"}`,children:[c>0?"+":"",l(c)]})]})})]}),e.jsxs("div",{className:"grid gap-4",style:{gridTemplateColumns:"1fr 1fr 1fr 40px"},children:[e.jsxs("div",{children:[e.jsx(o,{className:"text-sm font-medium mb-2 block",children:"Quantity"}),e.jsx(u,{type:"number",placeholder:"1",value:t.quantity,onChange:j=>N(i,"quantity",j.target.value),min:"1",required:!0,className:"text-center w-full text-lg font-bold h-12"}),a[`items.${i}.quantity`]&&e.jsx(x,{message:a[`items.${i}.quantity`],className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(o,{className:"text-sm font-medium mb-2 block",children:"Unit Cost"}),e.jsx(u,{type:"number",step:"0.01",placeholder:"0.00",value:t.unit_cost_price,onChange:j=>N(i,"unit_cost_price",j.target.value),min:"0",required:!0,className:"w-full h-12"}),e.jsxs("div",{className:"text-center text-xs text-gray-600 mt-1",children:["Total: ",l(p*v)]}),a[`items.${i}.unit_cost_price`]&&e.jsx(x,{message:a[`items.${i}.unit_cost_price`],className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(o,{className:"text-sm font-medium mb-2 block",children:"Unit Selling"}),e.jsx(u,{type:"number",step:"0.01",placeholder:"0.00",value:t.unit_selling_price,onChange:j=>N(i,"unit_selling_price",j.target.value),min:"0",required:!0,className:"w-full h-12"}),e.jsxs("div",{className:"text-center text-xs text-gray-600 mt-1",children:["Total: ",l(p*D)]}),a[`items.${i}.unit_selling_price`]&&e.jsx(x,{message:a[`items.${i}.unit_selling_price`],className:"mt-1"})]}),e.jsx("div",{className:"flex justify-center items-end h-12",children:e.jsx(H,{className:`h-5 w-5 cursor-pointer transition-colors ${m.length===1?"text-gray-400 cursor-not-allowed":"text-red-600 hover:text-red-800"}`,onClick:()=>m.length>1&&y(i)})})]})]}),e.jsxs("div",{className:"hidden lg:block xl:hidden lg:p-3 lg:space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3 items-end",children:[e.jsxs("div",{children:[e.jsx(o,{className:"text-sm font-medium mb-2 block",children:"Product Name"}),e.jsx(u,{placeholder:"Enter product name",value:t.product_name,onChange:j=>N(i,"product_name",j.target.value),required:!0,className:"w-full h-10"}),a[`items.${i}.product_name`]&&e.jsx(x,{message:a[`items.${i}.product_name`],className:"mt-1"})]}),e.jsx("div",{children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700 mb-2",children:"Profit"}),e.jsxs("div",{className:`inline-flex items-center justify-center px-3 py-2 rounded-lg text-base font-bold h-10 w-full ${c>0?"bg-green-100 text-green-800 border-2 border-green-300":c<0?"bg-red-100 text-red-800 border-2 border-red-300":"bg-gray-100 text-gray-800 border-2 border-gray-300"}`,children:[c>0?"+":"",l(c)]})]})})]}),e.jsxs("div",{className:"grid gap-3",style:{gridTemplateColumns:"1fr 1fr 1fr 32px"},children:[e.jsxs("div",{children:[e.jsx(o,{className:"text-sm font-medium mb-2 block",children:"Quantity"}),e.jsx(u,{type:"number",placeholder:"1",value:t.quantity,onChange:j=>N(i,"quantity",j.target.value),min:"1",required:!0,className:"text-center w-full text-base font-medium h-10"}),a[`items.${i}.quantity`]&&e.jsx(x,{message:a[`items.${i}.quantity`],className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(o,{className:"text-sm font-medium mb-2 block",children:"Unit Cost"}),e.jsx(u,{type:"number",step:"0.01",placeholder:"0.00",value:t.unit_cost_price,onChange:j=>N(i,"unit_cost_price",j.target.value),min:"0",required:!0,className:"w-full h-10"}),e.jsx("div",{className:"text-center text-xs text-gray-600 mt-1",children:l(p*v)}),a[`items.${i}.unit_cost_price`]&&e.jsx(x,{message:a[`items.${i}.unit_cost_price`],className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(o,{className:"text-sm font-medium mb-2 block",children:"Unit Selling"}),e.jsx(u,{type:"number",step:"0.01",placeholder:"0.00",value:t.unit_selling_price,onChange:j=>N(i,"unit_selling_price",j.target.value),min:"0",required:!0,className:"w-full h-10"}),e.jsx("div",{className:"text-center text-xs text-gray-600 mt-1",children:l(p*D)}),a[`items.${i}.unit_selling_price`]&&e.jsx(x,{message:a[`items.${i}.unit_selling_price`],className:"mt-1"})]}),e.jsx("div",{className:"flex justify-center items-end h-10",children:e.jsx(H,{className:`h-4 w-4 cursor-pointer transition-colors ${m.length===1?"text-gray-400 cursor-not-allowed":"text-red-600 hover:text-red-800"}`,onClick:()=>m.length>1&&y(i)})})]})]})]},i)})]}),e.jsxs("div",{className:"space-y-4 rounded-lg border p-4",children:[e.jsx(o,{className:"text-base font-semibold",children:"Trip Expenses"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"transportation_cost",children:"Transportation Cost (GHC)"}),e.jsx(u,{id:"transportation_cost",type:"number",step:"0.01",min:"0",placeholder:"0.00",value:h.transportation_cost,onChange:t=>C("transportation_cost",t.target.value)}),a.transportation_cost&&e.jsx(x,{message:a.transportation_cost,className:"mt-1"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"other_expenses",children:"Other Expenses (GHC)"}),e.jsx(u,{id:"other_expenses",type:"number",step:"0.01",min:"0",placeholder:"0.00",value:h.other_expenses,onChange:t=>C("other_expenses",t.target.value)}),a.other_expenses&&e.jsx(x,{message:a.other_expenses,className:"mt-1"})]})]})]}),e.jsxs("div",{className:"space-y-4 rounded-lg bg-blue-50 p-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(xe,{className:"h-5 w-5 text-blue-600"}),e.jsx(o,{className:"text-base font-semibold text-blue-900",children:"Trip Summary"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 md:grid-cols-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Total Cost"}),e.jsx("div",{className:"text-lg font-semibold text-red-600",children:l($.totalCost)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Total Selling"}),e.jsx("div",{className:"text-lg font-semibold text-green-600",children:l($.totalSelling)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Gross Profit"}),e.jsx("div",{className:`text-lg font-semibold ${$.grossProfit>0?"text-green-600":$.grossProfit<0?"text-red-600":"text-gray-600"}`,children:l($.grossProfit)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Total Expenses"}),e.jsx("div",{className:"text-lg font-semibold text-orange-600",children:l(I)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Net Profit"}),e.jsx("div",{className:`text-lg font-semibold ${b>0?"text-green-600":b<0?"text-red-600":"text-gray-600"}`,children:l(b)})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"notes",children:"Notes"}),e.jsx(me,{id:"notes",placeholder:"Additional notes about this trip",value:h.notes,onChange:t=>C("notes",t.target.value),rows:2}),a.notes&&e.jsx(x,{message:a.notes,className:"mt-1"})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(S,{type:"button",variant:"outline",onClick:W,children:"Cancel"}),e.jsx(S,{type:"submit",disabled:w,children:w?"Updating...":"Update Trip Estimation"})]})]})]})})}function Qt({trips:d=[],overview:n={},start_date:s="",end_date:a=""}){var p,v,D,T;const[m,f]=_.useState(!1),[h,C]=_.useState(null),[A,w]=_.useState(null),[g,E]=_.useState(null),F=new Date,W=new Date(F.getFullYear(),F.getMonth(),1).toISOString().slice(0,10),R=new Date(F.getFullYear(),F.getMonth()+1,0).toISOString().slice(0,10),[y,N]=_.useState(s||W),[$,V]=_.useState(a||R),z=(r,c)=>{const j=c==="start"?r:y,we=c==="end"?r:$;c==="start"&&N(r),c==="end"&&V(r),ie.get(route("trip-estimations.index"),{start_date:j,end_date:we,page:1},{preserveState:!0,preserveScroll:!0,replace:!0})};function I(r){C(r)}function b(){A&&ie.delete(route("trip-estimations.destroy",A.id),{preserveScroll:!0,preserveState:!0,only:["trips","overview","errors","flash"],onSuccess:()=>w(null)})}function l(r){E(r)}function t(r){return`GHC ${parseFloat(r||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`}function i(r){const c=parseFloat(r||0);return c>0?"text-green-600":c<0?"text-red-600":"text-gray-600"}return e.jsx(De,{breadcrumbs:[{title:"Trip Profit Estimator",href:"/trip-estimations"}],children:e.jsxs("div",{className:"min-h-screen space-y-6 bg-gray-100 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Trip Profit Estimator"}),e.jsxs(S,{onClick:()=>f(!0),className:"flex items-center gap-2",children:[e.jsx(se,{className:"h-4 w-4"}),"Add Trip"]})]}),e.jsx(Te,{startDate:y,endDate:$,onChange:z}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3",children:[e.jsxs(O,{children:[e.jsxs(U,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(L,{className:"text-sm font-medium",children:"Total Trips"}),e.jsx(Se,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(G,{children:e.jsx("div",{className:"text-2xl font-bold",children:n.total_trips||0})})]}),e.jsxs(O,{children:[e.jsxs(U,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(L,{className:"text-sm font-medium",children:"Total Selling Price"}),e.jsx(K,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(G,{children:e.jsx("div",{className:"text-2xl font-bold text-green-600",children:t(n.total_selling_price)})})]}),e.jsxs(O,{children:[e.jsxs(U,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(L,{className:"text-sm font-medium",children:"Total Cost Price"}),e.jsx(K,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(G,{children:e.jsx("div",{className:"text-2xl font-bold text-red-600",children:t(n.total_cost_price)})})]}),e.jsxs(O,{children:[e.jsxs(U,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(L,{className:"text-sm font-medium",children:"Gross Profit"}),e.jsx(le,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(G,{children:e.jsx("div",{className:`text-2xl font-bold ${i(n.total_gross_profit)}`,children:t(n.total_gross_profit)})})]}),e.jsxs(O,{children:[e.jsxs(U,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(L,{className:"text-sm font-medium",children:"Total Expenses"}),e.jsx(K,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(G,{children:e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:t(n.total_expenses)})})]}),e.jsxs(O,{children:[e.jsxs(U,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(L,{className:"text-sm font-medium",children:"Net Profit"}),e.jsx(le,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(G,{children:e.jsx("div",{className:`text-2xl font-bold ${i(n.total_net_profit)}`,children:t(n.total_net_profit)})})]})]}),e.jsxs(O,{children:[e.jsx(U,{children:e.jsx(L,{children:"Trip Estimations"})}),e.jsxs(G,{children:[e.jsxs(Pe,{children:[e.jsx(qe,{children:e.jsxs(Y,{children:[e.jsx(q,{children:"Date"}),e.jsx(q,{children:"Description"}),e.jsx(q,{children:"Location"}),e.jsx(q,{children:"Items"}),e.jsx(q,{className:"text-right",children:"Cost Price"}),e.jsx(q,{className:"text-right",children:"Selling Price"}),e.jsx(q,{className:"text-right",children:"Gross Profit"}),e.jsx(q,{className:"text-right",children:"Expenses"}),e.jsx(q,{className:"text-right",children:"Net Profit"}),e.jsx(q,{className:"text-center",children:"Actions"})]})}),e.jsx(Ee,{children:((p=d.data)==null?void 0:p.length)>0?d.data.map(r=>e.jsxs(Y,{children:[e.jsx(P,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ze,{className:"h-4 w-4 text-gray-400"}),r.trip_date]})}),e.jsx(P,{children:r.description||"-"}),e.jsx(P,{children:r.location||"-"}),e.jsx(P,{children:e.jsxs($e,{variant:"secondary",children:[r.items_count," items"]})}),e.jsx(P,{className:"text-right font-mono",children:t(r.total_cost_price)}),e.jsx(P,{className:"text-right font-mono",children:t(r.total_selling_price)}),e.jsx(P,{className:`text-right font-mono ${i(r.gross_profit)}`,children:t(r.gross_profit)}),e.jsx(P,{className:"text-right font-mono",children:t(r.total_expenses)}),e.jsx(P,{className:`text-right font-mono ${i(r.net_profit)}`,children:t(r.net_profit)}),e.jsx(P,{className:"text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(S,{variant:"outline",size:"sm",onClick:()=>l(r),children:e.jsx(We,{className:"h-3 w-3"})}),e.jsx(S,{variant:"outline",size:"sm",onClick:()=>I(r),children:e.jsx(Ye,{className:"h-3 w-3"})}),e.jsx(S,{variant:"outline",size:"sm",onClick:()=>w(r),className:"text-red-600 hover:text-red-700",children:e.jsx(H,{className:"h-3 w-3"})})]})})]},r.id)):e.jsx(Y,{children:e.jsxs(P,{colSpan:10,className:"text-center py-8 text-gray-500",children:["No trip estimations found for the selected period.",e.jsx("br",{}),e.jsx(S,{variant:"link",onClick:()=>f(!0),className:"mt-2",children:"Add your first trip estimation"})]})})})]}),((v=d.data)==null?void 0:v.length)===0?e.jsx("div",{className:"text-muted-foreground py-8 text-center",children:"No trip estimations found for the selected period."}):e.jsxs("div",{className:"my-3 flex items-center justify-center gap-4",children:[d.prev_page_url&&e.jsx(ae,{preserveScroll:!0,preserveState:!0,href:d.prev_page_url,className:"rounded border px-4 py-2 hover:bg-gray-100",children:"« Previous"}),e.jsxs("span",{className:"px-4 py-2 font-medium",children:["Page ",d.current_page]}),d.next_page_url&&e.jsx(ae,{preserveScroll:!0,preserveState:!0,href:d.next_page_url,className:"rounded border px-4 py-2 hover:bg-gray-100",children:"Next »"})]})]})]}),e.jsx(Ct,{isOpen:m,onClose:()=>f(!1)}),h&&e.jsx(wt,{isOpen:!!h,onClose:()=>C(null),trip:h}),g&&e.jsx(X,{open:!!g,onOpenChange:()=>E(null),children:e.jsxs(Z,{className:"max-h-[90vh] max-w-3xl overflow-y-auto",children:[e.jsx(ee,{children:e.jsx(te,{children:"Trip Details"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Trip Date"}),e.jsx("div",{className:"font-medium",children:g.trip_date})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Location"}),e.jsx("div",{className:"font-medium",children:g.location||"-"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Description"}),e.jsx("div",{className:"font-medium",children:g.description||"-"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Notes"}),e.jsx("div",{className:"font-medium whitespace-pre-wrap",children:g.notes||"-"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Total Cost"}),e.jsx("div",{className:"font-mono",children:t(g.total_cost_price)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Total Selling"}),e.jsx("div",{className:"font-mono",children:t(g.total_selling_price)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Gross Profit"}),e.jsx("div",{className:`font-mono ${i(g.gross_profit)}`,children:t(g.gross_profit)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Expenses"}),e.jsx("div",{className:"font-mono",children:t(g.total_expenses)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Net Profit"}),e.jsx("div",{className:`font-mono ${i(g.net_profit)}`,children:t(g.net_profit)})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm font-semibold text-blue-900 mb-2",children:["Items (",((D=g.items)==null?void 0:D.length)||0,")"]}),e.jsx("div",{className:"space-y-2",children:(T=g.items)!=null&&T.length?g.items.map((r,c)=>e.jsxs("div",{className:"flex flex-wrap gap-4 p-3 bg-gray-50 rounded border",children:[e.jsxs("div",{className:"min-w-[120px]",children:[e.jsx("div",{className:"text-xs text-gray-600",children:"Product"}),e.jsx("div",{className:"font-medium",children:r.product_name})]}),e.jsxs("div",{className:"min-w-[60px]",children:[e.jsx("div",{className:"text-xs text-gray-600",children:"Qty"}),e.jsx("div",{className:"font-mono",children:r.quantity})]}),e.jsxs("div",{className:"min-w-[100px]",children:[e.jsx("div",{className:"text-xs text-gray-600",children:"Unit Prices"}),e.jsxs("div",{className:"font-mono text-xs",children:["Cost: ",Number(r.unit_cost_price).toLocaleString("en-US",{minimumFractionDigits:2}),e.jsx("br",{}),"Sell: ",Number(r.unit_selling_price).toLocaleString("en-US",{minimumFractionDigits:2})]})]}),e.jsxs("div",{className:"min-w-[100px]",children:[e.jsx("div",{className:"text-xs text-gray-600",children:"Total Cost"}),e.jsx("div",{className:"font-mono text-xs",children:Number(r.unit_cost_price*r.quantity).toLocaleString("en-US",{minimumFractionDigits:2})})]}),e.jsxs("div",{className:"min-w-[100px]",children:[e.jsx("div",{className:"text-xs text-gray-600",children:"Total Selling"}),e.jsx("div",{className:"font-mono text-xs",children:Number(r.unit_selling_price*r.quantity).toLocaleString("en-US",{minimumFractionDigits:2})})]}),e.jsxs("div",{className:"min-w-[100px]",children:[e.jsx("div",{className:"text-xs text-gray-600",children:"Profit (GHC)"}),e.jsx("div",{className:"font-mono text-green-600 font-bold",children:Number((parseFloat(r.unit_selling_price||0)-parseFloat(r.unit_cost_price||0))*parseFloat(r.quantity||0)).toLocaleString("en-US",{minimumFractionDigits:2})})]})]},c)):e.jsx("div",{className:"text-gray-500 text-sm",children:"No items found."})})]})]})]})}),e.jsx(pt,{open:!!A,onOpenChange:()=>w(null),children:e.jsxs(jt,{children:[e.jsxs(ft,{children:[e.jsx(vt,{children:"Delete Trip Estimation"}),e.jsx(_t,{children:"Are you sure you want to delete this trip estimation? This action cannot be undone."})]}),e.jsxs(Nt,{children:[e.jsx(bt,{children:"Cancel"}),e.jsx(yt,{onClick:b,className:"bg-red-600 hover:bg-red-700",children:"Delete"})]})]})})]})})}export{Qt as default};
