import{r as V,j as s,u as Lu,c as Nr,a as Su,L as Iu}from"./app-B_kQv4aY.js";import{c as Fx,F as je}from"./createLucideIcon-C5ljYmur.js";import{C as jr,a as Ar,b as Cr,c as Sr}from"./card-e5Aik1wQ.js";import{f as Ox,A as Px}from"./app-layout-DX9L-Y6w.js";import{I as Fu}from"./InputError-HHm-SZMK.js";import{D as Ou,b as Pu,c as Du,d as Wu,f as Mu,X as Bu}from"./dialog-BZc2kcxj.js";import{I as Ie}from"./input-B2iTHLCI.js";import{S as En,a as Tn,b as Rn,c as Ln,d as Fe}from"./select-KCUHeRM7.js";import{P as Uu}from"./pencil-RhmXKTmd.js";import{P as Dx}from"./plus-Du6TEDmk.js";import{T as Wx}from"./trash-2-DFISG06M.js";import{B as Eu}from"./badge-BdBs-Ef2.js";import{T as Mx,a as Bx,b as Tu,c as Ye,d as Ux,e as Ze}from"./table-CBhLVvf8.js";import{D as qx}from"./DateRangePicker-CGlYI1Su.js";import{P as qu}from"./printer-CHoP2GZu.js";import"./index-CFl9bjSW.js";import"./index-BTwFlrjG.js";import"./index-Wmt4qxeA.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gx=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],Hx=Fx("Search",Gx);function zx({open:D,onClose:re,products:l,customers:_e,form:j,items:J,setItems:K,amountPaid:v,setAmountPaid:k,dueDate:ve,setDueDate:oe,paymentType:B,setPaymentType:be,runningTotal:se}){V.useEffect(()=>{j.setData("items",J)},[J]),V.useEffect(()=>{j.setData("amount_paid",v)},[v]),V.useEffect(()=>{j.setData("due_date",ve)},[ve]),V.useEffect(()=>{j.setData("payment_type",B)},[B]);const pe=m=>l.find(T=>String(T.id)===String(m))||null,ae=(m,T,I)=>{const Z=J.map((M,ye)=>{if(ye!==m)return M;let O={...M,[T]:I};const fe=pe(O.product_id);if(!fe)return O;const _n=fe.lines_per_carton||1;let Fn=0;if(_n>1){const On=parseInt(O.cartons)||0,at=parseInt(O.lines)||0;Fn=On*_n+at;const un=(parseFloat(O.unit_selling_price)||0)/_n;O.qty=Fn,O.total=(un*Fn).toFixed(2)}else{const On=parseInt(O.qty)||0,at=parseFloat(O.unit_selling_price)||0;O.qty=On,O.total=(at*On).toFixed(2),O.cartons=void 0,O.lines=void 0}return O});K(Z)},w=()=>{K([...J,{product_id:"",qty:"",unit_selling_price:"",total:"",cartons:0,lines:0}])},E=m=>{J.length!==1&&K(J.filter((T,I)=>I!==m))},H=m=>{k(m),B==="partial"&&(parseFloat(m)<=0||parseFloat(m)>=se?j.setError("amount_paid","For partial payments, the amount paid must be greater than 0 and less than the total."):j.setError("amount_paid",void 0))},Y=m=>{be(m),m==="credit"?(k("0"),j.setError("amount_paid",void 0),j.data.customer_id||j.setData("customer_name","")):m==="cash"?(k(se.toString()),j.setError("amount_paid",void 0)):m==="partial"&&(k(""),j.setError("amount_paid",void 0),j.data.customer_id||j.setData("customer_name",""))};return s.jsx(Ou,{open:D,onOpenChange:re,children:s.jsxs(Pu,{children:[s.jsx(Du,{children:s.jsx(Wu,{children:"Add Sales Transaction"})}),s.jsxs("form",{onSubmit:m=>{if(m.preventDefault(),B==="cash"&&parseFloat(v)!==se){j.setError("amount_paid","For cash payments, the amount paid must equal the total.");return}if(B==="credit"&&parseFloat(v)!==0){j.setError("amount_paid","For credit sales, the amount paid must be 0.");return}if(B==="partial"&&(parseFloat(v)<=0||parseFloat(v)>=se)){j.setError("amount_paid","For partial payments, the amount paid must be greater than 0 and less than the total.");return}j.post("/sales-transactions",{onSuccess:()=>re()})},className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"mb-1 block font-medium",children:["Transaction Date",s.jsx(Ie,{type:"date",value:j.data.transaction_date,onChange:m=>j.setData("transaction_date",m.target.value),required:!0})]}),j.errors.transaction_date&&s.jsx("div",{className:"mt-1 text-xs text-red-500",children:j.errors.transaction_date})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"mb-1 block font-medium",children:["Customer ",(B==="credit"||B==="partial")&&s.jsx("span",{className:"text-red-500",children:"*"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(En,{value:j.data.customer_id?String(j.data.customer_id):"none",onValueChange:m=>{m==="none"?j.setData("customer_id",null):(j.setData("customer_id",m),j.setData("customer_name",""))},children:[s.jsx(Tn,{className:B==="credit"||B==="partial"?"border-orange-500":"",children:s.jsx(Rn,{placeholder:"Select customer"})}),s.jsxs(Ln,{children:[B==="cash"&&s.jsx(Fe,{value:"none",children:"-- No customer selected --"}),_e.map(m=>s.jsx(Fe,{value:String(m.id),children:m.name},m.id))]})]}),!j.data.customer_id&&B==="cash"&&s.jsx(Ie,{type:"text",placeholder:"Or enter customer name",value:j.data.customer_name,onChange:m=>j.setData("customer_name",m.target.value)})]})]}),(B==="credit"||B==="partial")&&!j.data.customer_id&&s.jsx("div",{className:"mt-2 rounded-md bg-orange-50 p-3 border border-orange-200",children:s.jsxs("div",{className:"flex",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("svg",{className:"h-5 w-5 text-orange-400",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("h3",{className:"text-sm font-medium text-orange-800",children:"Registered Customer Required"}),s.jsx("div",{className:"mt-1 text-xs text-orange-700",children:"Credit and partial sales require selecting a registered customer to track who owes money."})]})]})}),j.errors.customer_id&&s.jsx("div",{className:"mt-1 text-xs text-red-500",children:j.errors.customer_id})]}),s.jsxs("div",{children:[s.jsx("label",{className:"mb-1 block font-medium",children:"Items"}),s.jsxs("div",{className:"max-h-64 space-y-2 overflow-y-auto",children:[J.map((m,T)=>{const I=pe(m.product_id),Z=(I==null?void 0:I.lines_per_carton)||1;return s.jsxs("div",{className:"grid w-full grid-cols-4 items-end gap-2",children:[s.jsx("div",{className:"flex-1",children:s.jsxs(En,{value:m.product_id,onValueChange:M=>ae(T,"product_id",M),children:[s.jsx(Tn,{children:s.jsx(Rn,{placeholder:"Product"})}),s.jsx(Ln,{children:l.map(M=>s.jsx(Fe,{value:String(M.id),children:M.name},M.id))})]})}),Z>1?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"",children:s.jsx(Ie,{type:"number",min:"0",placeholder:"Cartons",value:m.cartons||"",onChange:M=>ae(T,"cartons",M.target.value)})}),s.jsx("div",{className:"",children:s.jsxs(En,{value:m.lines!==void 0?String(m.lines):"",onValueChange:M=>ae(T,"lines",M),children:[s.jsx(Tn,{children:s.jsx(Rn,{placeholder:"Lines"})}),s.jsx(Ln,{children:[...Array(Z).keys()].map(M=>s.jsx(Fe,{value:String(M+1),children:M+1},M+1))})]})})]}):s.jsx("div",{className:"",children:s.jsx(Ie,{type:"number",min:"1",placeholder:"Qty",value:m.qty||"",onChange:M=>ae(T,"qty",M.target.value)})}),s.jsx("div",{className:"",children:s.jsx(Ie,{type:"number",min:"0",step:"0.01",placeholder:"Unit Price",value:m.unit_selling_price||"",onChange:M=>ae(T,"unit_selling_price",M.target.value)})}),s.jsx("div",{className:"",children:s.jsx(Ie,{type:"number",min:"0",step:"0.01",placeholder:"Total",value:m.total||"",readOnly:!0})}),s.jsx(je,{type:"button",variant:"destructive",size:"sm",className:"text-white",onClick:()=>E(T),disabled:J.length===1,children:"Remove"})]},T)}),s.jsx(je,{type:"button",variant:"outline",size:"sm",onClick:w,children:"Add Item"})]}),j.errors.items&&s.jsx("div",{className:"mt-1 text-xs text-red-500",children:j.errors.items})]}),s.jsxs("div",{className:"text-lg font-bold",children:["Total: GH₵",se.toFixed(2)]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("label",{className:"mb-1 block font-medium",children:"Payment Type"}),s.jsxs(En,{value:B,onValueChange:Y,children:[s.jsx(Tn,{children:s.jsx(Rn,{placeholder:"Select payment type"})}),s.jsxs(Ln,{children:[s.jsx(Fe,{value:"cash",children:"Cash"}),s.jsx(Fe,{value:"credit",children:"Credit"}),s.jsx(Fe,{value:"partial",children:"Partial"})]})]}),j.errors.payment_type&&s.jsx("div",{className:"mt-1 text-xs text-red-500",children:j.errors.payment_type})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx("label",{className:"mb-1 block font-medium",children:"Amount Paid"}),s.jsx(Ie,{type:"number",min:B==="partial"?1:0,max:B==="partial"?se-1:se,step:"0.01",value:v,onChange:m=>H(m.target.value),disabled:B==="credit"||B==="cash"}),j.errors.amount_paid&&s.jsx(Fu,{message:j.errors.amount_paid,className:"mt-2"})]}),B!=="cash"&&s.jsxs("div",{className:"flex-1",children:[s.jsx("label",{className:"mb-1 block font-medium",children:"Due Date"}),s.jsx(Ie,{type:"date",value:ve,onChange:m=>oe(m.target.value)}),j.errors.due_date&&s.jsx("div",{className:"mt-1 text-xs text-red-500",children:j.errors.due_date})]})]}),s.jsxs(Mu,{children:[s.jsx(je,{type:"button",variant:"secondary",onClick:re,children:"Cancel"}),s.jsx(je,{type:"submit",children:j.processing?"Saving..":"Save"})]})]})]})})}function Kx({open:D,onClose:re,transaction:l,products:_e,customers:j}){const[J,K]=V.useState([]),v=Lu({customer_id:"",customer_name:"",payment_type:"cash",amount_paid:"",items:[]});V.useEffect(()=>{if(D&&l){const w=l.sale_items.map(H=>{const Y=_e.find(_n=>_n.name===H.product),m=(Y==null?void 0:Y.lines_per_carton)||1;let T=0,I=0,Z=0;const M=String(H.quantity),ye=M.match(/(\d+)C(\d+)L/),O=M.match(/(\d+)C$/),fe=M.match(/^(\d+)L$/);return ye?(T=parseInt(ye[1])||0,I=parseInt(ye[2])||0,Z=T*m+I):O?(T=parseInt(O[1])||0,Z=T*m):fe?(I=parseInt(fe[1])||0,Z=I):(Z=parseInt(M)||0,m>1&&(T=Math.floor(Z/m),I=Z%m)),{product_id:Y?String(Y.id):"",product_name:H.product,cartons:T,lines:I,qty:Z,unit_selling_price:parseFloat(H.unit_selling_price)||0,total:parseFloat(H.total)||0}});K(w.length>0?w:[{product_id:"",qty:"",unit_selling_price:"",total:"",cartons:0,lines:0}]);const E=j.find(H=>H.name===l.customer);v.setData({customer_id:E?String(E.id):"",customer_name:E?"":l.customer||"",payment_type:l.payment_type.toLowerCase(),amount_paid:String(l.amount_paid),items:w})}},[D,l]),V.useEffect(()=>{v.setData("items",J)},[J]);const k=J.reduce((w,E)=>w+(parseFloat(E.total)||0),0);V.useEffect(()=>{v.data.payment_type==="cash"?v.setData("amount_paid",k.toString()):v.data.payment_type==="credit"&&v.setData("amount_paid","0")},[v.data.payment_type,k]);const ve=w=>_e.find(E=>String(E.id)===String(w))||null,oe=(w,E,H)=>{const Y=J.map((m,T)=>{if(T!==w)return m;let I={...m,[E]:H};const Z=ve(I.product_id);if(!Z)return I;const M=Z.lines_per_carton||1;let ye=0;if(M>1){const O=parseInt(I.cartons)||0,fe=parseInt(I.lines)||0;ye=O*M+fe;const Fn=(parseFloat(I.unit_selling_price)||0)/M;I.qty=ye,I.total=(Fn*ye).toFixed(2)}else{const O=parseInt(I.qty)||0,fe=parseFloat(I.unit_selling_price)||0;I.qty=O,I.total=(fe*O).toFixed(2),I.cartons=void 0,I.lines=void 0}return I});K(Y)},B=()=>{K([...J,{product_id:"",qty:"",unit_selling_price:"",total:"",cartons:0,lines:0}])},be=w=>{J.length!==1&&K(J.filter((E,H)=>H!==w))},se=w=>{v.setData("payment_type",w),v.clearErrors("amount_paid"),(w==="credit"||w==="partial")&&!v.data.customer_id&&v.setData("customer_name","")},pe=w=>{v.setData("amount_paid",w),v.clearErrors("amount_paid")},ae=w=>{w.preventDefault();const E=parseFloat(v.data.amount_paid),H=v.data.payment_type;if(H==="cash"&&E!==k){v.setError("amount_paid","For cash payments, the amount paid must equal the total.");return}if(H==="credit"&&E!==0){v.setError("amount_paid","For credit sales, the amount paid must be 0.");return}if(H==="partial"&&(E<=0||E>=k)){v.setError("amount_paid","For partial payments, amount must be greater than 0 and less than total.");return}v.put(route("sales-transactions.update",l.id),{onSuccess:()=>{re()}})};return l?s.jsx(Ou,{open:D,onOpenChange:re,children:s.jsxs(Pu,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[s.jsx(Du,{children:s.jsxs(Wu,{className:"flex items-center gap-2",children:[s.jsx(Uu,{className:"h-5 w-5"}),"Edit Sale: ",l.id]})}),s.jsxs("form",{onSubmit:ae,className:"space-y-4",children:[s.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Date:"}),s.jsx("span",{className:"font-medium",children:l.date})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Original Total:"}),s.jsxs("span",{className:"font-medium",children:["GH₵",parseFloat(l.total).toFixed(2)]})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"mb-1 block font-medium",children:["Customer ",(v.data.payment_type==="credit"||v.data.payment_type==="partial")&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(En,{value:v.data.customer_id?String(v.data.customer_id):"none",onValueChange:w=>{w==="none"?v.setData("customer_id",""):(v.setData("customer_id",w),v.setData("customer_name",""))},children:[s.jsx(Tn,{className:(v.data.payment_type==="credit"||v.data.payment_type==="partial")&&!v.data.customer_id?"border-orange-500":"",children:s.jsx(Rn,{placeholder:"Select customer"})}),s.jsxs(Ln,{children:[v.data.payment_type==="cash"&&s.jsx(Fe,{value:"none",children:"-- No customer selected --"}),j.map(w=>s.jsx(Fe,{value:String(w.id),children:w.name},w.id))]})]}),!v.data.customer_id&&v.data.payment_type==="cash"&&s.jsx(Ie,{type:"text",placeholder:"Or enter customer name",value:v.data.customer_name,onChange:w=>v.setData("customer_name",w.target.value)})]}),(v.data.payment_type==="credit"||v.data.payment_type==="partial")&&!v.data.customer_id&&s.jsx("div",{className:"mt-2 rounded-md bg-orange-50 p-3 border border-orange-200",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("svg",{className:"h-5 w-5 text-orange-400 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),s.jsx("span",{className:"text-sm text-orange-800",children:"Credit/partial sales require a registered customer."})]})}),v.errors.customer_id&&s.jsx("div",{className:"mt-1 text-xs text-red-500",children:v.errors.customer_id})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("label",{className:"font-medium",children:"Items"}),s.jsxs(je,{type:"button",variant:"outline",size:"sm",onClick:B,children:[s.jsx(Dx,{className:"h-4 w-4 mr-1"}),"Add Item"]})]}),s.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:J.map((w,E)=>{const H=ve(w.product_id),Y=(H==null?void 0:H.lines_per_carton)||1;return s.jsxs("div",{className:"p-3 border rounded-lg bg-gray-50 space-y-2",children:[s.jsxs("div",{className:"grid grid-cols-12 gap-2 items-end",children:[s.jsxs("div",{className:"col-span-5",children:[s.jsx("label",{className:"text-xs text-gray-600 mb-1 block",children:"Product"}),s.jsxs(En,{value:w.product_id,onValueChange:m=>oe(E,"product_id",m),children:[s.jsx(Tn,{children:s.jsx(Rn,{placeholder:"Select product"})}),s.jsx(Ln,{children:_e.map(m=>s.jsx(Fe,{value:String(m.id),children:m.name},m.id))})]})]}),Y>1?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"col-span-2",children:[s.jsx("label",{className:"text-xs text-gray-600 mb-1 block",children:"Cartons"}),s.jsx(Ie,{type:"number",min:"0",value:w.cartons||"",onChange:m=>oe(E,"cartons",m.target.value)})]}),s.jsxs("div",{className:"col-span-2",children:[s.jsx("label",{className:"text-xs text-gray-600 mb-1 block",children:"Lines"}),s.jsxs(En,{value:w.lines!==void 0?String(w.lines):"",onValueChange:m=>oe(E,"lines",m),children:[s.jsx(Tn,{children:s.jsx(Rn,{placeholder:"Lines"})}),s.jsx(Ln,{children:[...Array(Y).keys()].map(m=>s.jsx(Fe,{value:String(m),children:m},m))})]})]})]}):s.jsxs("div",{className:"col-span-4",children:[s.jsx("label",{className:"text-xs text-gray-600 mb-1 block",children:"Quantity"}),s.jsx(Ie,{type:"number",min:"1",value:w.qty||"",onChange:m=>oe(E,"qty",m.target.value)})]}),s.jsxs("div",{className:"col-span-3",children:[s.jsx("label",{className:"text-xs text-gray-600 mb-1 block",children:"Unit Price"}),s.jsx(Ie,{type:"number",min:"0",step:"0.01",value:w.unit_selling_price||"",onChange:m=>oe(E,"unit_selling_price",m.target.value)})]}),s.jsx("br",{}),s.jsxs("div",{className:"col-span-4",children:[s.jsx("label",{className:"text-xs text-gray-600 mb-1 block",children:"Total"}),s.jsx(Ie,{type:"text",value:`GH₵${parseFloat(w.total||0).toFixed(2)}`,readOnly:!0,className:"bg-gray-100"})]}),s.jsx("div",{className:"col-span-1 flex items-end",children:s.jsx(je,{type:"button",variant:"ghost",size:"sm",onClick:()=>be(E),disabled:J.length===1,className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:s.jsx(Wx,{className:"h-4 w-4"})})})]}),H&&Y>1&&s.jsxs("div",{className:"text-xs text-gray-500",children:[w.cartons||0," cartons + ",w.lines||0," lines = ",w.qty||0," total lines (",Y," lines/carton)"]})]},E)})}),v.errors.items&&s.jsx("div",{className:"mt-1 text-xs text-red-500",children:v.errors.items})]}),s.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg flex justify-between items-center",children:[s.jsx("span",{className:"font-semibold text-blue-800",children:"New Total:"}),s.jsxs("span",{className:"text-2xl font-bold text-blue-900",children:["GH₵",k.toFixed(2)]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"mb-1 block font-medium",children:"Payment Type"}),s.jsxs(En,{value:v.data.payment_type,onValueChange:se,children:[s.jsx(Tn,{children:s.jsx(Rn,{placeholder:"Select payment type"})}),s.jsxs(Ln,{children:[s.jsx(Fe,{value:"cash",children:"Cash"}),s.jsx(Fe,{value:"credit",children:"Credit"}),s.jsx(Fe,{value:"partial",children:"Partial"})]})]}),v.errors.payment_type&&s.jsx("div",{className:"mt-1 text-xs text-red-500",children:v.errors.payment_type})]}),s.jsxs("div",{children:[s.jsx("label",{className:"mb-1 block font-medium",children:"Amount Paid"}),s.jsx(Ie,{type:"number",min:"0",max:k,step:"0.01",value:v.data.amount_paid,onChange:w=>pe(w.target.value)}),v.errors.amount_paid&&s.jsx(Fu,{message:v.errors.amount_paid,className:"mt-2"})]})]}),v.data.payment_type!=="cash"&&s.jsx("div",{className:"bg-orange-50 p-3 rounded-lg",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-orange-800",children:"Amount Owed:"}),s.jsxs("span",{className:"font-bold text-orange-900",children:["GH₵",Math.max(0,k-parseFloat(v.data.amount_paid||0)).toFixed(2)]})]})}),s.jsxs(Mu,{className:"gap-2",children:[s.jsx(je,{type:"button",variant:"outline",onClick:re,children:"Cancel"}),s.jsx(je,{type:"submit",disabled:v.processing,children:v.processing?"Saving...":"Save Changes"})]})]})]})}):null}var Et={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var $x=Et.exports,Ru;function kx(){return Ru||(Ru=1,(function(D,re){(function(){var l,_e="4.17.21",j=200,J="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",K="Expected a function",v="Invalid `variable` option passed into `_.template`",k="__lodash_hash_undefined__",ve=500,oe="__lodash_placeholder__",B=1,be=2,se=4,pe=1,ae=2,w=1,E=2,H=4,Y=8,m=16,T=32,I=64,Z=128,M=256,ye=512,O=30,fe="...",_n=800,Fn=16,On=1,at=2,Zi=3,un=1/0,vn=9007199254740991,Gu=17976931348623157e292,Tt=NaN,tn=4294967295,Hu=tn-1,zu=tn>>>1,Ku=[["ary",Z],["bind",w],["bindKey",E],["curry",Y],["curryRight",m],["flip",ye],["partial",T],["partialRight",I],["rearg",M]],zn="[object Arguments]",Rt="[object Array]",$u="[object AsyncFunction]",ut="[object Boolean]",lt="[object Date]",ku="[object DOMException]",Lt="[object Error]",Ft="[object Function]",Xi="[object GeneratorFunction]",Xe="[object Map]",ct="[object Number]",Yu="[object Null]",ln="[object Object]",Ji="[object Promise]",Zu="[object Proxy]",ot="[object RegExp]",Je="[object Set]",ft="[object String]",Ot="[object Symbol]",Xu="[object Undefined]",dt="[object WeakMap]",Ju="[object WeakSet]",ht="[object ArrayBuffer]",Kn="[object DataView]",Ir="[object Float32Array]",Er="[object Float64Array]",Tr="[object Int8Array]",Rr="[object Int16Array]",Lr="[object Int32Array]",Fr="[object Uint8Array]",Or="[object Uint8ClampedArray]",Pr="[object Uint16Array]",Dr="[object Uint32Array]",Qu=/\b__p \+= '';/g,Vu=/\b(__p \+=) '' \+/g,el=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Qi=/&(?:amp|lt|gt|quot|#39);/g,Vi=/[&<>"']/g,nl=RegExp(Qi.source),tl=RegExp(Vi.source),rl=/<%-([\s\S]+?)%>/g,il=/<%([\s\S]+?)%>/g,es=/<%=([\s\S]+?)%>/g,sl=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,al=/^\w*$/,ul=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Wr=/[\\^$.*+?()[\]{}|]/g,ll=RegExp(Wr.source),Mr=/^\s+/,cl=/\s/,ol=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,fl=/\{\n\/\* \[wrapped with (.+)\] \*/,dl=/,? & /,hl=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,pl=/[()=,{}\[\]\/\s]/,xl=/\\(\\)?/g,gl=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ns=/\w*$/,ml=/^[-+]0x[0-9a-f]+$/i,_l=/^0b[01]+$/i,vl=/^\[object .+?Constructor\]$/,bl=/^0o[0-7]+$/i,yl=/^(?:0|[1-9]\d*)$/,wl=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Pt=/($^)/,Nl=/['\n\r\u2028\u2029\\]/g,Dt="\\ud800-\\udfff",jl="\\u0300-\\u036f",Al="\\ufe20-\\ufe2f",Cl="\\u20d0-\\u20ff",ts=jl+Al+Cl,rs="\\u2700-\\u27bf",is="a-z\\xdf-\\xf6\\xf8-\\xff",Sl="\\xac\\xb1\\xd7\\xf7",Il="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",El="\\u2000-\\u206f",Tl=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ss="A-Z\\xc0-\\xd6\\xd8-\\xde",as="\\ufe0e\\ufe0f",us=Sl+Il+El+Tl,Br="['’]",Rl="["+Dt+"]",ls="["+us+"]",Wt="["+ts+"]",cs="\\d+",Ll="["+rs+"]",os="["+is+"]",fs="[^"+Dt+us+cs+rs+is+ss+"]",Ur="\\ud83c[\\udffb-\\udfff]",Fl="(?:"+Wt+"|"+Ur+")",ds="[^"+Dt+"]",qr="(?:\\ud83c[\\udde6-\\uddff]){2}",Gr="[\\ud800-\\udbff][\\udc00-\\udfff]",$n="["+ss+"]",hs="\\u200d",ps="(?:"+os+"|"+fs+")",Ol="(?:"+$n+"|"+fs+")",xs="(?:"+Br+"(?:d|ll|m|re|s|t|ve))?",gs="(?:"+Br+"(?:D|LL|M|RE|S|T|VE))?",ms=Fl+"?",_s="["+as+"]?",Pl="(?:"+hs+"(?:"+[ds,qr,Gr].join("|")+")"+_s+ms+")*",Dl="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Wl="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",vs=_s+ms+Pl,Ml="(?:"+[Ll,qr,Gr].join("|")+")"+vs,Bl="(?:"+[ds+Wt+"?",Wt,qr,Gr,Rl].join("|")+")",Ul=RegExp(Br,"g"),ql=RegExp(Wt,"g"),Hr=RegExp(Ur+"(?="+Ur+")|"+Bl+vs,"g"),Gl=RegExp([$n+"?"+os+"+"+xs+"(?="+[ls,$n,"$"].join("|")+")",Ol+"+"+gs+"(?="+[ls,$n+ps,"$"].join("|")+")",$n+"?"+ps+"+"+xs,$n+"+"+gs,Wl,Dl,cs,Ml].join("|"),"g"),Hl=RegExp("["+hs+Dt+ts+as+"]"),zl=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Kl=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],$l=-1,ne={};ne[Ir]=ne[Er]=ne[Tr]=ne[Rr]=ne[Lr]=ne[Fr]=ne[Or]=ne[Pr]=ne[Dr]=!0,ne[zn]=ne[Rt]=ne[ht]=ne[ut]=ne[Kn]=ne[lt]=ne[Lt]=ne[Ft]=ne[Xe]=ne[ct]=ne[ln]=ne[ot]=ne[Je]=ne[ft]=ne[dt]=!1;var ee={};ee[zn]=ee[Rt]=ee[ht]=ee[Kn]=ee[ut]=ee[lt]=ee[Ir]=ee[Er]=ee[Tr]=ee[Rr]=ee[Lr]=ee[Xe]=ee[ct]=ee[ln]=ee[ot]=ee[Je]=ee[ft]=ee[Ot]=ee[Fr]=ee[Or]=ee[Pr]=ee[Dr]=!0,ee[Lt]=ee[Ft]=ee[dt]=!1;var kl={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},Yl={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Zl={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Xl={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Jl=parseFloat,Ql=parseInt,bs=typeof Nr=="object"&&Nr&&Nr.Object===Object&&Nr,Vl=typeof self=="object"&&self&&self.Object===Object&&self,ge=bs||Vl||Function("return this")(),zr=re&&!re.nodeType&&re,Pn=zr&&!0&&D&&!D.nodeType&&D,ys=Pn&&Pn.exports===zr,Kr=ys&&bs.process,Ue=(function(){try{var f=Pn&&Pn.require&&Pn.require("util").types;return f||Kr&&Kr.binding&&Kr.binding("util")}catch{}})(),ws=Ue&&Ue.isArrayBuffer,Ns=Ue&&Ue.isDate,js=Ue&&Ue.isMap,As=Ue&&Ue.isRegExp,Cs=Ue&&Ue.isSet,Ss=Ue&&Ue.isTypedArray;function Oe(f,p,h){switch(h.length){case 0:return f.call(p);case 1:return f.call(p,h[0]);case 2:return f.call(p,h[0],h[1]);case 3:return f.call(p,h[0],h[1],h[2])}return f.apply(p,h)}function ec(f,p,h,y){for(var R=-1,z=f==null?0:f.length;++R<z;){var de=f[R];p(y,de,h(de),f)}return y}function qe(f,p){for(var h=-1,y=f==null?0:f.length;++h<y&&p(f[h],h,f)!==!1;);return f}function nc(f,p){for(var h=f==null?0:f.length;h--&&p(f[h],h,f)!==!1;);return f}function Is(f,p){for(var h=-1,y=f==null?0:f.length;++h<y;)if(!p(f[h],h,f))return!1;return!0}function bn(f,p){for(var h=-1,y=f==null?0:f.length,R=0,z=[];++h<y;){var de=f[h];p(de,h,f)&&(z[R++]=de)}return z}function Mt(f,p){var h=f==null?0:f.length;return!!h&&kn(f,p,0)>-1}function $r(f,p,h){for(var y=-1,R=f==null?0:f.length;++y<R;)if(h(p,f[y]))return!0;return!1}function te(f,p){for(var h=-1,y=f==null?0:f.length,R=Array(y);++h<y;)R[h]=p(f[h],h,f);return R}function yn(f,p){for(var h=-1,y=p.length,R=f.length;++h<y;)f[R+h]=p[h];return f}function kr(f,p,h,y){var R=-1,z=f==null?0:f.length;for(y&&z&&(h=f[++R]);++R<z;)h=p(h,f[R],R,f);return h}function tc(f,p,h,y){var R=f==null?0:f.length;for(y&&R&&(h=f[--R]);R--;)h=p(h,f[R],R,f);return h}function Yr(f,p){for(var h=-1,y=f==null?0:f.length;++h<y;)if(p(f[h],h,f))return!0;return!1}var rc=Zr("length");function ic(f){return f.split("")}function sc(f){return f.match(hl)||[]}function Es(f,p,h){var y;return h(f,function(R,z,de){if(p(R,z,de))return y=z,!1}),y}function Bt(f,p,h,y){for(var R=f.length,z=h+(y?1:-1);y?z--:++z<R;)if(p(f[z],z,f))return z;return-1}function kn(f,p,h){return p===p?mc(f,p,h):Bt(f,Ts,h)}function ac(f,p,h,y){for(var R=h-1,z=f.length;++R<z;)if(y(f[R],p))return R;return-1}function Ts(f){return f!==f}function Rs(f,p){var h=f==null?0:f.length;return h?Jr(f,p)/h:Tt}function Zr(f){return function(p){return p==null?l:p[f]}}function Xr(f){return function(p){return f==null?l:f[p]}}function Ls(f,p,h,y,R){return R(f,function(z,de,Q){h=y?(y=!1,z):p(h,z,de,Q)}),h}function uc(f,p){var h=f.length;for(f.sort(p);h--;)f[h]=f[h].value;return f}function Jr(f,p){for(var h,y=-1,R=f.length;++y<R;){var z=p(f[y]);z!==l&&(h=h===l?z:h+z)}return h}function Qr(f,p){for(var h=-1,y=Array(f);++h<f;)y[h]=p(h);return y}function lc(f,p){return te(p,function(h){return[h,f[h]]})}function Fs(f){return f&&f.slice(0,Ws(f)+1).replace(Mr,"")}function Pe(f){return function(p){return f(p)}}function Vr(f,p){return te(p,function(h){return f[h]})}function pt(f,p){return f.has(p)}function Os(f,p){for(var h=-1,y=f.length;++h<y&&kn(p,f[h],0)>-1;);return h}function Ps(f,p){for(var h=f.length;h--&&kn(p,f[h],0)>-1;);return h}function cc(f,p){for(var h=f.length,y=0;h--;)f[h]===p&&++y;return y}var oc=Xr(kl),fc=Xr(Yl);function dc(f){return"\\"+Xl[f]}function hc(f,p){return f==null?l:f[p]}function Yn(f){return Hl.test(f)}function pc(f){return zl.test(f)}function xc(f){for(var p,h=[];!(p=f.next()).done;)h.push(p.value);return h}function ei(f){var p=-1,h=Array(f.size);return f.forEach(function(y,R){h[++p]=[R,y]}),h}function Ds(f,p){return function(h){return f(p(h))}}function wn(f,p){for(var h=-1,y=f.length,R=0,z=[];++h<y;){var de=f[h];(de===p||de===oe)&&(f[h]=oe,z[R++]=h)}return z}function Ut(f){var p=-1,h=Array(f.size);return f.forEach(function(y){h[++p]=y}),h}function gc(f){var p=-1,h=Array(f.size);return f.forEach(function(y){h[++p]=[y,y]}),h}function mc(f,p,h){for(var y=h-1,R=f.length;++y<R;)if(f[y]===p)return y;return-1}function _c(f,p,h){for(var y=h+1;y--;)if(f[y]===p)return y;return y}function Zn(f){return Yn(f)?bc(f):rc(f)}function Qe(f){return Yn(f)?yc(f):ic(f)}function Ws(f){for(var p=f.length;p--&&cl.test(f.charAt(p)););return p}var vc=Xr(Zl);function bc(f){for(var p=Hr.lastIndex=0;Hr.test(f);)++p;return p}function yc(f){return f.match(Hr)||[]}function wc(f){return f.match(Gl)||[]}var Nc=(function f(p){p=p==null?ge:Xn.defaults(ge.Object(),p,Xn.pick(ge,Kl));var h=p.Array,y=p.Date,R=p.Error,z=p.Function,de=p.Math,Q=p.Object,ni=p.RegExp,jc=p.String,Ge=p.TypeError,qt=h.prototype,Ac=z.prototype,Jn=Q.prototype,Gt=p["__core-js_shared__"],Ht=Ac.toString,X=Jn.hasOwnProperty,Cc=0,Ms=(function(){var e=/[^.]+$/.exec(Gt&&Gt.keys&&Gt.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""})(),zt=Jn.toString,Sc=Ht.call(Q),Ic=ge._,Ec=ni("^"+Ht.call(X).replace(Wr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Kt=ys?p.Buffer:l,Nn=p.Symbol,$t=p.Uint8Array,Bs=Kt?Kt.allocUnsafe:l,kt=Ds(Q.getPrototypeOf,Q),Us=Q.create,qs=Jn.propertyIsEnumerable,Yt=qt.splice,Gs=Nn?Nn.isConcatSpreadable:l,xt=Nn?Nn.iterator:l,Dn=Nn?Nn.toStringTag:l,Zt=(function(){try{var e=qn(Q,"defineProperty");return e({},"",{}),e}catch{}})(),Tc=p.clearTimeout!==ge.clearTimeout&&p.clearTimeout,Rc=y&&y.now!==ge.Date.now&&y.now,Lc=p.setTimeout!==ge.setTimeout&&p.setTimeout,Xt=de.ceil,Jt=de.floor,ti=Q.getOwnPropertySymbols,Fc=Kt?Kt.isBuffer:l,Hs=p.isFinite,Oc=qt.join,Pc=Ds(Q.keys,Q),he=de.max,we=de.min,Dc=y.now,Wc=p.parseInt,zs=de.random,Mc=qt.reverse,ri=qn(p,"DataView"),gt=qn(p,"Map"),ii=qn(p,"Promise"),Qn=qn(p,"Set"),mt=qn(p,"WeakMap"),_t=qn(Q,"create"),Qt=mt&&new mt,Vn={},Bc=Gn(ri),Uc=Gn(gt),qc=Gn(ii),Gc=Gn(Qn),Hc=Gn(mt),Vt=Nn?Nn.prototype:l,vt=Vt?Vt.valueOf:l,Ks=Vt?Vt.toString:l;function a(e){if(ue(e)&&!L(e)&&!(e instanceof q)){if(e instanceof He)return e;if(X.call(e,"__wrapped__"))return $a(e)}return new He(e)}var et=(function(){function e(){}return function(n){if(!ie(n))return{};if(Us)return Us(n);e.prototype=n;var t=new e;return e.prototype=l,t}})();function er(){}function He(e,n){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!n,this.__index__=0,this.__values__=l}a.templateSettings={escape:rl,evaluate:il,interpolate:es,variable:"",imports:{_:a}},a.prototype=er.prototype,a.prototype.constructor=a,He.prototype=et(er.prototype),He.prototype.constructor=He;function q(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=tn,this.__views__=[]}function zc(){var e=new q(this.__wrapped__);return e.__actions__=Ee(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Ee(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Ee(this.__views__),e}function Kc(){if(this.__filtered__){var e=new q(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function $c(){var e=this.__wrapped__.value(),n=this.__dir__,t=L(e),r=n<0,i=t?e.length:0,u=af(0,i,this.__views__),c=u.start,o=u.end,d=o-c,x=r?o:c-1,g=this.__iteratees__,_=g.length,b=0,N=we(d,this.__takeCount__);if(!t||!r&&i==d&&N==d)return xa(e,this.__actions__);var C=[];e:for(;d--&&b<N;){x+=n;for(var P=-1,S=e[x];++P<_;){var U=g[P],G=U.iteratee,Me=U.type,Se=G(S);if(Me==at)S=Se;else if(!Se){if(Me==On)continue e;break e}}C[b++]=S}return C}q.prototype=et(er.prototype),q.prototype.constructor=q;function Wn(e){var n=-1,t=e==null?0:e.length;for(this.clear();++n<t;){var r=e[n];this.set(r[0],r[1])}}function kc(){this.__data__=_t?_t(null):{},this.size=0}function Yc(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n}function Zc(e){var n=this.__data__;if(_t){var t=n[e];return t===k?l:t}return X.call(n,e)?n[e]:l}function Xc(e){var n=this.__data__;return _t?n[e]!==l:X.call(n,e)}function Jc(e,n){var t=this.__data__;return this.size+=this.has(e)?0:1,t[e]=_t&&n===l?k:n,this}Wn.prototype.clear=kc,Wn.prototype.delete=Yc,Wn.prototype.get=Zc,Wn.prototype.has=Xc,Wn.prototype.set=Jc;function cn(e){var n=-1,t=e==null?0:e.length;for(this.clear();++n<t;){var r=e[n];this.set(r[0],r[1])}}function Qc(){this.__data__=[],this.size=0}function Vc(e){var n=this.__data__,t=nr(n,e);if(t<0)return!1;var r=n.length-1;return t==r?n.pop():Yt.call(n,t,1),--this.size,!0}function eo(e){var n=this.__data__,t=nr(n,e);return t<0?l:n[t][1]}function no(e){return nr(this.__data__,e)>-1}function to(e,n){var t=this.__data__,r=nr(t,e);return r<0?(++this.size,t.push([e,n])):t[r][1]=n,this}cn.prototype.clear=Qc,cn.prototype.delete=Vc,cn.prototype.get=eo,cn.prototype.has=no,cn.prototype.set=to;function on(e){var n=-1,t=e==null?0:e.length;for(this.clear();++n<t;){var r=e[n];this.set(r[0],r[1])}}function ro(){this.size=0,this.__data__={hash:new Wn,map:new(gt||cn),string:new Wn}}function io(e){var n=hr(this,e).delete(e);return this.size-=n?1:0,n}function so(e){return hr(this,e).get(e)}function ao(e){return hr(this,e).has(e)}function uo(e,n){var t=hr(this,e),r=t.size;return t.set(e,n),this.size+=t.size==r?0:1,this}on.prototype.clear=ro,on.prototype.delete=io,on.prototype.get=so,on.prototype.has=ao,on.prototype.set=uo;function Mn(e){var n=-1,t=e==null?0:e.length;for(this.__data__=new on;++n<t;)this.add(e[n])}function lo(e){return this.__data__.set(e,k),this}function co(e){return this.__data__.has(e)}Mn.prototype.add=Mn.prototype.push=lo,Mn.prototype.has=co;function Ve(e){var n=this.__data__=new cn(e);this.size=n.size}function oo(){this.__data__=new cn,this.size=0}function fo(e){var n=this.__data__,t=n.delete(e);return this.size=n.size,t}function ho(e){return this.__data__.get(e)}function po(e){return this.__data__.has(e)}function xo(e,n){var t=this.__data__;if(t instanceof cn){var r=t.__data__;if(!gt||r.length<j-1)return r.push([e,n]),this.size=++t.size,this;t=this.__data__=new on(r)}return t.set(e,n),this.size=t.size,this}Ve.prototype.clear=oo,Ve.prototype.delete=fo,Ve.prototype.get=ho,Ve.prototype.has=po,Ve.prototype.set=xo;function $s(e,n){var t=L(e),r=!t&&Hn(e),i=!t&&!r&&In(e),u=!t&&!r&&!i&&it(e),c=t||r||i||u,o=c?Qr(e.length,jc):[],d=o.length;for(var x in e)(n||X.call(e,x))&&!(c&&(x=="length"||i&&(x=="offset"||x=="parent")||u&&(x=="buffer"||x=="byteLength"||x=="byteOffset")||pn(x,d)))&&o.push(x);return o}function ks(e){var n=e.length;return n?e[xi(0,n-1)]:l}function go(e,n){return pr(Ee(e),Bn(n,0,e.length))}function mo(e){return pr(Ee(e))}function si(e,n,t){(t!==l&&!en(e[n],t)||t===l&&!(n in e))&&fn(e,n,t)}function bt(e,n,t){var r=e[n];(!(X.call(e,n)&&en(r,t))||t===l&&!(n in e))&&fn(e,n,t)}function nr(e,n){for(var t=e.length;t--;)if(en(e[t][0],n))return t;return-1}function _o(e,n,t,r){return jn(e,function(i,u,c){n(r,i,t(i),c)}),r}function Ys(e,n){return e&&sn(n,xe(n),e)}function vo(e,n){return e&&sn(n,Re(n),e)}function fn(e,n,t){n=="__proto__"&&Zt?Zt(e,n,{configurable:!0,enumerable:!0,value:t,writable:!0}):e[n]=t}function ai(e,n){for(var t=-1,r=n.length,i=h(r),u=e==null;++t<r;)i[t]=u?l:Ui(e,n[t]);return i}function Bn(e,n,t){return e===e&&(t!==l&&(e=e<=t?e:t),n!==l&&(e=e>=n?e:n)),e}function ze(e,n,t,r,i,u){var c,o=n&B,d=n&be,x=n&se;if(t&&(c=i?t(e,r,i,u):t(e)),c!==l)return c;if(!ie(e))return e;var g=L(e);if(g){if(c=lf(e),!o)return Ee(e,c)}else{var _=Ne(e),b=_==Ft||_==Xi;if(In(e))return _a(e,o);if(_==ln||_==zn||b&&!i){if(c=d||b?{}:Wa(e),!o)return d?Xo(e,vo(c,e)):Zo(e,Ys(c,e))}else{if(!ee[_])return i?e:{};c=cf(e,_,o)}}u||(u=new Ve);var N=u.get(e);if(N)return N;u.set(e,c),du(e)?e.forEach(function(S){c.add(ze(S,n,t,S,e,u))}):ou(e)&&e.forEach(function(S,U){c.set(U,ze(S,n,t,U,e,u))});var C=x?d?Ci:Ai:d?Re:xe,P=g?l:C(e);return qe(P||e,function(S,U){P&&(U=S,S=e[U]),bt(c,U,ze(S,n,t,U,e,u))}),c}function bo(e){var n=xe(e);return function(t){return Zs(t,e,n)}}function Zs(e,n,t){var r=t.length;if(e==null)return!r;for(e=Q(e);r--;){var i=t[r],u=n[i],c=e[i];if(c===l&&!(i in e)||!u(c))return!1}return!0}function Xs(e,n,t){if(typeof e!="function")throw new Ge(K);return St(function(){e.apply(l,t)},n)}function yt(e,n,t,r){var i=-1,u=Mt,c=!0,o=e.length,d=[],x=n.length;if(!o)return d;t&&(n=te(n,Pe(t))),r?(u=$r,c=!1):n.length>=j&&(u=pt,c=!1,n=new Mn(n));e:for(;++i<o;){var g=e[i],_=t==null?g:t(g);if(g=r||g!==0?g:0,c&&_===_){for(var b=x;b--;)if(n[b]===_)continue e;d.push(g)}else u(n,_,r)||d.push(g)}return d}var jn=Na(rn),Js=Na(li,!0);function yo(e,n){var t=!0;return jn(e,function(r,i,u){return t=!!n(r,i,u),t}),t}function tr(e,n,t){for(var r=-1,i=e.length;++r<i;){var u=e[r],c=n(u);if(c!=null&&(o===l?c===c&&!We(c):t(c,o)))var o=c,d=u}return d}function wo(e,n,t,r){var i=e.length;for(t=F(t),t<0&&(t=-t>i?0:i+t),r=r===l||r>i?i:F(r),r<0&&(r+=i),r=t>r?0:pu(r);t<r;)e[t++]=n;return e}function Qs(e,n){var t=[];return jn(e,function(r,i,u){n(r,i,u)&&t.push(r)}),t}function me(e,n,t,r,i){var u=-1,c=e.length;for(t||(t=ff),i||(i=[]);++u<c;){var o=e[u];n>0&&t(o)?n>1?me(o,n-1,t,r,i):yn(i,o):r||(i[i.length]=o)}return i}var ui=ja(),Vs=ja(!0);function rn(e,n){return e&&ui(e,n,xe)}function li(e,n){return e&&Vs(e,n,xe)}function rr(e,n){return bn(n,function(t){return xn(e[t])})}function Un(e,n){n=Cn(n,e);for(var t=0,r=n.length;e!=null&&t<r;)e=e[an(n[t++])];return t&&t==r?e:l}function ea(e,n,t){var r=n(e);return L(e)?r:yn(r,t(e))}function Ae(e){return e==null?e===l?Xu:Yu:Dn&&Dn in Q(e)?sf(e):_f(e)}function ci(e,n){return e>n}function No(e,n){return e!=null&&X.call(e,n)}function jo(e,n){return e!=null&&n in Q(e)}function Ao(e,n,t){return e>=we(n,t)&&e<he(n,t)}function oi(e,n,t){for(var r=t?$r:Mt,i=e[0].length,u=e.length,c=u,o=h(u),d=1/0,x=[];c--;){var g=e[c];c&&n&&(g=te(g,Pe(n))),d=we(g.length,d),o[c]=!t&&(n||i>=120&&g.length>=120)?new Mn(c&&g):l}g=e[0];var _=-1,b=o[0];e:for(;++_<i&&x.length<d;){var N=g[_],C=n?n(N):N;if(N=t||N!==0?N:0,!(b?pt(b,C):r(x,C,t))){for(c=u;--c;){var P=o[c];if(!(P?pt(P,C):r(e[c],C,t)))continue e}b&&b.push(C),x.push(N)}}return x}function Co(e,n,t,r){return rn(e,function(i,u,c){n(r,t(i),u,c)}),r}function wt(e,n,t){n=Cn(n,e),e=qa(e,n);var r=e==null?e:e[an($e(n))];return r==null?l:Oe(r,e,t)}function na(e){return ue(e)&&Ae(e)==zn}function So(e){return ue(e)&&Ae(e)==ht}function Io(e){return ue(e)&&Ae(e)==lt}function Nt(e,n,t,r,i){return e===n?!0:e==null||n==null||!ue(e)&&!ue(n)?e!==e&&n!==n:Eo(e,n,t,r,Nt,i)}function Eo(e,n,t,r,i,u){var c=L(e),o=L(n),d=c?Rt:Ne(e),x=o?Rt:Ne(n);d=d==zn?ln:d,x=x==zn?ln:x;var g=d==ln,_=x==ln,b=d==x;if(b&&In(e)){if(!In(n))return!1;c=!0,g=!1}if(b&&!g)return u||(u=new Ve),c||it(e)?Oa(e,n,t,r,i,u):tf(e,n,d,t,r,i,u);if(!(t&pe)){var N=g&&X.call(e,"__wrapped__"),C=_&&X.call(n,"__wrapped__");if(N||C){var P=N?e.value():e,S=C?n.value():n;return u||(u=new Ve),i(P,S,t,r,u)}}return b?(u||(u=new Ve),rf(e,n,t,r,i,u)):!1}function To(e){return ue(e)&&Ne(e)==Xe}function fi(e,n,t,r){var i=t.length,u=i,c=!r;if(e==null)return!u;for(e=Q(e);i--;){var o=t[i];if(c&&o[2]?o[1]!==e[o[0]]:!(o[0]in e))return!1}for(;++i<u;){o=t[i];var d=o[0],x=e[d],g=o[1];if(c&&o[2]){if(x===l&&!(d in e))return!1}else{var _=new Ve;if(r)var b=r(x,g,d,e,n,_);if(!(b===l?Nt(g,x,pe|ae,r,_):b))return!1}}return!0}function ta(e){if(!ie(e)||hf(e))return!1;var n=xn(e)?Ec:vl;return n.test(Gn(e))}function Ro(e){return ue(e)&&Ae(e)==ot}function Lo(e){return ue(e)&&Ne(e)==Je}function Fo(e){return ue(e)&&br(e.length)&&!!ne[Ae(e)]}function ra(e){return typeof e=="function"?e:e==null?Le:typeof e=="object"?L(e)?aa(e[0],e[1]):sa(e):Au(e)}function di(e){if(!Ct(e))return Pc(e);var n=[];for(var t in Q(e))X.call(e,t)&&t!="constructor"&&n.push(t);return n}function Oo(e){if(!ie(e))return mf(e);var n=Ct(e),t=[];for(var r in e)r=="constructor"&&(n||!X.call(e,r))||t.push(r);return t}function hi(e,n){return e<n}function ia(e,n){var t=-1,r=Te(e)?h(e.length):[];return jn(e,function(i,u,c){r[++t]=n(i,u,c)}),r}function sa(e){var n=Ii(e);return n.length==1&&n[0][2]?Ba(n[0][0],n[0][1]):function(t){return t===e||fi(t,e,n)}}function aa(e,n){return Ti(e)&&Ma(n)?Ba(an(e),n):function(t){var r=Ui(t,e);return r===l&&r===n?qi(t,e):Nt(n,r,pe|ae)}}function ir(e,n,t,r,i){e!==n&&ui(n,function(u,c){if(i||(i=new Ve),ie(u))Po(e,n,c,t,ir,r,i);else{var o=r?r(Li(e,c),u,c+"",e,n,i):l;o===l&&(o=u),si(e,c,o)}},Re)}function Po(e,n,t,r,i,u,c){var o=Li(e,t),d=Li(n,t),x=c.get(d);if(x){si(e,t,x);return}var g=u?u(o,d,t+"",e,n,c):l,_=g===l;if(_){var b=L(d),N=!b&&In(d),C=!b&&!N&&it(d);g=d,b||N||C?L(o)?g=o:le(o)?g=Ee(o):N?(_=!1,g=_a(d,!0)):C?(_=!1,g=va(d,!0)):g=[]:It(d)||Hn(d)?(g=o,Hn(o)?g=xu(o):(!ie(o)||xn(o))&&(g=Wa(d))):_=!1}_&&(c.set(d,g),i(g,d,r,u,c),c.delete(d)),si(e,t,g)}function ua(e,n){var t=e.length;if(t)return n+=n<0?t:0,pn(n,t)?e[n]:l}function la(e,n,t){n.length?n=te(n,function(u){return L(u)?function(c){return Un(c,u.length===1?u[0]:u)}:u}):n=[Le];var r=-1;n=te(n,Pe(A()));var i=ia(e,function(u,c,o){var d=te(n,function(x){return x(u)});return{criteria:d,index:++r,value:u}});return uc(i,function(u,c){return Yo(u,c,t)})}function Do(e,n){return ca(e,n,function(t,r){return qi(e,r)})}function ca(e,n,t){for(var r=-1,i=n.length,u={};++r<i;){var c=n[r],o=Un(e,c);t(o,c)&&jt(u,Cn(c,e),o)}return u}function Wo(e){return function(n){return Un(n,e)}}function pi(e,n,t,r){var i=r?ac:kn,u=-1,c=n.length,o=e;for(e===n&&(n=Ee(n)),t&&(o=te(e,Pe(t)));++u<c;)for(var d=0,x=n[u],g=t?t(x):x;(d=i(o,g,d,r))>-1;)o!==e&&Yt.call(o,d,1),Yt.call(e,d,1);return e}function oa(e,n){for(var t=e?n.length:0,r=t-1;t--;){var i=n[t];if(t==r||i!==u){var u=i;pn(i)?Yt.call(e,i,1):_i(e,i)}}return e}function xi(e,n){return e+Jt(zs()*(n-e+1))}function Mo(e,n,t,r){for(var i=-1,u=he(Xt((n-e)/(t||1)),0),c=h(u);u--;)c[r?u:++i]=e,e+=t;return c}function gi(e,n){var t="";if(!e||n<1||n>vn)return t;do n%2&&(t+=e),n=Jt(n/2),n&&(e+=e);while(n);return t}function W(e,n){return Fi(Ua(e,n,Le),e+"")}function Bo(e){return ks(st(e))}function Uo(e,n){var t=st(e);return pr(t,Bn(n,0,t.length))}function jt(e,n,t,r){if(!ie(e))return e;n=Cn(n,e);for(var i=-1,u=n.length,c=u-1,o=e;o!=null&&++i<u;){var d=an(n[i]),x=t;if(d==="__proto__"||d==="constructor"||d==="prototype")return e;if(i!=c){var g=o[d];x=r?r(g,d,o):l,x===l&&(x=ie(g)?g:pn(n[i+1])?[]:{})}bt(o,d,x),o=o[d]}return e}var fa=Qt?function(e,n){return Qt.set(e,n),e}:Le,qo=Zt?function(e,n){return Zt(e,"toString",{configurable:!0,enumerable:!1,value:Hi(n),writable:!0})}:Le;function Go(e){return pr(st(e))}function Ke(e,n,t){var r=-1,i=e.length;n<0&&(n=-n>i?0:i+n),t=t>i?i:t,t<0&&(t+=i),i=n>t?0:t-n>>>0,n>>>=0;for(var u=h(i);++r<i;)u[r]=e[r+n];return u}function Ho(e,n){var t;return jn(e,function(r,i,u){return t=n(r,i,u),!t}),!!t}function sr(e,n,t){var r=0,i=e==null?r:e.length;if(typeof n=="number"&&n===n&&i<=zu){for(;r<i;){var u=r+i>>>1,c=e[u];c!==null&&!We(c)&&(t?c<=n:c<n)?r=u+1:i=u}return i}return mi(e,n,Le,t)}function mi(e,n,t,r){var i=0,u=e==null?0:e.length;if(u===0)return 0;n=t(n);for(var c=n!==n,o=n===null,d=We(n),x=n===l;i<u;){var g=Jt((i+u)/2),_=t(e[g]),b=_!==l,N=_===null,C=_===_,P=We(_);if(c)var S=r||C;else x?S=C&&(r||b):o?S=C&&b&&(r||!N):d?S=C&&b&&!N&&(r||!P):N||P?S=!1:S=r?_<=n:_<n;S?i=g+1:u=g}return we(u,Hu)}function da(e,n){for(var t=-1,r=e.length,i=0,u=[];++t<r;){var c=e[t],o=n?n(c):c;if(!t||!en(o,d)){var d=o;u[i++]=c===0?0:c}}return u}function ha(e){return typeof e=="number"?e:We(e)?Tt:+e}function De(e){if(typeof e=="string")return e;if(L(e))return te(e,De)+"";if(We(e))return Ks?Ks.call(e):"";var n=e+"";return n=="0"&&1/e==-un?"-0":n}function An(e,n,t){var r=-1,i=Mt,u=e.length,c=!0,o=[],d=o;if(t)c=!1,i=$r;else if(u>=j){var x=n?null:ef(e);if(x)return Ut(x);c=!1,i=pt,d=new Mn}else d=n?[]:o;e:for(;++r<u;){var g=e[r],_=n?n(g):g;if(g=t||g!==0?g:0,c&&_===_){for(var b=d.length;b--;)if(d[b]===_)continue e;n&&d.push(_),o.push(g)}else i(d,_,t)||(d!==o&&d.push(_),o.push(g))}return o}function _i(e,n){return n=Cn(n,e),e=qa(e,n),e==null||delete e[an($e(n))]}function pa(e,n,t,r){return jt(e,n,t(Un(e,n)),r)}function ar(e,n,t,r){for(var i=e.length,u=r?i:-1;(r?u--:++u<i)&&n(e[u],u,e););return t?Ke(e,r?0:u,r?u+1:i):Ke(e,r?u+1:0,r?i:u)}function xa(e,n){var t=e;return t instanceof q&&(t=t.value()),kr(n,function(r,i){return i.func.apply(i.thisArg,yn([r],i.args))},t)}function vi(e,n,t){var r=e.length;if(r<2)return r?An(e[0]):[];for(var i=-1,u=h(r);++i<r;)for(var c=e[i],o=-1;++o<r;)o!=i&&(u[i]=yt(u[i]||c,e[o],n,t));return An(me(u,1),n,t)}function ga(e,n,t){for(var r=-1,i=e.length,u=n.length,c={};++r<i;){var o=r<u?n[r]:l;t(c,e[r],o)}return c}function bi(e){return le(e)?e:[]}function yi(e){return typeof e=="function"?e:Le}function Cn(e,n){return L(e)?e:Ti(e,n)?[e]:Ka($(e))}var zo=W;function Sn(e,n,t){var r=e.length;return t=t===l?r:t,!n&&t>=r?e:Ke(e,n,t)}var ma=Tc||function(e){return ge.clearTimeout(e)};function _a(e,n){if(n)return e.slice();var t=e.length,r=Bs?Bs(t):new e.constructor(t);return e.copy(r),r}function wi(e){var n=new e.constructor(e.byteLength);return new $t(n).set(new $t(e)),n}function Ko(e,n){var t=n?wi(e.buffer):e.buffer;return new e.constructor(t,e.byteOffset,e.byteLength)}function $o(e){var n=new e.constructor(e.source,ns.exec(e));return n.lastIndex=e.lastIndex,n}function ko(e){return vt?Q(vt.call(e)):{}}function va(e,n){var t=n?wi(e.buffer):e.buffer;return new e.constructor(t,e.byteOffset,e.length)}function ba(e,n){if(e!==n){var t=e!==l,r=e===null,i=e===e,u=We(e),c=n!==l,o=n===null,d=n===n,x=We(n);if(!o&&!x&&!u&&e>n||u&&c&&d&&!o&&!x||r&&c&&d||!t&&d||!i)return 1;if(!r&&!u&&!x&&e<n||x&&t&&i&&!r&&!u||o&&t&&i||!c&&i||!d)return-1}return 0}function Yo(e,n,t){for(var r=-1,i=e.criteria,u=n.criteria,c=i.length,o=t.length;++r<c;){var d=ba(i[r],u[r]);if(d){if(r>=o)return d;var x=t[r];return d*(x=="desc"?-1:1)}}return e.index-n.index}function ya(e,n,t,r){for(var i=-1,u=e.length,c=t.length,o=-1,d=n.length,x=he(u-c,0),g=h(d+x),_=!r;++o<d;)g[o]=n[o];for(;++i<c;)(_||i<u)&&(g[t[i]]=e[i]);for(;x--;)g[o++]=e[i++];return g}function wa(e,n,t,r){for(var i=-1,u=e.length,c=-1,o=t.length,d=-1,x=n.length,g=he(u-o,0),_=h(g+x),b=!r;++i<g;)_[i]=e[i];for(var N=i;++d<x;)_[N+d]=n[d];for(;++c<o;)(b||i<u)&&(_[N+t[c]]=e[i++]);return _}function Ee(e,n){var t=-1,r=e.length;for(n||(n=h(r));++t<r;)n[t]=e[t];return n}function sn(e,n,t,r){var i=!t;t||(t={});for(var u=-1,c=n.length;++u<c;){var o=n[u],d=r?r(t[o],e[o],o,t,e):l;d===l&&(d=e[o]),i?fn(t,o,d):bt(t,o,d)}return t}function Zo(e,n){return sn(e,Ei(e),n)}function Xo(e,n){return sn(e,Pa(e),n)}function ur(e,n){return function(t,r){var i=L(t)?ec:_o,u=n?n():{};return i(t,e,A(r,2),u)}}function nt(e){return W(function(n,t){var r=-1,i=t.length,u=i>1?t[i-1]:l,c=i>2?t[2]:l;for(u=e.length>3&&typeof u=="function"?(i--,u):l,c&&Ce(t[0],t[1],c)&&(u=i<3?l:u,i=1),n=Q(n);++r<i;){var o=t[r];o&&e(n,o,r,u)}return n})}function Na(e,n){return function(t,r){if(t==null)return t;if(!Te(t))return e(t,r);for(var i=t.length,u=n?i:-1,c=Q(t);(n?u--:++u<i)&&r(c[u],u,c)!==!1;);return t}}function ja(e){return function(n,t,r){for(var i=-1,u=Q(n),c=r(n),o=c.length;o--;){var d=c[e?o:++i];if(t(u[d],d,u)===!1)break}return n}}function Jo(e,n,t){var r=n&w,i=At(e);function u(){var c=this&&this!==ge&&this instanceof u?i:e;return c.apply(r?t:this,arguments)}return u}function Aa(e){return function(n){n=$(n);var t=Yn(n)?Qe(n):l,r=t?t[0]:n.charAt(0),i=t?Sn(t,1).join(""):n.slice(1);return r[e]()+i}}function tt(e){return function(n){return kr(Nu(wu(n).replace(Ul,"")),e,"")}}function At(e){return function(){var n=arguments;switch(n.length){case 0:return new e;case 1:return new e(n[0]);case 2:return new e(n[0],n[1]);case 3:return new e(n[0],n[1],n[2]);case 4:return new e(n[0],n[1],n[2],n[3]);case 5:return new e(n[0],n[1],n[2],n[3],n[4]);case 6:return new e(n[0],n[1],n[2],n[3],n[4],n[5]);case 7:return new e(n[0],n[1],n[2],n[3],n[4],n[5],n[6])}var t=et(e.prototype),r=e.apply(t,n);return ie(r)?r:t}}function Qo(e,n,t){var r=At(e);function i(){for(var u=arguments.length,c=h(u),o=u,d=rt(i);o--;)c[o]=arguments[o];var x=u<3&&c[0]!==d&&c[u-1]!==d?[]:wn(c,d);if(u-=x.length,u<t)return Ta(e,n,lr,i.placeholder,l,c,x,l,l,t-u);var g=this&&this!==ge&&this instanceof i?r:e;return Oe(g,this,c)}return i}function Ca(e){return function(n,t,r){var i=Q(n);if(!Te(n)){var u=A(t,3);n=xe(n),t=function(o){return u(i[o],o,i)}}var c=e(n,t,r);return c>-1?i[u?n[c]:c]:l}}function Sa(e){return hn(function(n){var t=n.length,r=t,i=He.prototype.thru;for(e&&n.reverse();r--;){var u=n[r];if(typeof u!="function")throw new Ge(K);if(i&&!c&&dr(u)=="wrapper")var c=new He([],!0)}for(r=c?r:t;++r<t;){u=n[r];var o=dr(u),d=o=="wrapper"?Si(u):l;d&&Ri(d[0])&&d[1]==(Z|Y|T|M)&&!d[4].length&&d[9]==1?c=c[dr(d[0])].apply(c,d[3]):c=u.length==1&&Ri(u)?c[o]():c.thru(u)}return function(){var x=arguments,g=x[0];if(c&&x.length==1&&L(g))return c.plant(g).value();for(var _=0,b=t?n[_].apply(this,x):g;++_<t;)b=n[_].call(this,b);return b}})}function lr(e,n,t,r,i,u,c,o,d,x){var g=n&Z,_=n&w,b=n&E,N=n&(Y|m),C=n&ye,P=b?l:At(e);function S(){for(var U=arguments.length,G=h(U),Me=U;Me--;)G[Me]=arguments[Me];if(N)var Se=rt(S),Be=cc(G,Se);if(r&&(G=ya(G,r,i,N)),u&&(G=wa(G,u,c,N)),U-=Be,N&&U<x){var ce=wn(G,Se);return Ta(e,n,lr,S.placeholder,t,G,ce,o,d,x-U)}var nn=_?t:this,mn=b?nn[e]:e;return U=G.length,o?G=vf(G,o):C&&U>1&&G.reverse(),g&&d<U&&(G.length=d),this&&this!==ge&&this instanceof S&&(mn=P||At(mn)),mn.apply(nn,G)}return S}function Ia(e,n){return function(t,r){return Co(t,e,n(r),{})}}function cr(e,n){return function(t,r){var i;if(t===l&&r===l)return n;if(t!==l&&(i=t),r!==l){if(i===l)return r;typeof t=="string"||typeof r=="string"?(t=De(t),r=De(r)):(t=ha(t),r=ha(r)),i=e(t,r)}return i}}function Ni(e){return hn(function(n){return n=te(n,Pe(A())),W(function(t){var r=this;return e(n,function(i){return Oe(i,r,t)})})})}function or(e,n){n=n===l?" ":De(n);var t=n.length;if(t<2)return t?gi(n,e):n;var r=gi(n,Xt(e/Zn(n)));return Yn(n)?Sn(Qe(r),0,e).join(""):r.slice(0,e)}function Vo(e,n,t,r){var i=n&w,u=At(e);function c(){for(var o=-1,d=arguments.length,x=-1,g=r.length,_=h(g+d),b=this&&this!==ge&&this instanceof c?u:e;++x<g;)_[x]=r[x];for(;d--;)_[x++]=arguments[++o];return Oe(b,i?t:this,_)}return c}function Ea(e){return function(n,t,r){return r&&typeof r!="number"&&Ce(n,t,r)&&(t=r=l),n=gn(n),t===l?(t=n,n=0):t=gn(t),r=r===l?n<t?1:-1:gn(r),Mo(n,t,r,e)}}function fr(e){return function(n,t){return typeof n=="string"&&typeof t=="string"||(n=ke(n),t=ke(t)),e(n,t)}}function Ta(e,n,t,r,i,u,c,o,d,x){var g=n&Y,_=g?c:l,b=g?l:c,N=g?u:l,C=g?l:u;n|=g?T:I,n&=~(g?I:T),n&H||(n&=-4);var P=[e,n,i,N,_,C,b,o,d,x],S=t.apply(l,P);return Ri(e)&&Ga(S,P),S.placeholder=r,Ha(S,e,n)}function ji(e){var n=de[e];return function(t,r){if(t=ke(t),r=r==null?0:we(F(r),292),r&&Hs(t)){var i=($(t)+"e").split("e"),u=n(i[0]+"e"+(+i[1]+r));return i=($(u)+"e").split("e"),+(i[0]+"e"+(+i[1]-r))}return n(t)}}var ef=Qn&&1/Ut(new Qn([,-0]))[1]==un?function(e){return new Qn(e)}:$i;function Ra(e){return function(n){var t=Ne(n);return t==Xe?ei(n):t==Je?gc(n):lc(n,e(n))}}function dn(e,n,t,r,i,u,c,o){var d=n&E;if(!d&&typeof e!="function")throw new Ge(K);var x=r?r.length:0;if(x||(n&=-97,r=i=l),c=c===l?c:he(F(c),0),o=o===l?o:F(o),x-=i?i.length:0,n&I){var g=r,_=i;r=i=l}var b=d?l:Si(e),N=[e,n,t,r,i,g,_,u,c,o];if(b&&gf(N,b),e=N[0],n=N[1],t=N[2],r=N[3],i=N[4],o=N[9]=N[9]===l?d?0:e.length:he(N[9]-x,0),!o&&n&(Y|m)&&(n&=-25),!n||n==w)var C=Jo(e,n,t);else n==Y||n==m?C=Qo(e,n,o):(n==T||n==(w|T))&&!i.length?C=Vo(e,n,t,r):C=lr.apply(l,N);var P=b?fa:Ga;return Ha(P(C,N),e,n)}function La(e,n,t,r){return e===l||en(e,Jn[t])&&!X.call(r,t)?n:e}function Fa(e,n,t,r,i,u){return ie(e)&&ie(n)&&(u.set(n,e),ir(e,n,l,Fa,u),u.delete(n)),e}function nf(e){return It(e)?l:e}function Oa(e,n,t,r,i,u){var c=t&pe,o=e.length,d=n.length;if(o!=d&&!(c&&d>o))return!1;var x=u.get(e),g=u.get(n);if(x&&g)return x==n&&g==e;var _=-1,b=!0,N=t&ae?new Mn:l;for(u.set(e,n),u.set(n,e);++_<o;){var C=e[_],P=n[_];if(r)var S=c?r(P,C,_,n,e,u):r(C,P,_,e,n,u);if(S!==l){if(S)continue;b=!1;break}if(N){if(!Yr(n,function(U,G){if(!pt(N,G)&&(C===U||i(C,U,t,r,u)))return N.push(G)})){b=!1;break}}else if(!(C===P||i(C,P,t,r,u))){b=!1;break}}return u.delete(e),u.delete(n),b}function tf(e,n,t,r,i,u,c){switch(t){case Kn:if(e.byteLength!=n.byteLength||e.byteOffset!=n.byteOffset)return!1;e=e.buffer,n=n.buffer;case ht:return!(e.byteLength!=n.byteLength||!u(new $t(e),new $t(n)));case ut:case lt:case ct:return en(+e,+n);case Lt:return e.name==n.name&&e.message==n.message;case ot:case ft:return e==n+"";case Xe:var o=ei;case Je:var d=r&pe;if(o||(o=Ut),e.size!=n.size&&!d)return!1;var x=c.get(e);if(x)return x==n;r|=ae,c.set(e,n);var g=Oa(o(e),o(n),r,i,u,c);return c.delete(e),g;case Ot:if(vt)return vt.call(e)==vt.call(n)}return!1}function rf(e,n,t,r,i,u){var c=t&pe,o=Ai(e),d=o.length,x=Ai(n),g=x.length;if(d!=g&&!c)return!1;for(var _=d;_--;){var b=o[_];if(!(c?b in n:X.call(n,b)))return!1}var N=u.get(e),C=u.get(n);if(N&&C)return N==n&&C==e;var P=!0;u.set(e,n),u.set(n,e);for(var S=c;++_<d;){b=o[_];var U=e[b],G=n[b];if(r)var Me=c?r(G,U,b,n,e,u):r(U,G,b,e,n,u);if(!(Me===l?U===G||i(U,G,t,r,u):Me)){P=!1;break}S||(S=b=="constructor")}if(P&&!S){var Se=e.constructor,Be=n.constructor;Se!=Be&&"constructor"in e&&"constructor"in n&&!(typeof Se=="function"&&Se instanceof Se&&typeof Be=="function"&&Be instanceof Be)&&(P=!1)}return u.delete(e),u.delete(n),P}function hn(e){return Fi(Ua(e,l,Za),e+"")}function Ai(e){return ea(e,xe,Ei)}function Ci(e){return ea(e,Re,Pa)}var Si=Qt?function(e){return Qt.get(e)}:$i;function dr(e){for(var n=e.name+"",t=Vn[n],r=X.call(Vn,n)?t.length:0;r--;){var i=t[r],u=i.func;if(u==null||u==e)return i.name}return n}function rt(e){var n=X.call(a,"placeholder")?a:e;return n.placeholder}function A(){var e=a.iteratee||zi;return e=e===zi?ra:e,arguments.length?e(arguments[0],arguments[1]):e}function hr(e,n){var t=e.__data__;return df(n)?t[typeof n=="string"?"string":"hash"]:t.map}function Ii(e){for(var n=xe(e),t=n.length;t--;){var r=n[t],i=e[r];n[t]=[r,i,Ma(i)]}return n}function qn(e,n){var t=hc(e,n);return ta(t)?t:l}function sf(e){var n=X.call(e,Dn),t=e[Dn];try{e[Dn]=l;var r=!0}catch{}var i=zt.call(e);return r&&(n?e[Dn]=t:delete e[Dn]),i}var Ei=ti?function(e){return e==null?[]:(e=Q(e),bn(ti(e),function(n){return qs.call(e,n)}))}:ki,Pa=ti?function(e){for(var n=[];e;)yn(n,Ei(e)),e=kt(e);return n}:ki,Ne=Ae;(ri&&Ne(new ri(new ArrayBuffer(1)))!=Kn||gt&&Ne(new gt)!=Xe||ii&&Ne(ii.resolve())!=Ji||Qn&&Ne(new Qn)!=Je||mt&&Ne(new mt)!=dt)&&(Ne=function(e){var n=Ae(e),t=n==ln?e.constructor:l,r=t?Gn(t):"";if(r)switch(r){case Bc:return Kn;case Uc:return Xe;case qc:return Ji;case Gc:return Je;case Hc:return dt}return n});function af(e,n,t){for(var r=-1,i=t.length;++r<i;){var u=t[r],c=u.size;switch(u.type){case"drop":e+=c;break;case"dropRight":n-=c;break;case"take":n=we(n,e+c);break;case"takeRight":e=he(e,n-c);break}}return{start:e,end:n}}function uf(e){var n=e.match(fl);return n?n[1].split(dl):[]}function Da(e,n,t){n=Cn(n,e);for(var r=-1,i=n.length,u=!1;++r<i;){var c=an(n[r]);if(!(u=e!=null&&t(e,c)))break;e=e[c]}return u||++r!=i?u:(i=e==null?0:e.length,!!i&&br(i)&&pn(c,i)&&(L(e)||Hn(e)))}function lf(e){var n=e.length,t=new e.constructor(n);return n&&typeof e[0]=="string"&&X.call(e,"index")&&(t.index=e.index,t.input=e.input),t}function Wa(e){return typeof e.constructor=="function"&&!Ct(e)?et(kt(e)):{}}function cf(e,n,t){var r=e.constructor;switch(n){case ht:return wi(e);case ut:case lt:return new r(+e);case Kn:return Ko(e,t);case Ir:case Er:case Tr:case Rr:case Lr:case Fr:case Or:case Pr:case Dr:return va(e,t);case Xe:return new r;case ct:case ft:return new r(e);case ot:return $o(e);case Je:return new r;case Ot:return ko(e)}}function of(e,n){var t=n.length;if(!t)return e;var r=t-1;return n[r]=(t>1?"& ":"")+n[r],n=n.join(t>2?", ":" "),e.replace(ol,`{
/* [wrapped with `+n+`] */
`)}function ff(e){return L(e)||Hn(e)||!!(Gs&&e&&e[Gs])}function pn(e,n){var t=typeof e;return n=n??vn,!!n&&(t=="number"||t!="symbol"&&yl.test(e))&&e>-1&&e%1==0&&e<n}function Ce(e,n,t){if(!ie(t))return!1;var r=typeof n;return(r=="number"?Te(t)&&pn(n,t.length):r=="string"&&n in t)?en(t[n],e):!1}function Ti(e,n){if(L(e))return!1;var t=typeof e;return t=="number"||t=="symbol"||t=="boolean"||e==null||We(e)?!0:al.test(e)||!sl.test(e)||n!=null&&e in Q(n)}function df(e){var n=typeof e;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?e!=="__proto__":e===null}function Ri(e){var n=dr(e),t=a[n];if(typeof t!="function"||!(n in q.prototype))return!1;if(e===t)return!0;var r=Si(t);return!!r&&e===r[0]}function hf(e){return!!Ms&&Ms in e}var pf=Gt?xn:Yi;function Ct(e){var n=e&&e.constructor,t=typeof n=="function"&&n.prototype||Jn;return e===t}function Ma(e){return e===e&&!ie(e)}function Ba(e,n){return function(t){return t==null?!1:t[e]===n&&(n!==l||e in Q(t))}}function xf(e){var n=_r(e,function(r){return t.size===ve&&t.clear(),r}),t=n.cache;return n}function gf(e,n){var t=e[1],r=n[1],i=t|r,u=i<(w|E|Z),c=r==Z&&t==Y||r==Z&&t==M&&e[7].length<=n[8]||r==(Z|M)&&n[7].length<=n[8]&&t==Y;if(!(u||c))return e;r&w&&(e[2]=n[2],i|=t&w?0:H);var o=n[3];if(o){var d=e[3];e[3]=d?ya(d,o,n[4]):o,e[4]=d?wn(e[3],oe):n[4]}return o=n[5],o&&(d=e[5],e[5]=d?wa(d,o,n[6]):o,e[6]=d?wn(e[5],oe):n[6]),o=n[7],o&&(e[7]=o),r&Z&&(e[8]=e[8]==null?n[8]:we(e[8],n[8])),e[9]==null&&(e[9]=n[9]),e[0]=n[0],e[1]=i,e}function mf(e){var n=[];if(e!=null)for(var t in Q(e))n.push(t);return n}function _f(e){return zt.call(e)}function Ua(e,n,t){return n=he(n===l?e.length-1:n,0),function(){for(var r=arguments,i=-1,u=he(r.length-n,0),c=h(u);++i<u;)c[i]=r[n+i];i=-1;for(var o=h(n+1);++i<n;)o[i]=r[i];return o[n]=t(c),Oe(e,this,o)}}function qa(e,n){return n.length<2?e:Un(e,Ke(n,0,-1))}function vf(e,n){for(var t=e.length,r=we(n.length,t),i=Ee(e);r--;){var u=n[r];e[r]=pn(u,t)?i[u]:l}return e}function Li(e,n){if(!(n==="constructor"&&typeof e[n]=="function")&&n!="__proto__")return e[n]}var Ga=za(fa),St=Lc||function(e,n){return ge.setTimeout(e,n)},Fi=za(qo);function Ha(e,n,t){var r=n+"";return Fi(e,of(r,bf(uf(r),t)))}function za(e){var n=0,t=0;return function(){var r=Dc(),i=Fn-(r-t);if(t=r,i>0){if(++n>=_n)return arguments[0]}else n=0;return e.apply(l,arguments)}}function pr(e,n){var t=-1,r=e.length,i=r-1;for(n=n===l?r:n;++t<n;){var u=xi(t,i),c=e[u];e[u]=e[t],e[t]=c}return e.length=n,e}var Ka=xf(function(e){var n=[];return e.charCodeAt(0)===46&&n.push(""),e.replace(ul,function(t,r,i,u){n.push(i?u.replace(xl,"$1"):r||t)}),n});function an(e){if(typeof e=="string"||We(e))return e;var n=e+"";return n=="0"&&1/e==-un?"-0":n}function Gn(e){if(e!=null){try{return Ht.call(e)}catch{}try{return e+""}catch{}}return""}function bf(e,n){return qe(Ku,function(t){var r="_."+t[0];n&t[1]&&!Mt(e,r)&&e.push(r)}),e.sort()}function $a(e){if(e instanceof q)return e.clone();var n=new He(e.__wrapped__,e.__chain__);return n.__actions__=Ee(e.__actions__),n.__index__=e.__index__,n.__values__=e.__values__,n}function yf(e,n,t){(t?Ce(e,n,t):n===l)?n=1:n=he(F(n),0);var r=e==null?0:e.length;if(!r||n<1)return[];for(var i=0,u=0,c=h(Xt(r/n));i<r;)c[u++]=Ke(e,i,i+=n);return c}function wf(e){for(var n=-1,t=e==null?0:e.length,r=0,i=[];++n<t;){var u=e[n];u&&(i[r++]=u)}return i}function Nf(){var e=arguments.length;if(!e)return[];for(var n=h(e-1),t=arguments[0],r=e;r--;)n[r-1]=arguments[r];return yn(L(t)?Ee(t):[t],me(n,1))}var jf=W(function(e,n){return le(e)?yt(e,me(n,1,le,!0)):[]}),Af=W(function(e,n){var t=$e(n);return le(t)&&(t=l),le(e)?yt(e,me(n,1,le,!0),A(t,2)):[]}),Cf=W(function(e,n){var t=$e(n);return le(t)&&(t=l),le(e)?yt(e,me(n,1,le,!0),l,t):[]});function Sf(e,n,t){var r=e==null?0:e.length;return r?(n=t||n===l?1:F(n),Ke(e,n<0?0:n,r)):[]}function If(e,n,t){var r=e==null?0:e.length;return r?(n=t||n===l?1:F(n),n=r-n,Ke(e,0,n<0?0:n)):[]}function Ef(e,n){return e&&e.length?ar(e,A(n,3),!0,!0):[]}function Tf(e,n){return e&&e.length?ar(e,A(n,3),!0):[]}function Rf(e,n,t,r){var i=e==null?0:e.length;return i?(t&&typeof t!="number"&&Ce(e,n,t)&&(t=0,r=i),wo(e,n,t,r)):[]}function ka(e,n,t){var r=e==null?0:e.length;if(!r)return-1;var i=t==null?0:F(t);return i<0&&(i=he(r+i,0)),Bt(e,A(n,3),i)}function Ya(e,n,t){var r=e==null?0:e.length;if(!r)return-1;var i=r-1;return t!==l&&(i=F(t),i=t<0?he(r+i,0):we(i,r-1)),Bt(e,A(n,3),i,!0)}function Za(e){var n=e==null?0:e.length;return n?me(e,1):[]}function Lf(e){var n=e==null?0:e.length;return n?me(e,un):[]}function Ff(e,n){var t=e==null?0:e.length;return t?(n=n===l?1:F(n),me(e,n)):[]}function Of(e){for(var n=-1,t=e==null?0:e.length,r={};++n<t;){var i=e[n];r[i[0]]=i[1]}return r}function Xa(e){return e&&e.length?e[0]:l}function Pf(e,n,t){var r=e==null?0:e.length;if(!r)return-1;var i=t==null?0:F(t);return i<0&&(i=he(r+i,0)),kn(e,n,i)}function Df(e){var n=e==null?0:e.length;return n?Ke(e,0,-1):[]}var Wf=W(function(e){var n=te(e,bi);return n.length&&n[0]===e[0]?oi(n):[]}),Mf=W(function(e){var n=$e(e),t=te(e,bi);return n===$e(t)?n=l:t.pop(),t.length&&t[0]===e[0]?oi(t,A(n,2)):[]}),Bf=W(function(e){var n=$e(e),t=te(e,bi);return n=typeof n=="function"?n:l,n&&t.pop(),t.length&&t[0]===e[0]?oi(t,l,n):[]});function Uf(e,n){return e==null?"":Oc.call(e,n)}function $e(e){var n=e==null?0:e.length;return n?e[n-1]:l}function qf(e,n,t){var r=e==null?0:e.length;if(!r)return-1;var i=r;return t!==l&&(i=F(t),i=i<0?he(r+i,0):we(i,r-1)),n===n?_c(e,n,i):Bt(e,Ts,i,!0)}function Gf(e,n){return e&&e.length?ua(e,F(n)):l}var Hf=W(Ja);function Ja(e,n){return e&&e.length&&n&&n.length?pi(e,n):e}function zf(e,n,t){return e&&e.length&&n&&n.length?pi(e,n,A(t,2)):e}function Kf(e,n,t){return e&&e.length&&n&&n.length?pi(e,n,l,t):e}var $f=hn(function(e,n){var t=e==null?0:e.length,r=ai(e,n);return oa(e,te(n,function(i){return pn(i,t)?+i:i}).sort(ba)),r});function kf(e,n){var t=[];if(!(e&&e.length))return t;var r=-1,i=[],u=e.length;for(n=A(n,3);++r<u;){var c=e[r];n(c,r,e)&&(t.push(c),i.push(r))}return oa(e,i),t}function Oi(e){return e==null?e:Mc.call(e)}function Yf(e,n,t){var r=e==null?0:e.length;return r?(t&&typeof t!="number"&&Ce(e,n,t)?(n=0,t=r):(n=n==null?0:F(n),t=t===l?r:F(t)),Ke(e,n,t)):[]}function Zf(e,n){return sr(e,n)}function Xf(e,n,t){return mi(e,n,A(t,2))}function Jf(e,n){var t=e==null?0:e.length;if(t){var r=sr(e,n);if(r<t&&en(e[r],n))return r}return-1}function Qf(e,n){return sr(e,n,!0)}function Vf(e,n,t){return mi(e,n,A(t,2),!0)}function ed(e,n){var t=e==null?0:e.length;if(t){var r=sr(e,n,!0)-1;if(en(e[r],n))return r}return-1}function nd(e){return e&&e.length?da(e):[]}function td(e,n){return e&&e.length?da(e,A(n,2)):[]}function rd(e){var n=e==null?0:e.length;return n?Ke(e,1,n):[]}function id(e,n,t){return e&&e.length?(n=t||n===l?1:F(n),Ke(e,0,n<0?0:n)):[]}function sd(e,n,t){var r=e==null?0:e.length;return r?(n=t||n===l?1:F(n),n=r-n,Ke(e,n<0?0:n,r)):[]}function ad(e,n){return e&&e.length?ar(e,A(n,3),!1,!0):[]}function ud(e,n){return e&&e.length?ar(e,A(n,3)):[]}var ld=W(function(e){return An(me(e,1,le,!0))}),cd=W(function(e){var n=$e(e);return le(n)&&(n=l),An(me(e,1,le,!0),A(n,2))}),od=W(function(e){var n=$e(e);return n=typeof n=="function"?n:l,An(me(e,1,le,!0),l,n)});function fd(e){return e&&e.length?An(e):[]}function dd(e,n){return e&&e.length?An(e,A(n,2)):[]}function hd(e,n){return n=typeof n=="function"?n:l,e&&e.length?An(e,l,n):[]}function Pi(e){if(!(e&&e.length))return[];var n=0;return e=bn(e,function(t){if(le(t))return n=he(t.length,n),!0}),Qr(n,function(t){return te(e,Zr(t))})}function Qa(e,n){if(!(e&&e.length))return[];var t=Pi(e);return n==null?t:te(t,function(r){return Oe(n,l,r)})}var pd=W(function(e,n){return le(e)?yt(e,n):[]}),xd=W(function(e){return vi(bn(e,le))}),gd=W(function(e){var n=$e(e);return le(n)&&(n=l),vi(bn(e,le),A(n,2))}),md=W(function(e){var n=$e(e);return n=typeof n=="function"?n:l,vi(bn(e,le),l,n)}),_d=W(Pi);function vd(e,n){return ga(e||[],n||[],bt)}function bd(e,n){return ga(e||[],n||[],jt)}var yd=W(function(e){var n=e.length,t=n>1?e[n-1]:l;return t=typeof t=="function"?(e.pop(),t):l,Qa(e,t)});function Va(e){var n=a(e);return n.__chain__=!0,n}function wd(e,n){return n(e),e}function xr(e,n){return n(e)}var Nd=hn(function(e){var n=e.length,t=n?e[0]:0,r=this.__wrapped__,i=function(u){return ai(u,e)};return n>1||this.__actions__.length||!(r instanceof q)||!pn(t)?this.thru(i):(r=r.slice(t,+t+(n?1:0)),r.__actions__.push({func:xr,args:[i],thisArg:l}),new He(r,this.__chain__).thru(function(u){return n&&!u.length&&u.push(l),u}))});function jd(){return Va(this)}function Ad(){return new He(this.value(),this.__chain__)}function Cd(){this.__values__===l&&(this.__values__=hu(this.value()));var e=this.__index__>=this.__values__.length,n=e?l:this.__values__[this.__index__++];return{done:e,value:n}}function Sd(){return this}function Id(e){for(var n,t=this;t instanceof er;){var r=$a(t);r.__index__=0,r.__values__=l,n?i.__wrapped__=r:n=r;var i=r;t=t.__wrapped__}return i.__wrapped__=e,n}function Ed(){var e=this.__wrapped__;if(e instanceof q){var n=e;return this.__actions__.length&&(n=new q(this)),n=n.reverse(),n.__actions__.push({func:xr,args:[Oi],thisArg:l}),new He(n,this.__chain__)}return this.thru(Oi)}function Td(){return xa(this.__wrapped__,this.__actions__)}var Rd=ur(function(e,n,t){X.call(e,t)?++e[t]:fn(e,t,1)});function Ld(e,n,t){var r=L(e)?Is:yo;return t&&Ce(e,n,t)&&(n=l),r(e,A(n,3))}function Fd(e,n){var t=L(e)?bn:Qs;return t(e,A(n,3))}var Od=Ca(ka),Pd=Ca(Ya);function Dd(e,n){return me(gr(e,n),1)}function Wd(e,n){return me(gr(e,n),un)}function Md(e,n,t){return t=t===l?1:F(t),me(gr(e,n),t)}function eu(e,n){var t=L(e)?qe:jn;return t(e,A(n,3))}function nu(e,n){var t=L(e)?nc:Js;return t(e,A(n,3))}var Bd=ur(function(e,n,t){X.call(e,t)?e[t].push(n):fn(e,t,[n])});function Ud(e,n,t,r){e=Te(e)?e:st(e),t=t&&!r?F(t):0;var i=e.length;return t<0&&(t=he(i+t,0)),yr(e)?t<=i&&e.indexOf(n,t)>-1:!!i&&kn(e,n,t)>-1}var qd=W(function(e,n,t){var r=-1,i=typeof n=="function",u=Te(e)?h(e.length):[];return jn(e,function(c){u[++r]=i?Oe(n,c,t):wt(c,n,t)}),u}),Gd=ur(function(e,n,t){fn(e,t,n)});function gr(e,n){var t=L(e)?te:ia;return t(e,A(n,3))}function Hd(e,n,t,r){return e==null?[]:(L(n)||(n=n==null?[]:[n]),t=r?l:t,L(t)||(t=t==null?[]:[t]),la(e,n,t))}var zd=ur(function(e,n,t){e[t?0:1].push(n)},function(){return[[],[]]});function Kd(e,n,t){var r=L(e)?kr:Ls,i=arguments.length<3;return r(e,A(n,4),t,i,jn)}function $d(e,n,t){var r=L(e)?tc:Ls,i=arguments.length<3;return r(e,A(n,4),t,i,Js)}function kd(e,n){var t=L(e)?bn:Qs;return t(e,vr(A(n,3)))}function Yd(e){var n=L(e)?ks:Bo;return n(e)}function Zd(e,n,t){(t?Ce(e,n,t):n===l)?n=1:n=F(n);var r=L(e)?go:Uo;return r(e,n)}function Xd(e){var n=L(e)?mo:Go;return n(e)}function Jd(e){if(e==null)return 0;if(Te(e))return yr(e)?Zn(e):e.length;var n=Ne(e);return n==Xe||n==Je?e.size:di(e).length}function Qd(e,n,t){var r=L(e)?Yr:Ho;return t&&Ce(e,n,t)&&(n=l),r(e,A(n,3))}var Vd=W(function(e,n){if(e==null)return[];var t=n.length;return t>1&&Ce(e,n[0],n[1])?n=[]:t>2&&Ce(n[0],n[1],n[2])&&(n=[n[0]]),la(e,me(n,1),[])}),mr=Rc||function(){return ge.Date.now()};function eh(e,n){if(typeof n!="function")throw new Ge(K);return e=F(e),function(){if(--e<1)return n.apply(this,arguments)}}function tu(e,n,t){return n=t?l:n,n=e&&n==null?e.length:n,dn(e,Z,l,l,l,l,n)}function ru(e,n){var t;if(typeof n!="function")throw new Ge(K);return e=F(e),function(){return--e>0&&(t=n.apply(this,arguments)),e<=1&&(n=l),t}}var Di=W(function(e,n,t){var r=w;if(t.length){var i=wn(t,rt(Di));r|=T}return dn(e,r,n,t,i)}),iu=W(function(e,n,t){var r=w|E;if(t.length){var i=wn(t,rt(iu));r|=T}return dn(n,r,e,t,i)});function su(e,n,t){n=t?l:n;var r=dn(e,Y,l,l,l,l,l,n);return r.placeholder=su.placeholder,r}function au(e,n,t){n=t?l:n;var r=dn(e,m,l,l,l,l,l,n);return r.placeholder=au.placeholder,r}function uu(e,n,t){var r,i,u,c,o,d,x=0,g=!1,_=!1,b=!0;if(typeof e!="function")throw new Ge(K);n=ke(n)||0,ie(t)&&(g=!!t.leading,_="maxWait"in t,u=_?he(ke(t.maxWait)||0,n):u,b="trailing"in t?!!t.trailing:b);function N(ce){var nn=r,mn=i;return r=i=l,x=ce,c=e.apply(mn,nn),c}function C(ce){return x=ce,o=St(U,n),g?N(ce):c}function P(ce){var nn=ce-d,mn=ce-x,Cu=n-nn;return _?we(Cu,u-mn):Cu}function S(ce){var nn=ce-d,mn=ce-x;return d===l||nn>=n||nn<0||_&&mn>=u}function U(){var ce=mr();if(S(ce))return G(ce);o=St(U,P(ce))}function G(ce){return o=l,b&&r?N(ce):(r=i=l,c)}function Me(){o!==l&&ma(o),x=0,r=d=i=o=l}function Se(){return o===l?c:G(mr())}function Be(){var ce=mr(),nn=S(ce);if(r=arguments,i=this,d=ce,nn){if(o===l)return C(d);if(_)return ma(o),o=St(U,n),N(d)}return o===l&&(o=St(U,n)),c}return Be.cancel=Me,Be.flush=Se,Be}var nh=W(function(e,n){return Xs(e,1,n)}),th=W(function(e,n,t){return Xs(e,ke(n)||0,t)});function rh(e){return dn(e,ye)}function _r(e,n){if(typeof e!="function"||n!=null&&typeof n!="function")throw new Ge(K);var t=function(){var r=arguments,i=n?n.apply(this,r):r[0],u=t.cache;if(u.has(i))return u.get(i);var c=e.apply(this,r);return t.cache=u.set(i,c)||u,c};return t.cache=new(_r.Cache||on),t}_r.Cache=on;function vr(e){if(typeof e!="function")throw new Ge(K);return function(){var n=arguments;switch(n.length){case 0:return!e.call(this);case 1:return!e.call(this,n[0]);case 2:return!e.call(this,n[0],n[1]);case 3:return!e.call(this,n[0],n[1],n[2])}return!e.apply(this,n)}}function ih(e){return ru(2,e)}var sh=zo(function(e,n){n=n.length==1&&L(n[0])?te(n[0],Pe(A())):te(me(n,1),Pe(A()));var t=n.length;return W(function(r){for(var i=-1,u=we(r.length,t);++i<u;)r[i]=n[i].call(this,r[i]);return Oe(e,this,r)})}),Wi=W(function(e,n){var t=wn(n,rt(Wi));return dn(e,T,l,n,t)}),lu=W(function(e,n){var t=wn(n,rt(lu));return dn(e,I,l,n,t)}),ah=hn(function(e,n){return dn(e,M,l,l,l,n)});function uh(e,n){if(typeof e!="function")throw new Ge(K);return n=n===l?n:F(n),W(e,n)}function lh(e,n){if(typeof e!="function")throw new Ge(K);return n=n==null?0:he(F(n),0),W(function(t){var r=t[n],i=Sn(t,0,n);return r&&yn(i,r),Oe(e,this,i)})}function ch(e,n,t){var r=!0,i=!0;if(typeof e!="function")throw new Ge(K);return ie(t)&&(r="leading"in t?!!t.leading:r,i="trailing"in t?!!t.trailing:i),uu(e,n,{leading:r,maxWait:n,trailing:i})}function oh(e){return tu(e,1)}function fh(e,n){return Wi(yi(n),e)}function dh(){if(!arguments.length)return[];var e=arguments[0];return L(e)?e:[e]}function hh(e){return ze(e,se)}function ph(e,n){return n=typeof n=="function"?n:l,ze(e,se,n)}function xh(e){return ze(e,B|se)}function gh(e,n){return n=typeof n=="function"?n:l,ze(e,B|se,n)}function mh(e,n){return n==null||Zs(e,n,xe(n))}function en(e,n){return e===n||e!==e&&n!==n}var _h=fr(ci),vh=fr(function(e,n){return e>=n}),Hn=na((function(){return arguments})())?na:function(e){return ue(e)&&X.call(e,"callee")&&!qs.call(e,"callee")},L=h.isArray,bh=ws?Pe(ws):So;function Te(e){return e!=null&&br(e.length)&&!xn(e)}function le(e){return ue(e)&&Te(e)}function yh(e){return e===!0||e===!1||ue(e)&&Ae(e)==ut}var In=Fc||Yi,wh=Ns?Pe(Ns):Io;function Nh(e){return ue(e)&&e.nodeType===1&&!It(e)}function jh(e){if(e==null)return!0;if(Te(e)&&(L(e)||typeof e=="string"||typeof e.splice=="function"||In(e)||it(e)||Hn(e)))return!e.length;var n=Ne(e);if(n==Xe||n==Je)return!e.size;if(Ct(e))return!di(e).length;for(var t in e)if(X.call(e,t))return!1;return!0}function Ah(e,n){return Nt(e,n)}function Ch(e,n,t){t=typeof t=="function"?t:l;var r=t?t(e,n):l;return r===l?Nt(e,n,l,t):!!r}function Mi(e){if(!ue(e))return!1;var n=Ae(e);return n==Lt||n==ku||typeof e.message=="string"&&typeof e.name=="string"&&!It(e)}function Sh(e){return typeof e=="number"&&Hs(e)}function xn(e){if(!ie(e))return!1;var n=Ae(e);return n==Ft||n==Xi||n==$u||n==Zu}function cu(e){return typeof e=="number"&&e==F(e)}function br(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=vn}function ie(e){var n=typeof e;return e!=null&&(n=="object"||n=="function")}function ue(e){return e!=null&&typeof e=="object"}var ou=js?Pe(js):To;function Ih(e,n){return e===n||fi(e,n,Ii(n))}function Eh(e,n,t){return t=typeof t=="function"?t:l,fi(e,n,Ii(n),t)}function Th(e){return fu(e)&&e!=+e}function Rh(e){if(pf(e))throw new R(J);return ta(e)}function Lh(e){return e===null}function Fh(e){return e==null}function fu(e){return typeof e=="number"||ue(e)&&Ae(e)==ct}function It(e){if(!ue(e)||Ae(e)!=ln)return!1;var n=kt(e);if(n===null)return!0;var t=X.call(n,"constructor")&&n.constructor;return typeof t=="function"&&t instanceof t&&Ht.call(t)==Sc}var Bi=As?Pe(As):Ro;function Oh(e){return cu(e)&&e>=-vn&&e<=vn}var du=Cs?Pe(Cs):Lo;function yr(e){return typeof e=="string"||!L(e)&&ue(e)&&Ae(e)==ft}function We(e){return typeof e=="symbol"||ue(e)&&Ae(e)==Ot}var it=Ss?Pe(Ss):Fo;function Ph(e){return e===l}function Dh(e){return ue(e)&&Ne(e)==dt}function Wh(e){return ue(e)&&Ae(e)==Ju}var Mh=fr(hi),Bh=fr(function(e,n){return e<=n});function hu(e){if(!e)return[];if(Te(e))return yr(e)?Qe(e):Ee(e);if(xt&&e[xt])return xc(e[xt]());var n=Ne(e),t=n==Xe?ei:n==Je?Ut:st;return t(e)}function gn(e){if(!e)return e===0?e:0;if(e=ke(e),e===un||e===-un){var n=e<0?-1:1;return n*Gu}return e===e?e:0}function F(e){var n=gn(e),t=n%1;return n===n?t?n-t:n:0}function pu(e){return e?Bn(F(e),0,tn):0}function ke(e){if(typeof e=="number")return e;if(We(e))return Tt;if(ie(e)){var n=typeof e.valueOf=="function"?e.valueOf():e;e=ie(n)?n+"":n}if(typeof e!="string")return e===0?e:+e;e=Fs(e);var t=_l.test(e);return t||bl.test(e)?Ql(e.slice(2),t?2:8):ml.test(e)?Tt:+e}function xu(e){return sn(e,Re(e))}function Uh(e){return e?Bn(F(e),-vn,vn):e===0?e:0}function $(e){return e==null?"":De(e)}var qh=nt(function(e,n){if(Ct(n)||Te(n)){sn(n,xe(n),e);return}for(var t in n)X.call(n,t)&&bt(e,t,n[t])}),gu=nt(function(e,n){sn(n,Re(n),e)}),wr=nt(function(e,n,t,r){sn(n,Re(n),e,r)}),Gh=nt(function(e,n,t,r){sn(n,xe(n),e,r)}),Hh=hn(ai);function zh(e,n){var t=et(e);return n==null?t:Ys(t,n)}var Kh=W(function(e,n){e=Q(e);var t=-1,r=n.length,i=r>2?n[2]:l;for(i&&Ce(n[0],n[1],i)&&(r=1);++t<r;)for(var u=n[t],c=Re(u),o=-1,d=c.length;++o<d;){var x=c[o],g=e[x];(g===l||en(g,Jn[x])&&!X.call(e,x))&&(e[x]=u[x])}return e}),$h=W(function(e){return e.push(l,Fa),Oe(mu,l,e)});function kh(e,n){return Es(e,A(n,3),rn)}function Yh(e,n){return Es(e,A(n,3),li)}function Zh(e,n){return e==null?e:ui(e,A(n,3),Re)}function Xh(e,n){return e==null?e:Vs(e,A(n,3),Re)}function Jh(e,n){return e&&rn(e,A(n,3))}function Qh(e,n){return e&&li(e,A(n,3))}function Vh(e){return e==null?[]:rr(e,xe(e))}function ep(e){return e==null?[]:rr(e,Re(e))}function Ui(e,n,t){var r=e==null?l:Un(e,n);return r===l?t:r}function np(e,n){return e!=null&&Da(e,n,No)}function qi(e,n){return e!=null&&Da(e,n,jo)}var tp=Ia(function(e,n,t){n!=null&&typeof n.toString!="function"&&(n=zt.call(n)),e[n]=t},Hi(Le)),rp=Ia(function(e,n,t){n!=null&&typeof n.toString!="function"&&(n=zt.call(n)),X.call(e,n)?e[n].push(t):e[n]=[t]},A),ip=W(wt);function xe(e){return Te(e)?$s(e):di(e)}function Re(e){return Te(e)?$s(e,!0):Oo(e)}function sp(e,n){var t={};return n=A(n,3),rn(e,function(r,i,u){fn(t,n(r,i,u),r)}),t}function ap(e,n){var t={};return n=A(n,3),rn(e,function(r,i,u){fn(t,i,n(r,i,u))}),t}var up=nt(function(e,n,t){ir(e,n,t)}),mu=nt(function(e,n,t,r){ir(e,n,t,r)}),lp=hn(function(e,n){var t={};if(e==null)return t;var r=!1;n=te(n,function(u){return u=Cn(u,e),r||(r=u.length>1),u}),sn(e,Ci(e),t),r&&(t=ze(t,B|be|se,nf));for(var i=n.length;i--;)_i(t,n[i]);return t});function cp(e,n){return _u(e,vr(A(n)))}var op=hn(function(e,n){return e==null?{}:Do(e,n)});function _u(e,n){if(e==null)return{};var t=te(Ci(e),function(r){return[r]});return n=A(n),ca(e,t,function(r,i){return n(r,i[0])})}function fp(e,n,t){n=Cn(n,e);var r=-1,i=n.length;for(i||(i=1,e=l);++r<i;){var u=e==null?l:e[an(n[r])];u===l&&(r=i,u=t),e=xn(u)?u.call(e):u}return e}function dp(e,n,t){return e==null?e:jt(e,n,t)}function hp(e,n,t,r){return r=typeof r=="function"?r:l,e==null?e:jt(e,n,t,r)}var vu=Ra(xe),bu=Ra(Re);function pp(e,n,t){var r=L(e),i=r||In(e)||it(e);if(n=A(n,4),t==null){var u=e&&e.constructor;i?t=r?new u:[]:ie(e)?t=xn(u)?et(kt(e)):{}:t={}}return(i?qe:rn)(e,function(c,o,d){return n(t,c,o,d)}),t}function xp(e,n){return e==null?!0:_i(e,n)}function gp(e,n,t){return e==null?e:pa(e,n,yi(t))}function mp(e,n,t,r){return r=typeof r=="function"?r:l,e==null?e:pa(e,n,yi(t),r)}function st(e){return e==null?[]:Vr(e,xe(e))}function _p(e){return e==null?[]:Vr(e,Re(e))}function vp(e,n,t){return t===l&&(t=n,n=l),t!==l&&(t=ke(t),t=t===t?t:0),n!==l&&(n=ke(n),n=n===n?n:0),Bn(ke(e),n,t)}function bp(e,n,t){return n=gn(n),t===l?(t=n,n=0):t=gn(t),e=ke(e),Ao(e,n,t)}function yp(e,n,t){if(t&&typeof t!="boolean"&&Ce(e,n,t)&&(n=t=l),t===l&&(typeof n=="boolean"?(t=n,n=l):typeof e=="boolean"&&(t=e,e=l)),e===l&&n===l?(e=0,n=1):(e=gn(e),n===l?(n=e,e=0):n=gn(n)),e>n){var r=e;e=n,n=r}if(t||e%1||n%1){var i=zs();return we(e+i*(n-e+Jl("1e-"+((i+"").length-1))),n)}return xi(e,n)}var wp=tt(function(e,n,t){return n=n.toLowerCase(),e+(t?yu(n):n)});function yu(e){return Gi($(e).toLowerCase())}function wu(e){return e=$(e),e&&e.replace(wl,oc).replace(ql,"")}function Np(e,n,t){e=$(e),n=De(n);var r=e.length;t=t===l?r:Bn(F(t),0,r);var i=t;return t-=n.length,t>=0&&e.slice(t,i)==n}function jp(e){return e=$(e),e&&tl.test(e)?e.replace(Vi,fc):e}function Ap(e){return e=$(e),e&&ll.test(e)?e.replace(Wr,"\\$&"):e}var Cp=tt(function(e,n,t){return e+(t?"-":"")+n.toLowerCase()}),Sp=tt(function(e,n,t){return e+(t?" ":"")+n.toLowerCase()}),Ip=Aa("toLowerCase");function Ep(e,n,t){e=$(e),n=F(n);var r=n?Zn(e):0;if(!n||r>=n)return e;var i=(n-r)/2;return or(Jt(i),t)+e+or(Xt(i),t)}function Tp(e,n,t){e=$(e),n=F(n);var r=n?Zn(e):0;return n&&r<n?e+or(n-r,t):e}function Rp(e,n,t){e=$(e),n=F(n);var r=n?Zn(e):0;return n&&r<n?or(n-r,t)+e:e}function Lp(e,n,t){return t||n==null?n=0:n&&(n=+n),Wc($(e).replace(Mr,""),n||0)}function Fp(e,n,t){return(t?Ce(e,n,t):n===l)?n=1:n=F(n),gi($(e),n)}function Op(){var e=arguments,n=$(e[0]);return e.length<3?n:n.replace(e[1],e[2])}var Pp=tt(function(e,n,t){return e+(t?"_":"")+n.toLowerCase()});function Dp(e,n,t){return t&&typeof t!="number"&&Ce(e,n,t)&&(n=t=l),t=t===l?tn:t>>>0,t?(e=$(e),e&&(typeof n=="string"||n!=null&&!Bi(n))&&(n=De(n),!n&&Yn(e))?Sn(Qe(e),0,t):e.split(n,t)):[]}var Wp=tt(function(e,n,t){return e+(t?" ":"")+Gi(n)});function Mp(e,n,t){return e=$(e),t=t==null?0:Bn(F(t),0,e.length),n=De(n),e.slice(t,t+n.length)==n}function Bp(e,n,t){var r=a.templateSettings;t&&Ce(e,n,t)&&(n=l),e=$(e),n=wr({},n,r,La);var i=wr({},n.imports,r.imports,La),u=xe(i),c=Vr(i,u),o,d,x=0,g=n.interpolate||Pt,_="__p += '",b=ni((n.escape||Pt).source+"|"+g.source+"|"+(g===es?gl:Pt).source+"|"+(n.evaluate||Pt).source+"|$","g"),N="//# sourceURL="+(X.call(n,"sourceURL")?(n.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++$l+"]")+`
`;e.replace(b,function(S,U,G,Me,Se,Be){return G||(G=Me),_+=e.slice(x,Be).replace(Nl,dc),U&&(o=!0,_+=`' +
__e(`+U+`) +
'`),Se&&(d=!0,_+=`';
`+Se+`;
__p += '`),G&&(_+=`' +
((__t = (`+G+`)) == null ? '' : __t) +
'`),x=Be+S.length,S}),_+=`';
`;var C=X.call(n,"variable")&&n.variable;if(!C)_=`with (obj) {
`+_+`
}
`;else if(pl.test(C))throw new R(v);_=(d?_.replace(Qu,""):_).replace(Vu,"$1").replace(el,"$1;"),_="function("+(C||"obj")+`) {
`+(C?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(o?", __e = _.escape":"")+(d?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+_+`return __p
}`;var P=ju(function(){return z(u,N+"return "+_).apply(l,c)});if(P.source=_,Mi(P))throw P;return P}function Up(e){return $(e).toLowerCase()}function qp(e){return $(e).toUpperCase()}function Gp(e,n,t){if(e=$(e),e&&(t||n===l))return Fs(e);if(!e||!(n=De(n)))return e;var r=Qe(e),i=Qe(n),u=Os(r,i),c=Ps(r,i)+1;return Sn(r,u,c).join("")}function Hp(e,n,t){if(e=$(e),e&&(t||n===l))return e.slice(0,Ws(e)+1);if(!e||!(n=De(n)))return e;var r=Qe(e),i=Ps(r,Qe(n))+1;return Sn(r,0,i).join("")}function zp(e,n,t){if(e=$(e),e&&(t||n===l))return e.replace(Mr,"");if(!e||!(n=De(n)))return e;var r=Qe(e),i=Os(r,Qe(n));return Sn(r,i).join("")}function Kp(e,n){var t=O,r=fe;if(ie(n)){var i="separator"in n?n.separator:i;t="length"in n?F(n.length):t,r="omission"in n?De(n.omission):r}e=$(e);var u=e.length;if(Yn(e)){var c=Qe(e);u=c.length}if(t>=u)return e;var o=t-Zn(r);if(o<1)return r;var d=c?Sn(c,0,o).join(""):e.slice(0,o);if(i===l)return d+r;if(c&&(o+=d.length-o),Bi(i)){if(e.slice(o).search(i)){var x,g=d;for(i.global||(i=ni(i.source,$(ns.exec(i))+"g")),i.lastIndex=0;x=i.exec(g);)var _=x.index;d=d.slice(0,_===l?o:_)}}else if(e.indexOf(De(i),o)!=o){var b=d.lastIndexOf(i);b>-1&&(d=d.slice(0,b))}return d+r}function $p(e){return e=$(e),e&&nl.test(e)?e.replace(Qi,vc):e}var kp=tt(function(e,n,t){return e+(t?" ":"")+n.toUpperCase()}),Gi=Aa("toUpperCase");function Nu(e,n,t){return e=$(e),n=t?l:n,n===l?pc(e)?wc(e):sc(e):e.match(n)||[]}var ju=W(function(e,n){try{return Oe(e,l,n)}catch(t){return Mi(t)?t:new R(t)}}),Yp=hn(function(e,n){return qe(n,function(t){t=an(t),fn(e,t,Di(e[t],e))}),e});function Zp(e){var n=e==null?0:e.length,t=A();return e=n?te(e,function(r){if(typeof r[1]!="function")throw new Ge(K);return[t(r[0]),r[1]]}):[],W(function(r){for(var i=-1;++i<n;){var u=e[i];if(Oe(u[0],this,r))return Oe(u[1],this,r)}})}function Xp(e){return bo(ze(e,B))}function Hi(e){return function(){return e}}function Jp(e,n){return e==null||e!==e?n:e}var Qp=Sa(),Vp=Sa(!0);function Le(e){return e}function zi(e){return ra(typeof e=="function"?e:ze(e,B))}function ex(e){return sa(ze(e,B))}function nx(e,n){return aa(e,ze(n,B))}var tx=W(function(e,n){return function(t){return wt(t,e,n)}}),rx=W(function(e,n){return function(t){return wt(e,t,n)}});function Ki(e,n,t){var r=xe(n),i=rr(n,r);t==null&&!(ie(n)&&(i.length||!r.length))&&(t=n,n=e,e=this,i=rr(n,xe(n)));var u=!(ie(t)&&"chain"in t)||!!t.chain,c=xn(e);return qe(i,function(o){var d=n[o];e[o]=d,c&&(e.prototype[o]=function(){var x=this.__chain__;if(u||x){var g=e(this.__wrapped__),_=g.__actions__=Ee(this.__actions__);return _.push({func:d,args:arguments,thisArg:e}),g.__chain__=x,g}return d.apply(e,yn([this.value()],arguments))})}),e}function ix(){return ge._===this&&(ge._=Ic),this}function $i(){}function sx(e){return e=F(e),W(function(n){return ua(n,e)})}var ax=Ni(te),ux=Ni(Is),lx=Ni(Yr);function Au(e){return Ti(e)?Zr(an(e)):Wo(e)}function cx(e){return function(n){return e==null?l:Un(e,n)}}var ox=Ea(),fx=Ea(!0);function ki(){return[]}function Yi(){return!1}function dx(){return{}}function hx(){return""}function px(){return!0}function xx(e,n){if(e=F(e),e<1||e>vn)return[];var t=tn,r=we(e,tn);n=A(n),e-=tn;for(var i=Qr(r,n);++t<e;)n(t);return i}function gx(e){return L(e)?te(e,an):We(e)?[e]:Ee(Ka($(e)))}function mx(e){var n=++Cc;return $(e)+n}var _x=cr(function(e,n){return e+n},0),vx=ji("ceil"),bx=cr(function(e,n){return e/n},1),yx=ji("floor");function wx(e){return e&&e.length?tr(e,Le,ci):l}function Nx(e,n){return e&&e.length?tr(e,A(n,2),ci):l}function jx(e){return Rs(e,Le)}function Ax(e,n){return Rs(e,A(n,2))}function Cx(e){return e&&e.length?tr(e,Le,hi):l}function Sx(e,n){return e&&e.length?tr(e,A(n,2),hi):l}var Ix=cr(function(e,n){return e*n},1),Ex=ji("round"),Tx=cr(function(e,n){return e-n},0);function Rx(e){return e&&e.length?Jr(e,Le):0}function Lx(e,n){return e&&e.length?Jr(e,A(n,2)):0}return a.after=eh,a.ary=tu,a.assign=qh,a.assignIn=gu,a.assignInWith=wr,a.assignWith=Gh,a.at=Hh,a.before=ru,a.bind=Di,a.bindAll=Yp,a.bindKey=iu,a.castArray=dh,a.chain=Va,a.chunk=yf,a.compact=wf,a.concat=Nf,a.cond=Zp,a.conforms=Xp,a.constant=Hi,a.countBy=Rd,a.create=zh,a.curry=su,a.curryRight=au,a.debounce=uu,a.defaults=Kh,a.defaultsDeep=$h,a.defer=nh,a.delay=th,a.difference=jf,a.differenceBy=Af,a.differenceWith=Cf,a.drop=Sf,a.dropRight=If,a.dropRightWhile=Ef,a.dropWhile=Tf,a.fill=Rf,a.filter=Fd,a.flatMap=Dd,a.flatMapDeep=Wd,a.flatMapDepth=Md,a.flatten=Za,a.flattenDeep=Lf,a.flattenDepth=Ff,a.flip=rh,a.flow=Qp,a.flowRight=Vp,a.fromPairs=Of,a.functions=Vh,a.functionsIn=ep,a.groupBy=Bd,a.initial=Df,a.intersection=Wf,a.intersectionBy=Mf,a.intersectionWith=Bf,a.invert=tp,a.invertBy=rp,a.invokeMap=qd,a.iteratee=zi,a.keyBy=Gd,a.keys=xe,a.keysIn=Re,a.map=gr,a.mapKeys=sp,a.mapValues=ap,a.matches=ex,a.matchesProperty=nx,a.memoize=_r,a.merge=up,a.mergeWith=mu,a.method=tx,a.methodOf=rx,a.mixin=Ki,a.negate=vr,a.nthArg=sx,a.omit=lp,a.omitBy=cp,a.once=ih,a.orderBy=Hd,a.over=ax,a.overArgs=sh,a.overEvery=ux,a.overSome=lx,a.partial=Wi,a.partialRight=lu,a.partition=zd,a.pick=op,a.pickBy=_u,a.property=Au,a.propertyOf=cx,a.pull=Hf,a.pullAll=Ja,a.pullAllBy=zf,a.pullAllWith=Kf,a.pullAt=$f,a.range=ox,a.rangeRight=fx,a.rearg=ah,a.reject=kd,a.remove=kf,a.rest=uh,a.reverse=Oi,a.sampleSize=Zd,a.set=dp,a.setWith=hp,a.shuffle=Xd,a.slice=Yf,a.sortBy=Vd,a.sortedUniq=nd,a.sortedUniqBy=td,a.split=Dp,a.spread=lh,a.tail=rd,a.take=id,a.takeRight=sd,a.takeRightWhile=ad,a.takeWhile=ud,a.tap=wd,a.throttle=ch,a.thru=xr,a.toArray=hu,a.toPairs=vu,a.toPairsIn=bu,a.toPath=gx,a.toPlainObject=xu,a.transform=pp,a.unary=oh,a.union=ld,a.unionBy=cd,a.unionWith=od,a.uniq=fd,a.uniqBy=dd,a.uniqWith=hd,a.unset=xp,a.unzip=Pi,a.unzipWith=Qa,a.update=gp,a.updateWith=mp,a.values=st,a.valuesIn=_p,a.without=pd,a.words=Nu,a.wrap=fh,a.xor=xd,a.xorBy=gd,a.xorWith=md,a.zip=_d,a.zipObject=vd,a.zipObjectDeep=bd,a.zipWith=yd,a.entries=vu,a.entriesIn=bu,a.extend=gu,a.extendWith=wr,Ki(a,a),a.add=_x,a.attempt=ju,a.camelCase=wp,a.capitalize=yu,a.ceil=vx,a.clamp=vp,a.clone=hh,a.cloneDeep=xh,a.cloneDeepWith=gh,a.cloneWith=ph,a.conformsTo=mh,a.deburr=wu,a.defaultTo=Jp,a.divide=bx,a.endsWith=Np,a.eq=en,a.escape=jp,a.escapeRegExp=Ap,a.every=Ld,a.find=Od,a.findIndex=ka,a.findKey=kh,a.findLast=Pd,a.findLastIndex=Ya,a.findLastKey=Yh,a.floor=yx,a.forEach=eu,a.forEachRight=nu,a.forIn=Zh,a.forInRight=Xh,a.forOwn=Jh,a.forOwnRight=Qh,a.get=Ui,a.gt=_h,a.gte=vh,a.has=np,a.hasIn=qi,a.head=Xa,a.identity=Le,a.includes=Ud,a.indexOf=Pf,a.inRange=bp,a.invoke=ip,a.isArguments=Hn,a.isArray=L,a.isArrayBuffer=bh,a.isArrayLike=Te,a.isArrayLikeObject=le,a.isBoolean=yh,a.isBuffer=In,a.isDate=wh,a.isElement=Nh,a.isEmpty=jh,a.isEqual=Ah,a.isEqualWith=Ch,a.isError=Mi,a.isFinite=Sh,a.isFunction=xn,a.isInteger=cu,a.isLength=br,a.isMap=ou,a.isMatch=Ih,a.isMatchWith=Eh,a.isNaN=Th,a.isNative=Rh,a.isNil=Fh,a.isNull=Lh,a.isNumber=fu,a.isObject=ie,a.isObjectLike=ue,a.isPlainObject=It,a.isRegExp=Bi,a.isSafeInteger=Oh,a.isSet=du,a.isString=yr,a.isSymbol=We,a.isTypedArray=it,a.isUndefined=Ph,a.isWeakMap=Dh,a.isWeakSet=Wh,a.join=Uf,a.kebabCase=Cp,a.last=$e,a.lastIndexOf=qf,a.lowerCase=Sp,a.lowerFirst=Ip,a.lt=Mh,a.lte=Bh,a.max=wx,a.maxBy=Nx,a.mean=jx,a.meanBy=Ax,a.min=Cx,a.minBy=Sx,a.stubArray=ki,a.stubFalse=Yi,a.stubObject=dx,a.stubString=hx,a.stubTrue=px,a.multiply=Ix,a.nth=Gf,a.noConflict=ix,a.noop=$i,a.now=mr,a.pad=Ep,a.padEnd=Tp,a.padStart=Rp,a.parseInt=Lp,a.random=yp,a.reduce=Kd,a.reduceRight=$d,a.repeat=Fp,a.replace=Op,a.result=fp,a.round=Ex,a.runInContext=f,a.sample=Yd,a.size=Jd,a.snakeCase=Pp,a.some=Qd,a.sortedIndex=Zf,a.sortedIndexBy=Xf,a.sortedIndexOf=Jf,a.sortedLastIndex=Qf,a.sortedLastIndexBy=Vf,a.sortedLastIndexOf=ed,a.startCase=Wp,a.startsWith=Mp,a.subtract=Tx,a.sum=Rx,a.sumBy=Lx,a.template=Bp,a.times=xx,a.toFinite=gn,a.toInteger=F,a.toLength=pu,a.toLower=Up,a.toNumber=ke,a.toSafeInteger=Uh,a.toString=$,a.toUpper=qp,a.trim=Gp,a.trimEnd=Hp,a.trimStart=zp,a.truncate=Kp,a.unescape=$p,a.uniqueId=mx,a.upperCase=kp,a.upperFirst=Gi,a.each=eu,a.eachRight=nu,a.first=Xa,Ki(a,(function(){var e={};return rn(a,function(n,t){X.call(a.prototype,t)||(e[t]=n)}),e})(),{chain:!1}),a.VERSION=_e,qe(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){a[e].placeholder=a}),qe(["drop","take"],function(e,n){q.prototype[e]=function(t){t=t===l?1:he(F(t),0);var r=this.__filtered__&&!n?new q(this):this.clone();return r.__filtered__?r.__takeCount__=we(t,r.__takeCount__):r.__views__.push({size:we(t,tn),type:e+(r.__dir__<0?"Right":"")}),r},q.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}}),qe(["filter","map","takeWhile"],function(e,n){var t=n+1,r=t==On||t==Zi;q.prototype[e]=function(i){var u=this.clone();return u.__iteratees__.push({iteratee:A(i,3),type:t}),u.__filtered__=u.__filtered__||r,u}}),qe(["head","last"],function(e,n){var t="take"+(n?"Right":"");q.prototype[e]=function(){return this[t](1).value()[0]}}),qe(["initial","tail"],function(e,n){var t="drop"+(n?"":"Right");q.prototype[e]=function(){return this.__filtered__?new q(this):this[t](1)}}),q.prototype.compact=function(){return this.filter(Le)},q.prototype.find=function(e){return this.filter(e).head()},q.prototype.findLast=function(e){return this.reverse().find(e)},q.prototype.invokeMap=W(function(e,n){return typeof e=="function"?new q(this):this.map(function(t){return wt(t,e,n)})}),q.prototype.reject=function(e){return this.filter(vr(A(e)))},q.prototype.slice=function(e,n){e=F(e);var t=this;return t.__filtered__&&(e>0||n<0)?new q(t):(e<0?t=t.takeRight(-e):e&&(t=t.drop(e)),n!==l&&(n=F(n),t=n<0?t.dropRight(-n):t.take(n-e)),t)},q.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},q.prototype.toArray=function(){return this.take(tn)},rn(q.prototype,function(e,n){var t=/^(?:filter|find|map|reject)|While$/.test(n),r=/^(?:head|last)$/.test(n),i=a[r?"take"+(n=="last"?"Right":""):n],u=r||/^find/.test(n);i&&(a.prototype[n]=function(){var c=this.__wrapped__,o=r?[1]:arguments,d=c instanceof q,x=o[0],g=d||L(c),_=function(U){var G=i.apply(a,yn([U],o));return r&&b?G[0]:G};g&&t&&typeof x=="function"&&x.length!=1&&(d=g=!1);var b=this.__chain__,N=!!this.__actions__.length,C=u&&!b,P=d&&!N;if(!u&&g){c=P?c:new q(this);var S=e.apply(c,o);return S.__actions__.push({func:xr,args:[_],thisArg:l}),new He(S,b)}return C&&P?e.apply(this,o):(S=this.thru(_),C?r?S.value()[0]:S.value():S)})}),qe(["pop","push","shift","sort","splice","unshift"],function(e){var n=qt[e],t=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);a.prototype[e]=function(){var i=arguments;if(r&&!this.__chain__){var u=this.value();return n.apply(L(u)?u:[],i)}return this[t](function(c){return n.apply(L(c)?c:[],i)})}}),rn(q.prototype,function(e,n){var t=a[n];if(t){var r=t.name+"";X.call(Vn,r)||(Vn[r]=[]),Vn[r].push({name:n,func:t})}}),Vn[lr(l,E).name]=[{name:"wrapper",func:l}],q.prototype.clone=zc,q.prototype.reverse=Kc,q.prototype.value=$c,a.prototype.at=Nd,a.prototype.chain=jd,a.prototype.commit=Ad,a.prototype.next=Cd,a.prototype.plant=Id,a.prototype.reverse=Ed,a.prototype.toJSON=a.prototype.valueOf=a.prototype.value=Td,a.prototype.first=a.prototype.head,xt&&(a.prototype[xt]=Sd),a}),Xn=Nc();Pn?((Pn.exports=Xn)._=Xn,zr._=Xn):ge._=Xn}).call($x)})(Et,Et.exports)),Et.exports}var Yx=kx();const Zx=({transaction:D,onClose:re})=>{const l=()=>{window.print()},_e=D.sale_items.reduce((v,k)=>v+parseFloat(k.total),0);return s.jsx("div",{className:"receipt-print-wrapper fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4 print:static print:block print:bg-transparent print:p-0",children:s.jsxs("div",{className:"receipt-container max-h-[90vh] w-full max-w-md overflow-y-auto rounded-lg bg-white p-6 shadow-xl print:max-h-none print:overflow-visible print:rounded-none print:shadow-none",children:[s.jsxs("div",{className:"mb-4 text-center print:mb-2",children:[s.jsx("div",{className:"mx-auto mb-2 w-full border-b-2 border-dashed border-black print:mb-1 print:border-b"}),s.jsx("h1",{className:"text-xl font-bold tracking-wide uppercase print:text-base",children:"NOKWARFO NYAME COLD STORE"}),s.jsx("p",{className:"text-sm text-gray-600 print:text-xs print:text-black",children:"Kasoa"}),s.jsxs("p",{className:"text-sm text-gray-600 print:text-xs print:text-black",children:["Tel: ","024 375 6588 / 024 693 7080 / 055 515 1777"]}),s.jsx("div",{className:"mx-auto mt-2 w-full border-b-2 border-dashed border-black print:mt-1 print:border-b"})]}),s.jsx("div",{className:"mb-4 text-center print:mb-2",children:s.jsx("span",{className:"inline-block rounded bg-red-100 px-4 py-1 text-lg font-bold text-red-700 print:border print:border-black print:bg-transparent print:px-0 print:py-0 print:text-sm print:text-black",children:"CREDIT SALE"})}),s.jsxs("div",{className:"mb-4 space-y-2 text-sm print:mb-2 print:space-y-1 print:text-xs",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"font-semibold",children:"Receipt #:"}),s.jsx("span",{className:"font-mono",children:D.id})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"font-semibold",children:"Date:"}),s.jsx("span",{children:D.date})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"font-semibold",children:"Creditor:"}),s.jsx("span",{className:"max-w-[60%] truncate text-right",children:D.customer||"Walk-in Customer"})]})]}),s.jsx("div",{className:"my-3 border-t border-dashed border-gray-400 print:my-1 print:border-black"}),s.jsxs("table",{className:"mb-4 w-full text-sm print:mb-2 print:text-[11px]",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b-2 border-black",children:[s.jsx("th",{className:"pb-2 text-left font-bold print:pb-1",children:"Item"}),s.jsx("th",{className:"pb-2 text-center font-bold print:pb-1",children:"Qty"}),s.jsx("th",{className:"pb-2 text-right font-bold print:pb-1",children:"Price"}),s.jsx("th",{className:"pb-2 text-right font-bold print:pb-1",children:"Total"})]})}),s.jsx("tbody",{children:D.sale_items.map((v,k)=>s.jsxs("tr",{className:"border-b border-gray-200 print:border-gray-400",children:[s.jsx("td",{className:"py-2 pr-1 print:max-w-[80px] print:truncate print:py-1",children:v.product}),s.jsx("td",{className:"py-2 text-center print:py-1",children:v.quantity}),s.jsx("td",{className:"py-2 text-right print:py-1",children:parseFloat(v.unit_selling_price).toFixed(2)}),s.jsx("td",{className:"py-2 text-right font-medium print:py-1",children:parseFloat(v.total).toFixed(2)})]},k))})]}),s.jsxs("div",{className:"space-y-2 border-t-2 border-black pt-3 print:space-y-1 print:pt-2",children:[s.jsxs("div",{className:"flex justify-between text-base print:text-xs",children:[s.jsx("span",{className:"font-semibold",children:"Subtotal:"}),s.jsxs("span",{children:["GH₵ ",_e.toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between text-base print:text-xs",children:[s.jsx("span",{className:"font-semibold",children:"Amount Paid:"}),s.jsxs("span",{children:["GH₵ ",parseFloat(D.amount_paid).toFixed(2)]})]}),s.jsx("div",{className:"my-2 border-t border-dashed border-gray-400 print:my-1 print:border-black"}),s.jsxs("div",{className:"flex justify-between text-lg font-bold print:text-sm",children:[s.jsx("span",{className:"text-red-600 print:text-black",children:"BALANCE DUE:"}),s.jsxs("span",{className:"text-red-600 print:text-black",children:["GH₵ ",parseFloat(D.amount_owed).toFixed(2)]})]})]}),s.jsxs("div",{className:"mt-6 border-t-2 border-dashed border-black pt-4 text-center print:mt-3 print:pt-2",children:[s.jsx("p",{className:"text-sm text-gray-500 print:text-[10px] print:text-black",children:"Goods sold are NOT returnable."}),s.jsx("p",{className:"mt-2 text-sm font-semibold print:mt-1 print:text-xs",children:"Thank You For Your Patronage!"}),s.jsx("div",{className:"mt-3 text-[10px] text-gray-400 print:mt-2 print:text-[10px] print:text-black",children:"*** CREDIT TRANSACTION ***"})]}),s.jsxs("div",{className:"mt-6 flex gap-3 print:hidden",children:[s.jsxs(je,{onClick:l,className:"flex-1 bg-blue-600 hover:bg-blue-700",children:[s.jsx(qu,{className:"mr-2 h-4 w-4"}),"Print Receipt"]}),s.jsxs(je,{onClick:re,variant:"outline",className:"flex-1",children:[s.jsx(Bu,{className:"mr-2 h-4 w-4"}),"Close"]})]})]})})},Xx=({transaction:D,onClose:re})=>{const l=()=>{window.print()},_e=D.sale_items.reduce((v,k)=>v+parseFloat(k.total),0);return s.jsx("div",{className:"receipt-print-wrapper fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4 print:static print:block print:bg-transparent print:p-0",children:s.jsxs("div",{className:"receipt-container max-h-[90vh] w-full max-w-md overflow-y-auto rounded-lg bg-white p-6 shadow-xl print:max-h-none print:overflow-visible print:rounded-none print:shadow-none",children:[s.jsxs("div",{className:"mb-4 text-center print:mb-2",children:[s.jsx("div",{className:"mx-auto mb-2 w-full border-b-2 border-dashed border-black print:mb-1 print:border-b"}),s.jsx("h1",{className:"text-xl font-bold tracking-wide uppercase print:text-base",children:"NOKWARFO NYAME COLD STORE"}),s.jsx("p",{className:"text-sm text-gray-600 print:text-xs print:text-black",children:"Kasoa"}),s.jsxs("p",{className:"text-sm text-gray-600 print:text-xs print:text-black",children:["Tel: ","024 375 6588 / 024 693 7080 / 055 515 1777"]}),s.jsx("div",{className:"mx-auto mt-2 w-full border-b-2 border-dashed border-black print:mt-1 print:border-b"})]}),s.jsx("div",{className:"mb-4 text-center print:mb-2",children:s.jsx("span",{className:"inline-block rounded bg-green-100 px-4 py-1 text-lg font-bold text-green-700 print:border print:border-black print:bg-transparent print:px-0 print:py-0 print:text-sm print:text-black",children:"CASH SALE"})}),s.jsxs("div",{className:"mb-4 space-y-2 text-sm print:mb-2 print:space-y-1 print:text-xs",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"font-semibold",children:"Receipt #:"}),s.jsx("span",{className:"font-mono",children:D.id})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"font-semibold",children:"Date:"}),s.jsx("span",{children:D.date})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"font-semibold",children:"Customer:"}),s.jsx("span",{className:"max-w-[60%] truncate text-right",children:D.customer||"Walk-in Customer"})]})]}),s.jsx("div",{className:"my-3 border-t border-dashed border-gray-400 print:my-1 print:border-black"}),s.jsxs("table",{className:"mb-4 w-full text-sm print:mb-2 print:text-[11px]",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b-2 border-black",children:[s.jsx("th",{className:"pb-2 text-left font-bold print:pb-1",children:"Item"}),s.jsx("th",{className:"pb-2 text-center font-bold print:pb-1",children:"Qty"}),s.jsx("th",{className:"pb-2 text-right font-bold print:pb-1",children:"Price"}),s.jsx("th",{className:"pb-2 text-right font-bold print:pb-1",children:"Total"})]})}),s.jsx("tbody",{children:D.sale_items.map((v,k)=>s.jsxs("tr",{className:"border-b border-gray-200 print:border-gray-400",children:[s.jsx("td",{className:"py-2 pr-1 print:max-w-[80px] print:truncate print:py-1",children:v.product}),s.jsx("td",{className:"py-2 text-center print:py-1",children:v.quantity}),s.jsx("td",{className:"py-2 text-right print:py-1",children:parseFloat(v.unit_selling_price).toFixed(2)}),s.jsx("td",{className:"py-2 text-right font-medium print:py-1",children:parseFloat(v.total).toFixed(2)})]},k))})]}),s.jsxs("div",{className:"space-y-2 border-t-2 border-black pt-3 print:space-y-1 print:pt-2",children:[s.jsxs("div",{className:"flex justify-between text-lg font-bold print:text-sm",children:[s.jsx("span",{children:"TOTAL:"}),s.jsxs("span",{children:["GH₵ ",_e.toFixed(2)]})]}),s.jsx("div",{className:"my-2 border-t border-dashed border-gray-400 print:my-1 print:border-black"}),s.jsxs("div",{className:"flex justify-between text-base text-green-600 print:text-xs print:text-black",children:[s.jsx("span",{className:"font-semibold",children:"PAID IN FULL"}),s.jsx("span",{children:"✓"})]})]}),s.jsxs("div",{className:"mt-6 border-t-2 border-dashed border-black pt-4 text-center print:mt-3 print:pt-2",children:[s.jsx("p",{className:"text-sm text-gray-500 print:text-[10px] print:text-black",children:"Goods sold are NOT returnable."}),s.jsx("p",{className:"mt-2 text-sm font-semibold print:mt-1 print:text-xs",children:"Thank You For Your Patronage!"}),s.jsx("div",{className:"mt-3 text-[10px] text-gray-400 print:mt-2 print:text-[10px] print:text-black",children:"*** INSTANT PAYMENT ***"})]}),s.jsxs("div",{className:"mt-6 flex gap-3 print:hidden",children:[s.jsxs(je,{onClick:l,className:"flex-1 bg-blue-600 hover:bg-blue-700",children:[s.jsx(qu,{className:"mr-2 h-4 w-4"}),"Print Receipt"]}),s.jsxs(je,{onClick:re,variant:"outline",className:"flex-1",children:[s.jsx(Bu,{className:"mr-2 h-4 w-4"}),"Close"]})]})]})})},Jx=({searchTerm:D,onSearchChange:re})=>s.jsx("div",{className:"mb-4 flex items-center space-x-2",children:s.jsxs("div",{className:"relative flex-1",children:[s.jsx(Hx,{className:"text-muted-foreground absolute top-2.5 left-2 h-4 w-4"}),s.jsx(Ie,{placeholder:"Search by Transaction ID, Customer, or Product...",value:D,onChange:l=>re(l.target.value),className:"pl-8"})]})}),Qx=({sales_transactions:D,onEdit:re})=>{const[l,_e]=V.useState(null),[j,J]=V.useState(null),[K,v]=V.useState(""),k=new Date().toISOString().slice(0,10),ve=new Date(Date.now()-2880*60*1e3).toISOString().slice(0,10),[oe,B]=V.useState(ve),[be,se]=V.useState(k),pe=D.current_page,ae=V.useCallback(Yx.debounce((m,T,I,Z)=>{Su.get(route("sales-transactions.index"),{search:m,start_date:T,end_date:I,page:Z},{preserveState:!0,preserveScroll:!0,replace:!0})},500),[]);V.useEffect(()=>{ae(K,oe,be,pe)},[K,oe,be,pe,ae]);const w=(m,T)=>{T==="start"?B(m):se(m)},E=m=>{window.confirm("Are you sure you want to delete this transaction?")&&Su.delete(route("sales-transactions.destroy",m))},H=m=>{_e(m),m.status==="Completed"&&parseFloat(m.amount_owed)===0?J("instant"):J("credit")},Y=()=>{_e(null),J(null)};return s.jsxs(s.Fragment,{children:[s.jsx(qx,{startDate:oe,endDate:be,onChange:w}),s.jsxs(jr,{children:[s.jsxs(Ar,{children:[s.jsx(Cr,{children:"Sales Transactions"}),s.jsx(Jx,{searchTerm:K,onSearchChange:v})]}),s.jsxs(Sr,{children:[s.jsxs(Mx,{children:[s.jsx(Bx,{children:s.jsxs(Tu,{children:[s.jsx(Ye,{children:"Transaction ID"}),s.jsx(Ye,{children:"Date"}),s.jsx(Ye,{children:"Customer"}),s.jsx(Ye,{children:"Product"}),s.jsx(Ye,{children:"Quantity"}),s.jsx(Ye,{children:"Unit Price"}),s.jsx(Ye,{children:"Total"}),s.jsx(Ye,{children:"Payment Type"}),s.jsx(Ye,{children:"Amount Paid"}),s.jsx(Ye,{children:"Amount Owed"}),s.jsx(Ye,{children:"Status"}),s.jsx(Ye,{children:"Actions"})]})}),s.jsx(Ux,{children:D.data.map(m=>s.jsxs(Tu,{children:[s.jsx(Ze,{className:"font-medium",children:m.id}),s.jsx(Ze,{children:m.date}),s.jsx(Ze,{children:m.customer}),s.jsx(Ze,{children:m.sale_items.map((T,I)=>s.jsx("div",{children:T.product},I))}),s.jsx(Ze,{children:m.sale_items.map((T,I)=>s.jsx("div",{children:T.quantity},I))}),s.jsx(Ze,{children:m.sale_items.map((T,I)=>s.jsxs("div",{children:["GH₵",parseFloat(T.unit_selling_price).toFixed(2)]},I))}),s.jsx(Ze,{className:"font-medium",children:m.sale_items.map((T,I)=>s.jsxs("div",{children:["GH₵",parseFloat(T.total).toFixed(2)]},I))}),s.jsx(Ze,{children:s.jsx(Eu,{variant:m.status==="Partial"?"secondary":m.payment_type==="Cash"?"default":"secondary",children:m.status==="Partial"?"Partial":m.payment_type})}),s.jsxs(Ze,{children:["GH₵",parseFloat(m.amount_paid).toFixed(2)]}),s.jsxs(Ze,{children:["GH₵",parseFloat(m.amount_owed).toFixed(2)]}),s.jsx(Ze,{children:s.jsx(Eu,{variant:m.status==="Completed"?"default":m.status==="Partial"?"secondary":m.status==="Credit"?"outline":"secondary",children:m.status})}),s.jsx(Ze,{children:s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(je,{variant:"outline",size:"sm",onClick:()=>re&&re(m),className:"text-green-600 hover:text-green-800",children:[s.jsx(Uu,{className:"mr-1 h-4 w-4"}),"Edit"]}),s.jsxs(je,{variant:"outline",size:"sm",onClick:()=>H(m),className:"text-blue-600 hover:text-blue-800",children:[s.jsx(Ox,{className:"mr-1 h-4 w-4"}),"Receipt"]}),s.jsx(je,{variant:"destructive",size:"sm",onClick:()=>E(m.id),className:"text-white",children:"Delete"})]})})]},m.id))})]}),D.data.length===0?s.jsx("div",{className:"text-muted-foreground py-8 text-center",children:"No transactions found matching your search."}):s.jsxs("div",{className:"my-3 flex items-center justify-center gap-4",children:[D.prev_page_url&&s.jsx(Iu,{preserveScroll:!0,preserveState:!0,href:D.prev_page_url,className:"rounded border px-4 py-2 hover:bg-gray-100",children:"« Previous"}),s.jsxs("span",{className:"px-4 py-2 font-medium",children:["Page ",D.current_page]}),D.next_page_url&&s.jsx(Iu,{preserveScroll:!0,preserveState:!0,href:D.next_page_url,className:"rounded border px-4 py-2 hover:bg-gray-100",children:"Next »"})]})]})]}),l&&j==="instant"&&s.jsx(Xx,{transaction:l,onClose:Y}),l&&j==="credit"&&s.jsx(Zx,{transaction:l,onClose:Y})]})};function mg({sales_transactions:D=[],products:re=[],customers:l=[]}){const[_e,j]=V.useState(!1),[J,K]=V.useState(!1),[v,k]=V.useState(null),[ve,oe]=V.useState([{product_id:"",qty:"",unit_selling_price:"",total:""}]),[B,be]=V.useState(""),[se,pe]=V.useState(""),[ae,w]=V.useState("cash"),E=Lu({customer_id:"",customer_name:"",transaction_date:new Date().toISOString().split("T")[0],items:ve,amount_paid:"",due_date:"",payment_type:"cash"});V.useEffect(()=>{E.setData("items",ve)},[ve]),V.useEffect(()=>{E.setData("amount_paid",B)},[B]),V.useEffect(()=>{E.setData("due_date",se)},[se]),V.useEffect(()=>{E.setData("payment_type",ae)},[ae]);const H=ve.reduce((O,fe)=>O+(parseFloat(fe.total)||0),0);V.useEffect(()=>{ae==="cash"&&(be(H.toString()),E.setError("amount_paid",void 0)),ae==="credit"&&(be("0"),E.setError("amount_paid",void 0))},[ae,H]);const Y=()=>{oe([{product_id:"",qty:"",unit_selling_price:"",total:""}]),be(""),pe(""),w("cash"),E.reset(),E.setData({customer_id:"",customer_name:"",transaction_date:new Date().toISOString().split("T")[0],items:[{product_id:"",qty:"",unit_selling_price:"",total:""}],amount_paid:"",due_date:"",payment_type:"cash"}),j(!0)},m=()=>{j(!1),oe([{product_id:"",qty:"",unit_selling_price:"",total:""}]),be(""),pe(""),w("cash"),E.reset(),E.setData({customer_id:"",customer_name:"",transaction_date:new Date().toISOString().split("T")[0],items:[{product_id:"",qty:"",unit_selling_price:"",total:""}],amount_paid:"",due_date:"",payment_type:"cash"})},T=O=>{k(O),K(!0)},I=()=>{K(!1),k(null)},Z=[{title:"Sales Transactions",href:"/sales-transactions"}],M=D.data.filter(O=>O.status==="Completed").reduce((O,fe)=>O+parseFloat(fe.amount_paid),0),ye=D.data.filter(O=>O.payment_type==="Credit").reduce((O,fe)=>O+parseFloat(fe.total),0)+D.data.filter(O=>O.payment_type==="Partial").reduce((O,fe)=>O+parseFloat(fe.amount_owed),0);return s.jsx(Px,{breadcrumbs:Z,children:s.jsxs("div",{className:"min-h-screen space-y-6 bg-gray-100 p-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Sales & Transactions"}),s.jsx(je,{onClick:Y,children:"Add Transaction"})]}),s.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-3",children:[s.jsxs(jr,{children:[s.jsx(Ar,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:s.jsx(Cr,{className:"text-sm font-medium",children:"Total Sales"})}),s.jsxs(Sr,{children:[s.jsxs("div",{className:"text-2xl font-bold",children:["GH₵",(M+ye).toFixed(2)]}),s.jsx("p",{className:"text-muted-foreground text-xs",children:"All transactions"})]})]}),s.jsxs(jr,{children:[s.jsx(Ar,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:s.jsx(Cr,{className:"text-sm font-medium",children:"Cash Sales"})}),s.jsxs(Sr,{children:[s.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["GH₵",M.toFixed(2)]}),s.jsx("p",{className:"text-muted-foreground text-xs",children:"Cash payments"})]})]}),s.jsxs(jr,{children:[s.jsx(Ar,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:s.jsx(Cr,{className:"text-sm font-medium",children:"Credit Sales"})}),s.jsxs(Sr,{children:[s.jsxs("div",{className:"text-2xl font-bold text-orange-600",children:["GH₵",ye.toFixed(2)]}),s.jsx("p",{className:"text-muted-foreground text-xs",children:"Credit payments"})]})]})]}),s.jsx(Qx,{sales_transactions:D,onEdit:T}),s.jsx(zx,{open:_e,onClose:m,products:re,customers:l,form:E,items:ve,setItems:oe,amountPaid:B,setAmountPaid:be,dueDate:se,setDueDate:pe,paymentType:ae,setPaymentType:w,runningTotal:H}),s.jsx(Kx,{open:J,onClose:I,transaction:v,products:re,customers:l})]})})}export{mg as default};
