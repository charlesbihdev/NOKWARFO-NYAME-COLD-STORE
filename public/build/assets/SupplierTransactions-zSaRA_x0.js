import{u as ce,j as e,r as h,a as p,L as G}from"./app-CNrwjyQV.js";import{D as oe}from"./DateRangePicker-BPL_KFdn.js";import{F as r}from"./createLucideIcon-CsAAfAhm.js";import{D as me,a as xe,b as ue,c as he,d as pe,e as je,f as ge}from"./dialog-CM93Cn0E.js";import{I as q}from"./input-DbyLavsC.js";import{L as l}from"./label-Ax9nI_kH.js";import{T as fe}from"./textarea-CcBepf5G.js";import{P as be}from"./plus-Bj_ZqcCf.js";import{C as w,c as D,a as ye,b as Ne}from"./card-DDZW8llL.js";import{A as ve,U as _e}from"./app-layout-CFGYWSdX.js";import{T}from"./trash-2-DPkkZxyo.js";import{S as O}from"./square-pen-C1npFoBI.js";import"./index-iTuCusql.js";import"./index-DV1aORTS.js";function we({supplier:d,open:i,onOpenChange:o}){const{data:j,setData:c,post:g,processing:S,errors:f,reset:C}=ce({amount:"",debt_date:new Date().toISOString().split("T")[0],description:"",notes:""}),P=m=>{m.preventDefault(),g(route("suppliers.debts.store",d.id),{onSuccess:()=>{o(!1),C()}})};return e.jsxs(me,{open:i,onOpenChange:o,children:[e.jsx(xe,{asChild:!0,children:e.jsxs(r,{variant:"outline",className:"border-red-600 text-red-600 hover:bg-red-50",children:[e.jsx(be,{className:"mr-2 h-4 w-4"}),"Add Debt"]})}),e.jsxs(ue,{className:"sm:max-w-[500px]",children:[e.jsxs(he,{children:[e.jsx(pe,{children:"Add Debt Record"}),e.jsxs(je,{children:["Record a debt entry for ",d.name,". This can be a previous debt or any outstanding amount."]})]}),e.jsxs("form",{onSubmit:P,children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs(l,{htmlFor:"amount",children:["Amount ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(q,{id:"amount",type:"number",step:"0.01",min:"0.01",value:j.amount,onChange:m=>c("amount",m.target.value),placeholder:"0.00",required:!0}),f.amount&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:f.amount})]}),e.jsxs("div",{children:[e.jsxs(l,{htmlFor:"debt_date",children:["Debt Date ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(q,{id:"debt_date",type:"date",value:j.debt_date,onChange:m=>c("debt_date",m.target.value),required:!0}),f.debt_date&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:f.debt_date})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"description",children:"Description"}),e.jsx(q,{id:"description",type:"text",value:j.description,onChange:m=>c("description",m.target.value),placeholder:"Brief description of the debt...",maxLength:500}),f.description&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:f.description})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"notes",children:"Additional Notes"}),e.jsx(fe,{id:"notes",value:j.notes,onChange:m=>c("notes",m.target.value),placeholder:"Any additional notes or details...",rows:3,maxLength:1e3}),f.notes&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:f.notes})]})]}),e.jsxs(ge,{className:"mt-6",children:[e.jsx(r,{type:"button",variant:"outline",onClick:()=>o(!1),disabled:S,children:"Cancel"}),e.jsx(r,{type:"submit",disabled:S,className:"bg-red-600 hover:bg-red-700",children:S?"Adding...":"Add Debt"})]})]})]})]})}function ze({supplier:d,transactions:i,payments:o=[],debts:j=[],start_date:c="",end_date:g="",products:S=[],errors:f={}}){var $;const C=()=>{const s=new Date,t=new Date(s.getFullYear(),s.getMonth(),1),u=new Date(s.getFullYear(),s.getMonth()+1,0);return{start:t.toISOString().slice(0,10),end:u.toISOString().slice(0,10)}},{start:P,end:m}=C(),[z,B]=h.useState(c||P),[U,R]=h.useState(g||m),[Y,Q]=h.useState(!1),[J,E]=h.useState(!1),[y,A]=h.useState(null),[K,k]=h.useState(!1),[N,M]=h.useState(null),[W,I]=h.useState(!1),[b,L]=h.useState(null),[H,V]=h.useState(null),X=()=>p.get(route("suppliers.index")),Z=(s,t)=>{const u=t==="start"?s:z,n=t==="end"?s:U;t==="start"&&B(s),t==="end"&&R(s),p.get(route("suppliers.transactions",d.id),{start_date:u,end_date:n,page:1},{preserveState:!0,preserveScroll:!0,replace:!0})};function ee(s){confirm("Are you sure you want to delete this transaction? This action cannot be undone.")&&p.delete(route("suppliers.delete-credit-transaction",s),{onSuccess:()=>{},onError:t=>{t.error?alert("Cannot delete transaction: "+t.error):alert("Failed to delete transaction. Please try again.")},preserveScroll:!0,preserveState:!0,only:["supplier","transactions","errors","flash"]})}function te(s){A(s),E(!0)}function se(s){confirm("Are you sure you want to delete this payment? This action cannot be undone.")&&p.delete(route("suppliers.delete-payment",s),{onSuccess:()=>{},onError:t=>{t.error?alert("Cannot delete payment: "+t.error):alert("Failed to delete payment. Please try again.")},preserveScroll:!0,preserveState:!0,only:["supplier","transactions","payments","errors","flash"]})}function ae(s){M(s),k(!0)}function ne(s){confirm("Are you sure you want to delete this debt record? This action cannot be undone.")&&p.delete(route("suppliers.debts.destroy",[d.id,s]),{onSuccess:()=>{},onError:t=>{t.error?alert("Cannot delete debt: "+t.error):alert("Failed to delete debt. Please try again.")},preserveScroll:!0,preserveState:!0,only:["supplier","transactions","payments","debts","errors","flash"]})}function re(s,t){V(s),L(t),I(!0)}function le(s,t){confirm("Are you sure you want to delete this item? The transaction total will be recalculated.")&&p.delete(route("suppliers.delete-transaction-item",[s,t]),{preserveScroll:!0,preserveState:!0,only:["supplier","transactions","errors","flash"]})}function a(s){return`GHC ${(parseFloat(s)||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`}function x(s){if(!s||typeof s!="string")return null;const t=s.split("-").map(Number);if(t.length!==3||t.some(isNaN)){const F=new Date(s);return isNaN(F)?null:F}const[u,n,_]=t;return new Date(u,n-1,_)}function v(s){if(!s)return"";const t=s instanceof Date?s:new Date(s);return isNaN(t)?"":t.toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})}return e.jsxs(ve,{breadcrumbs:[{title:"Suppliers",href:"/suppliers"},{title:"Transactions"}],children:[e.jsxs("div",{className:"min-h-screen space-y-6 bg-gray-100 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold",children:["Transactions for ",d.name]}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Contact: ",d.phone," | Email: ",d.email]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(we,{supplier:d,open:Y,onOpenChange:Q}),e.jsx(r,{variant:"outline",onClick:X,children:"â† Back to Suppliers"})]})]}),e.jsxs("div",{className:"space-y-4",children:[c&&g&&e.jsx("div",{className:"rounded-lg border border-blue-200 bg-blue-50 p-3",children:e.jsxs("p",{className:"text-sm text-blue-700",children:["ðŸ“… Showing data for: ",e.jsx("span",{className:"font-medium",children:v(x(c))})," to"," ",e.jsx("span",{className:"font-medium",children:v(x(g))})]})}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-4",children:[e.jsx(w,{children:e.jsx(D,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"h-5 w-5 text-blue-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:c&&g?"Filtered Transactions":"Total Transactions"}),e.jsx("p",{className:"text-2xl font-bold",children:d.transactions_count||0})]})]})})}),e.jsx(w,{children:e.jsx(D,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"h-5 w-5 rounded-full bg-red-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:c&&g?"Filtered Debt":"Total Debt"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:a(d.total_owed||0)})]})]})})}),e.jsx(w,{children:e.jsx(D,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"h-5 w-5 rounded-full bg-green-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:c&&g?"Filtered Payments":"Total Payments"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:a(d.total_payments_made||0)})]})]})})}),e.jsx(w,{children:e.jsx(D,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"h-5 w-5 rounded-full bg-orange-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:c&&g?"Filtered Outstanding":"Outstanding Balance"}),e.jsx("p",{className:"text-2xl font-bold text-orange-600",children:a(d.total_outstanding||0)})]})]})})})]})]}),e.jsxs(w,{children:[e.jsx(ye,{children:e.jsx(Ne,{children:"Credit Transaction History"})}),e.jsxs(D,{children:[e.jsxs("div",{className:"mb-6 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Filters"}),e.jsx(r,{variant:"outline",size:"sm",onClick:()=>{const{start:s,end:t}=C();B(s),R(t),p.get(route("suppliers.transactions",d.id),{start_date:s,end_date:t,page:1},{preserveState:!0,preserveScroll:!0,replace:!0})},children:"Clear Filters"})]}),e.jsxs("div",{children:[e.jsxs(l,{className:"mb-2 block text-sm font-medium text-gray-700",children:["Date Range ",e.jsx("span",{className:"text-xs text-gray-500",children:"(Default: Current Month)"})]}),e.jsx(oe,{startDate:z,endDate:U,onChange:Z})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",((($=i.data)==null?void 0:$.length)||0)+((o==null?void 0:o.length)||0)+((j==null?void 0:j.length)||0)," timeline items (transactions + payments + debts)"]})]}),e.jsxs("div",{className:"space-y-4",children:[(()=>{const s=[];return i.data.forEach(t=>{s.push({...t,type:"transaction",sortDate:x(t.transaction_date)||new Date(t.created_at),sortCreatedAt:new Date(t.created_at)})}),o.forEach(t=>{i.data.some(n=>{const _=x(t.payment_date)||new Date(t.created_at),F=x(n.transaction_date)||new Date(n.created_at),de=Math.abs(_-F)<6e4,ie=parseFloat(t.payment_amount)===parseFloat(n.todays_payments||0);return de&&ie&&n.todays_payments>0})||s.push({...t,type:"payment",sortDate:x(t.payment_date)||new Date(t.created_at),sortCreatedAt:new Date(t.created_at)})}),j.forEach(t=>{s.push({...t,type:"historical_debt",sortDate:x(t.date)||new Date,sortCreatedAt:new Date})}),s.sort((t,u)=>{const n=u.sortDate-t.sortDate;return n!==0?n:u.sortCreatedAt-t.sortCreatedAt}),s.map((t,u)=>{if(t.type==="transaction")return e.jsxs("div",{className:"rounded-lg border bg-white p-4 shadow-sm",children:[e.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-3 w-3 rounded-full bg-blue-500"}),e.jsx("h3",{className:"text-base font-semibold",children:v(x(t.transaction_date)||new Date(t.created_at))})]}),t.outstanding_balance>0&&e.jsxs("span",{className:"rounded-full bg-red-100 px-2 py-1 text-xs text-red-700",children:["Outstanding: ",a(t.outstanding_balance)]})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(r,{size:"sm",variant:"outline",onClick:()=>ee(t.id),className:"text-red-600",children:[e.jsx(T,{className:"mr-2 h-3 w-3"}),"Delete"]})})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"font-medium text-gray-900",children:t.description}),t.notes&&e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:t.notes})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"mb-2 text-sm font-medium text-gray-700",children:"Items Purchased:"}),t.items&&t.items.length>0?e.jsx("div",{className:"overflow-hidden rounded-md border border-gray-200",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left font-medium text-gray-700",children:"Product"}),e.jsx("th",{className:"px-3 py-2 text-right font-medium text-gray-700",children:"Qty"}),e.jsx("th",{className:"px-3 py-2 text-right font-medium text-gray-700",children:"Unit Price"}),e.jsx("th",{className:"px-3 py-2 text-right font-medium text-gray-700",children:"Total"}),e.jsx("th",{className:"px-3 py-2 text-right font-medium text-gray-700",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 bg-white",children:t.items.map((n,_)=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-3 py-2 text-gray-900",children:n.product_name}),e.jsx("td",{className:"px-3 py-2 text-right text-gray-700",children:n.quantity_display||n.cartons||n.total_quantity||0}),e.jsx("td",{className:"px-3 py-2 text-right text-gray-700",children:a(n.unit_price)}),e.jsx("td",{className:"px-3 py-2 text-right font-medium text-gray-900",children:a(n.total_amount)}),e.jsx("td",{className:"px-3 py-2 text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(r,{variant:"outline",size:"sm",onClick:()=>re(t,n),className:"text-blue-600 hover:text-blue-700",children:e.jsx(O,{className:"h-3 w-3"})}),e.jsx(r,{variant:"outline",size:"sm",onClick:()=>le(t.id,n.id),className:"text-red-600 hover:text-red-700",disabled:t.items.length<=1,children:e.jsx(T,{className:"h-3 w-3"})})]})})]},n.id||_))})]})}):e.jsx("div",{className:"rounded-md border border-gray-200 bg-gray-50 p-3",children:e.jsx("p",{className:"text-sm text-gray-600 italic",children:"No detailed items recorded for this transaction"})})]}),e.jsxs("div",{className:"space-y-3 rounded-lg bg-gray-50 p-4",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700",children:"Financial Summary"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-xs",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Previous Debt:"}),e.jsx("span",{className:"font-medium",children:a(t.previous_debt||0)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Current Transaction:"}),e.jsx("span",{className:"font-medium text-blue-600",children:a(t.current_debt||0)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Total Debt:"}),e.jsx("span",{className:"font-semibold text-red-600",children:a(t.total_debt||0)})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Current Payment:"}),e.jsx("span",{className:"font-medium text-green-600",children:a(t.todays_payments||0)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Outstanding Balance:"}),e.jsx("span",{className:"font-bold text-red-700",children:a(t.outstanding_balance||0)})]})]})]}),e.jsxs("div",{className:"border-t pt-2 text-xs text-gray-500 italic",children:[e.jsx("span",{className:"font-medium",children:"Flow:"})," Previous debt (",a(t.previous_debt||0),") + New transaction (",a(t.current_debt||0),") = Total debt (",a(t.total_debt||0),"). After current payment: ",a(t.outstanding_balance||0)," outstanding."]})]}),t.todays_payments>0&&e.jsxs("div",{className:"mt-3 space-y-3 rounded-lg bg-green-50 p-4",children:[e.jsx("h4",{className:"text-sm font-semibold text-green-700",children:"Payment Made"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-lg font-semibold text-green-600",children:a(t.todays_payments)}),t.payment_method&&e.jsx("span",{className:"rounded-full bg-blue-100 px-2 py-1 text-xs text-blue-700",children:t.payment_method})]}),t.payment_notes&&e.jsx("p",{className:"text-xs text-gray-600",children:t.payment_notes})]})]},`transaction-${t.id}`);if(t.type==="payment")return e.jsxs("div",{className:"rounded-lg border bg-white p-4 shadow-sm",children:[e.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-3 w-3 rounded-full bg-green-500"}),e.jsx("h3",{className:"text-base font-semibold",children:v(x(t.payment_date)||new Date(t.created_at))})]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(r,{size:"sm",variant:"outline",onClick:()=>te(t),className:"text-blue-600",children:[e.jsx(O,{className:"mr-2 h-3 w-3"}),"Edit"]}),e.jsxs(r,{size:"sm",variant:"outline",onClick:()=>se(t.id),className:"text-red-600",children:[e.jsx(T,{className:"mr-2 h-3 w-3"}),"Delete"]})]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"mb-2 flex items-center gap-3",children:[e.jsx("h3",{className:"text-lg font-semibold text-green-600",children:a(t.payment_amount)}),t.payment_method&&e.jsx("span",{className:"rounded-full bg-blue-100 px-2 py-1 text-xs text-blue-700",children:t.payment_method})]}),t.notes&&e.jsx("p",{className:"text-sm text-gray-600",children:t.notes})]}),e.jsxs("div",{className:"space-y-3 rounded-lg bg-green-50 p-4",children:[e.jsx("h4",{className:"text-sm font-semibold text-green-700",children:"Payment Summary"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-xs",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Previous Debt:"}),e.jsx("span",{className:"font-semibold text-red-600",children:a(t.previous_debt||0)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Payment Amount:"}),e.jsx("span",{className:"font-semibold text-green-600",children:a(t.payment_amount)})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Outstanding Balance:"}),e.jsx("span",{className:"font-bold text-orange-600",children:a(t.outstanding_balance||0)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Payment Method:"}),e.jsx("span",{className:"font-medium",children:t.payment_method||"Not specified"})]})]})]}),e.jsxs("div",{className:"border-t pt-2 text-xs text-gray-500 italic",children:[e.jsx("span",{className:"font-medium",children:"Flow:"})," Previous debt (",a(t.previous_debt||0),") - Payment (",a(t.payment_amount),") = Outstanding (",a(t.outstanding_balance||0),")"]}),t.notes&&e.jsxs("div",{className:"border-t pt-2 text-xs text-gray-600",children:[e.jsx("span",{className:"font-medium",children:"Notes:"})," ",t.notes]})]})]},`payment-${t.id}`);if(t.type==="historical_debt")return e.jsxs("div",{className:"rounded-lg border border-red-200 bg-red-50 p-4 shadow-sm",children:[e.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-3 w-3 rounded-full bg-red-500"}),e.jsx("h3",{className:"text-base font-semibold",children:v(x(t.date)||new Date)})]}),e.jsx("span",{className:"rounded-full bg-red-100 px-2 py-1 text-xs font-medium text-red-700",children:"Historical Debt"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(r,{size:"sm",variant:"outline",onClick:()=>ae(t),className:"text-blue-600",children:[e.jsx(O,{className:"mr-2 h-3 w-3"}),"Edit"]}),e.jsxs(r,{size:"sm",variant:"outline",onClick:()=>ne(t.debt_id),className:"text-red-600",children:[e.jsx(T,{className:"mr-2 h-3 w-3"}),"Delete"]})]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"mb-2",children:e.jsx("h3",{className:"text-lg font-semibold text-red-600",children:a(t.amount)})}),t.description&&e.jsx("p",{className:"text-sm text-gray-700 font-medium",children:t.description}),t.notes&&e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:t.notes})]})]},`debt-${t.debt_id}`)})})(),(()=>{var t;return(((t=i.data)==null?void 0:t.length)||0)+((o==null?void 0:o.length)||0)===0?e.jsx("div",{className:"py-8 text-center text-gray-500",children:"No transactions or payments found for this supplier."}):null})()]}),(i.prev_page_url||i.next_page_url)&&e.jsxs("div",{className:"mt-6 flex items-center justify-center gap-4",children:[i.prev_page_url?e.jsx(G,{href:i.prev_page_url,preserveState:!0,preserveScroll:!0,className:"rounded border bg-white px-3 py-1 hover:bg-gray-100",children:"Previous"}):e.jsx("span",{className:"cursor-not-allowed rounded border bg-gray-200 px-3 py-1",children:"Previous"}),e.jsx("span",{className:"rounded border px-3 py-1",children:i.current_page}),i.next_page_url?e.jsx(G,{href:i.next_page_url,preserveState:!0,preserveScroll:!0,className:"rounded border bg-white px-3 py-1 hover:bg-gray-100",children:"Next"}):e.jsx("span",{className:"cursor-not-allowed rounded border bg-gray-200 px-3 py-1",children:"Next"})]})]})]})]}),J&&y&&e.jsx("div",{className:"bg-opacity-50 fixed inset-0 z-50 flex items-center justify-center bg-black",children:e.jsxs("div",{className:"w-full max-w-md rounded-lg bg-white p-6",children:[e.jsx("h3",{className:"mb-4 text-lg font-semibold",children:"Edit Payment"}),e.jsx("form",{onSubmit:s=>{s.preventDefault();const t=new FormData(s.target);p.put(route("suppliers.update-payment",y.id),{payment_date:t.get("payment_date"),payment_amount:t.get("payment_amount"),payment_method:t.get("payment_method"),notes:t.get("notes")},{onSuccess:()=>{E(!1),A(null)},preserveScroll:!0,preserveState:!0,only:["supplier","transactions","payments","flash"]})},children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"edit_payment_date",children:"Payment Date"}),e.jsx("input",{type:"date",id:"edit_payment_date",name:"payment_date",defaultValue:y.payment_date,className:"w-full rounded-md border px-3 py-2",required:!0})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"edit_payment_amount",children:"Amount"}),e.jsx("input",{type:"number",id:"edit_payment_amount",name:"payment_amount",step:"0.01",min:"0.01",defaultValue:y.payment_amount,className:"w-full rounded-md border px-3 py-2",placeholder:"0.00",required:!0})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"edit_payment_method",children:"Payment Method"}),e.jsxs("select",{id:"edit_payment_method",name:"payment_method",defaultValue:y.payment_method||"",className:"w-full rounded-md border px-3 py-2",children:[e.jsx("option",{value:"",children:"Select method"}),e.jsx("option",{value:"cash",children:"Cash"}),e.jsx("option",{value:"bank_transfer",children:"Bank Transfer"}),e.jsx("option",{value:"check",children:"Check"}),e.jsx("option",{value:"mobile_money",children:"Mobile Money"})]})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"edit_notes",children:"Notes"}),e.jsx("textarea",{id:"edit_notes",name:"notes",rows:"3",defaultValue:y.notes||"",className:"w-full rounded-md border px-3 py-2",placeholder:"Optional notes about this payment"})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(r,{type:"button",variant:"outline",onClick:()=>{E(!1),A(null)},children:"Cancel"}),e.jsx(r,{type:"submit",children:"Update Payment"})]})]})})]})}),K&&N&&e.jsx("div",{className:"bg-opacity-50 fixed inset-0 z-50 flex items-center justify-center bg-black",children:e.jsxs("div",{className:"w-full max-w-md rounded-lg bg-white p-6",children:[e.jsx("h3",{className:"mb-4 text-lg font-semibold",children:"Edit Debt Record"}),e.jsx("form",{onSubmit:s=>{s.preventDefault();const t=new FormData(s.target);p.put(route("suppliers.debts.update",[d.id,N.debt_id]),{amount:t.get("amount"),debt_date:t.get("debt_date"),description:t.get("description"),notes:t.get("notes")},{onSuccess:()=>{k(!1),M(null)},preserveScroll:!0,preserveState:!0,only:["supplier","transactions","payments","debts","flash"]})},children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs(l,{htmlFor:"edit_debt_amount",children:["Amount ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",id:"edit_debt_amount",name:"amount",step:"0.01",min:"0.01",defaultValue:N.amount,className:"w-full rounded-md border px-3 py-2",placeholder:"0.00",required:!0})]}),e.jsxs("div",{children:[e.jsxs(l,{htmlFor:"edit_debt_date",children:["Debt Date ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"date",id:"edit_debt_date",name:"debt_date",defaultValue:N.date,className:"w-full rounded-md border px-3 py-2",required:!0})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"edit_debt_description",children:"Description"}),e.jsx("input",{type:"text",id:"edit_debt_description",name:"description",defaultValue:N.description||"",className:"w-full rounded-md border px-3 py-2",placeholder:"Brief description",maxLength:500})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"edit_debt_notes",children:"Additional Notes"}),e.jsx("textarea",{id:"edit_debt_notes",name:"notes",rows:"3",defaultValue:N.notes||"",className:"w-full rounded-md border px-3 py-2",placeholder:"Optional notes",maxLength:1e3})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(r,{type:"button",variant:"outline",onClick:()=>{k(!1),M(null)},children:"Cancel"}),e.jsx(r,{type:"submit",className:"bg-blue-600 hover:bg-blue-700",children:"Update Debt"})]})]})})]})}),W&&b&&H&&e.jsx("div",{className:"bg-opacity-50 fixed inset-0 z-50 flex items-center justify-center bg-black",children:e.jsxs("div",{className:"w-full max-w-md rounded-lg bg-white p-6",children:[e.jsx("h3",{className:"mb-4 text-lg font-semibold",children:"Edit Transaction Item"}),e.jsxs("form",{onSubmit:s=>{s.preventDefault();const t=new FormData(s.target);p.put(route("suppliers.update-transaction-item",[H.id,b.id]),{product_id:b.product_id,product_name:t.get("product_name"),cartons:t.get("cartons"),lines:t.get("lines"),lines_per_carton:t.get("lines_per_carton"),unit_price:t.get("unit_price")},{onSuccess:()=>{I(!1),L(null),V(null)},preserveScroll:!0,preserveState:!0,only:["supplier","transactions","flash"]})},children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs(l,{htmlFor:"edit_item_product_name",children:["Product Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{id:"edit_item_product_name",name:"product_name",type:"text",defaultValue:b.product_name,className:"w-full rounded-md border px-3 py-2",required:!0,maxLength:255})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"edit_item_cartons",children:"Cartons"}),e.jsx("input",{id:"edit_item_cartons",name:"cartons",type:"number",min:"0",step:"1",defaultValue:b.cartons||0,className:"w-full rounded-md border px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"edit_item_lines",children:"Lines"}),e.jsx("input",{id:"edit_item_lines",name:"lines",type:"number",min:"0",step:"1",defaultValue:b.lines||0,className:"w-full rounded-md border px-3 py-2"})]})]}),e.jsxs("div",{children:[e.jsxs(l,{htmlFor:"edit_item_lines_per_carton",children:["Lines per Carton ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{id:"edit_item_lines_per_carton",name:"lines_per_carton",type:"number",min:"1",step:"1",defaultValue:b.lines_per_carton||1,className:"w-full rounded-md border px-3 py-2",required:!0})]}),e.jsxs("div",{children:[e.jsxs(l,{htmlFor:"edit_item_unit_price",children:["Unit Price ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{id:"edit_item_unit_price",name:"unit_price",type:"number",min:"0",step:"0.01",defaultValue:b.unit_price,className:"w-full rounded-md border px-3 py-2",required:!0})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-2",children:[e.jsx(r,{type:"button",variant:"outline",onClick:()=>{I(!1),L(null),V(null)},children:"Cancel"}),e.jsx(r,{type:"submit",className:"bg-blue-600 hover:bg-blue-700",children:"Update Item"})]})]})]})})]})}export{ze as default};
