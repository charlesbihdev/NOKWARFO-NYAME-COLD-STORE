import{K as U,r as h,m as k,j as e,S as B}from"./app-Cr2q6RgE.js";import{F as i}from"./createLucideIcon-BWJBnjvx.js";import{C as x,a as u,b as p,c as j}from"./card-BfpklwD7.js";import{D as C,a as L,b as v,c as b,d as w}from"./dialog-MAc-lJ1S.js";import{I as l}from"./index-CG6i6Mhb.js";import{L as t}from"./label-CENo8H-f.js";import{T as z,a as G,b as y,c as d,d as R,e as n}from"./table-Cpg4yUgs.js";import{T as X,P as K,M as J,a as Q}from"./textarea-Drm9OAQl.js";import{A as V,U as S,C as W}from"./app-layout-DY7q61lp.js";import{P as Y}from"./plus-CbzCAqvV.js";import{S as Z}from"./square-pen-D80sSWiV.js";import{T as _}from"./trash-2-D-7b2KcM.js";import"./index-Cuxjp_Nf.js";import"./index-9UfKOC-3.js";function ue(){const{customers:c=[]}=U().props,[T,m]=h.useState(!1),[F,g]=h.useState(null),{data:r,setData:a,post:A,put:D,processing:N,errors:$,reset:f}=k({name:"",phone:"",email:"",address:""}),[E,o]=h.useState(!1),P=[{title:"Customers",href:"/customers"}];function M(s){s.preventDefault(),A(route("customers.store"),{onSuccess:()=>{f(),o(!1)}})}function O(s){g(s),a({name:s.name,phone:s.phone||"",email:s.email||"",address:s.address||""}),m(!0)}function H(s){s.preventDefault(),D(route("customers.update",F.id),{onSuccess:()=>{f(),m(!1),g(null)},preserveScroll:!0,preserveState:!0,only:["customers","errors","flash"]})}function q(s){confirm("Are you sure you want to delete this customer?")&&B.delete(route("customers.destroy",s),{preserveScroll:!0,preserveState:!0,only:["customers","flash"]})}return e.jsxs(V,{breadcrumbs:P,children:[e.jsxs("div",{className:"min-h-screen space-y-6 bg-gray-100 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Customers"}),e.jsxs(C,{open:E,onOpenChange:o,children:[e.jsx(L,{asChild:!0,children:e.jsxs(i,{onClick:()=>o(!0),children:[e.jsx(Y,{className:"mr-2 h-4 w-4"}),"Add Customer"]})}),e.jsxs(v,{className:"max-w-2xl",children:[e.jsx(b,{children:e.jsx(w,{children:"Add New Customer"})}),e.jsxs("form",{onSubmit:M,className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(t,{htmlFor:"customer-name",className:"text-right",children:"Customer Name"}),e.jsx(l,{id:"customer-name",className:"col-span-3",placeholder:"Enter customer name",value:r.name,onChange:s=>a("name",s.target.value),required:!0})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(t,{htmlFor:"phone",className:"text-right",children:"Phone"}),e.jsx(l,{id:"phone",className:"col-span-3",placeholder:"+233 XX XXX XXXX",value:r.phone,onChange:s=>a("phone",s.target.value)})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(t,{htmlFor:"email",className:"text-right",children:"Email"}),e.jsx(l,{id:"email",type:"email",className:"col-span-3",placeholder:"customer@email.com",value:r.email,onChange:s=>a("email",s.target.value)})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(t,{htmlFor:"address",className:"text-right",children:"Address"}),e.jsx(X,{id:"address",className:"col-span-3",placeholder:"Customer address",value:r.address,onChange:s=>a("address",s.target.value)})]}),e.jsx(i,{type:"submit",disabled:N,children:"Add Customer"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-4",children:[e.jsxs(x,{children:[e.jsxs(u,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(p,{className:"text-sm font-medium",children:"Total Customers"}),e.jsx(S,{className:"h-4 w-4 text-blue-600"})]}),e.jsxs(j,{children:[e.jsx("div",{className:"text-2xl font-bold",children:c.length}),e.jsx("p",{className:"text-muted-foreground text-xs",children:"Active customers"})]})]}),e.jsxs(x,{children:[e.jsxs(u,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(p,{className:"text-sm font-medium",children:"Outstanding Balance"}),e.jsx(W,{className:"h-4 w-4 text-orange-600"})]}),e.jsxs(j,{children:[e.jsxs("div",{className:"text-2xl font-bold text-orange-600",children:["GH₵",c.reduce((s,I)=>s+parseFloat(I.debt),0).toFixed(2)]}),e.jsx("p",{className:"text-muted-foreground text-xs",children:"Total owed"})]})]})]}),e.jsxs(x,{children:[e.jsx(u,{children:e.jsxs(p,{className:"flex items-center gap-2",children:[e.jsx(S,{className:"h-5 w-5"}),"Customer Directory"]})}),e.jsx(j,{children:e.jsxs(z,{children:[e.jsx(G,{children:e.jsxs(y,{children:[e.jsx(d,{children:"Customer Name"}),e.jsx(d,{children:"Contact Info"}),e.jsx(d,{children:"Address"}),e.jsx(d,{children:"Customer Debt"}),e.jsx(d,{children:"Actions"})]})}),e.jsx(R,{children:c.map(s=>e.jsxs(y,{children:[e.jsx(n,{className:"font-medium",children:s.name}),e.jsx(n,{children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[e.jsx(K,{className:"h-3 w-3"}),s.phone]}),e.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[e.jsx(J,{className:"h-3 w-3"}),s.email]})]})}),e.jsx(n,{className:"max-w-xs",children:e.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[e.jsx(Q,{className:"h-3 w-3"}),s.address]})}),e.jsx(n,{className:"font-medium",children:e.jsxs("span",{className:s.debt>0?"text-orange-600":"text-green-600",children:["GH₵",parseFloat(s.debt).toFixed(2)]})}),e.jsx(n,{children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(i,{variant:"outline",size:"sm",onClick:()=>O(s),children:e.jsx(Z,{className:"h-4 w-4"})}),e.jsx(i,{variant:"outline",size:"sm",onClick:()=>q(s.id),children:e.jsx(_,{className:"h-4 w-4"})})]})})]},s.id))})]})})]})]}),e.jsx(C,{open:T,onOpenChange:m,children:e.jsxs(v,{className:"max-w-2xl",children:[e.jsx(b,{children:e.jsx(w,{children:"Edit Customer"})}),e.jsxs("form",{onSubmit:H,className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(t,{htmlFor:"edit-customer-name",className:"text-right",children:"Customer Name"}),e.jsx(l,{id:"edit-customer-name",className:"col-span-3",placeholder:"Enter customer name",value:r.name,onChange:s=>a("name",s.target.value),required:!0})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(t,{htmlFor:"edit-phone",className:"text-right",children:"Phone"}),e.jsx(l,{id:"edit-phone",className:"col-span-3",placeholder:"+233 XX XXX XXXX",value:r.phone,onChange:s=>a("phone",s.target.value),required:!0})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(t,{htmlFor:"edit-email",className:"text-right",children:"Email"}),e.jsx(l,{id:"edit-email",type:"email",className:"col-span-3",placeholder:"customer@email.com",value:r.email,onChange:s=>a("email",s.target.value),required:!0})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(t,{htmlFor:"edit-address",className:"text-right",children:"Address"}),e.jsx(X,{id:"edit-address",className:"col-span-3",placeholder:"Customer address",value:r.address,onChange:s=>a("address",s.target.value)})]}),e.jsx(i,{type:"submit",disabled:N,children:"Update Customer"})]})]})})]})}export{ue as default};
