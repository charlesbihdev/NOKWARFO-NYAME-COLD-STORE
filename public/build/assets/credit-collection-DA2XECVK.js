import{r as S,m as L,j as e}from"./app-t1CSMUOT.js";import{I as h}from"./InputError-CVyg9Gx_.js";import{B as re}from"./badge-Oi4htmA5.js";import{a as Q,F as j}from"./createLucideIcon-DQ-RrjC5.js";import{C as n,a as c,b as o,c as i}from"./card-CPQbJDzC.js";import{D as k,a as P,b as R,c as q,d as B}from"./dialog-BHBMydV8.js";import{I as x}from"./index-etVvCu5N.js";import{L as m}from"./label-DpBtU9J9.js";import{S as ne,a as ce,b as oe,c as ie,d as de}from"./select-7wkyVkDr.js";import{T,a as D,b as r,c as l,d as _,e as t}from"./table-Dq8846Eq.js";import{A as xe}from"./app-layout-3Mi96119.js";import{P as M}from"./plus-C7Lt-AJS.js";import{T as me}from"./trending-down-HOHrnlrX.js";import"./index-Dmhs7Cth.js";import"./index-B5vfba_T.js";import"./index-D4a1-RwQ.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],V=Q("TriangleAlert",he);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],z=Q("Wallet",je);function Ae({credit_collections:g=[],outstanding_debts:N=[],expenses:f=[],customers:W=[]}){const[$,v]=S.useState(!1),[H,J]=S.useState(""),[K,A]=S.useState(!1),U=N.filter(s=>s.customer.toLowerCase().includes(H.toLowerCase())),{data:b,setData:u,post:X,processing:E,errors:d,reset:Y}=L({customer_id:"",amount_collected:"",notes:""}),{data:C,setData:y,post:Z,processing:O,errors:p,reset:ee}=L({description:"",amount:"",notes:"",date:new Date().toISOString().split("T")[0]}),se=[{title:"Credit Collection",href:"/credit-collection"}];function te(s){s.preventDefault(),Z(route("expenses.store"),{onSuccess:()=>{ee(),A(!1)},onError:a=>{console.error("Failed to submit expense:",a)},preserveScroll:!0})}function ae(s){console.log(s),u({customer_id:s.customer_id,amount_collected:"",notes:""}),v(!0)}function le(s){s.preventDefault(),X(route("credit-collection.store"),{onSuccess:()=>{Y(),v(!1)},preserveScroll:!0})}const F=g.reduce((s,a)=>s+parseFloat(a.amount_collected),0),w=f.reduce((s,a)=>s+parseFloat(a.amount),0),G=F-w,I=N.reduce((s,a)=>s+parseFloat(a.balance),0);return e.jsx(xe,{breadcrumbs:se,children:e.jsxs("div",{className:"min-h-screen space-y-6 bg-gray-100 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Credit Collection & Debt Management"}),e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs(k,{open:$,onOpenChange:v,children:[e.jsx(P,{asChild:!0,children:e.jsxs(j,{children:[e.jsx(M,{className:"mr-2 h-4 w-4"}),"Record Collection"]})}),e.jsxs(R,{className:"sm:max-w-[425px]",children:[e.jsx(q,{children:e.jsx(B,{children:"Record Credit Collection"})}),e.jsxs("form",{onSubmit:le,className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(m,{htmlFor:"customer",className:"text-right",children:"Customer"}),e.jsxs(ne,{value:b.customer_id,onValueChange:s=>u("customer_id",s),disabled:!0,children:[e.jsx(ce,{className:"col-span-3",children:e.jsx(oe,{placeholder:"Select customer"})}),e.jsx(ie,{children:W.map(s=>e.jsx(de,{value:s.id,children:s.name},s.id))})]}),d.customer_id&&e.jsx(h,{message:d.customer_id,className:"mt-2"})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(m,{htmlFor:"amount",className:"text-right",children:"Amount (GH₵)"}),e.jsxs("div",{className:"col-span-3",children:[e.jsx(x,{id:"amount",type:"number",className:"w-full",placeholder:"0.00",value:b.amount_collected,onChange:s=>u("amount_collected",s.target.value),required:!0}),d.amount_collected&&e.jsx(h,{message:d.amount_collected,className:"mt-2"})]})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(m,{htmlFor:"notes",className:"text-right",children:"Notes"}),e.jsxs("div",{className:"col-span-3",children:[e.jsx(x,{id:"notes",placeholder:"Optional notes",value:b.notes,onChange:s=>u("notes",s.target.value)}),d.notes&&e.jsx(h,{message:d.notes,className:"mt-2"})]})]}),e.jsx(j,{type:"submit",disabled:E,children:E?"Recording...":"Record Collection"})]})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-4",children:[e.jsxs(n,{children:[e.jsxs(c,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(o,{className:"text-sm font-medium",children:"Collections Today"}),e.jsx(z,{className:"h-4 w-4 text-green-600"})]}),e.jsxs(i,{children:[e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["GH₵",F.toFixed(2)]}),e.jsxs("p",{className:"text-muted-foreground text-xs",children:["From ",g.length," customers"]})]})]}),e.jsxs(n,{children:[e.jsxs(c,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(o,{className:"text-sm font-medium",children:"Expenses Today"}),e.jsx(me,{className:"h-4 w-4 text-red-600"})]}),e.jsxs(i,{children:[e.jsxs("div",{className:"text-2xl font-bold text-red-600",children:["GH₵",w.toFixed(2)]}),e.jsxs("p",{className:"text-muted-foreground text-xs",children:[f.length," expense items"]})]})]}),e.jsxs(n,{children:[e.jsxs(c,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(o,{className:"text-sm font-medium",children:"Net Amount"}),e.jsx(z,{className:"h-4 w-4 text-blue-600"})]}),e.jsxs(i,{children:[e.jsxs("div",{className:`text-2xl font-bold ${G>=0?"text-green-600":"text-red-600"}`,children:["GH₵",G.toFixed(2)]}),e.jsx("p",{className:"text-muted-foreground text-xs",children:"Collections - Expenses"})]})]}),e.jsxs(n,{children:[e.jsxs(c,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(o,{className:"text-sm font-medium",children:"Total Outstanding"}),e.jsx(V,{className:"h-4 w-4 text-orange-600"})]}),e.jsxs(i,{children:[e.jsxs("div",{className:"text-2xl font-bold text-orange-600",children:["GH₵",I.toFixed(2)]}),e.jsxs("p",{className:"text-muted-foreground text-xs",children:[N.length," customers"]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:[e.jsxs(n,{children:[e.jsx(c,{children:e.jsx(o,{children:"Amount Collected from Creditors Today"})}),e.jsx(i,{children:e.jsxs(T,{children:[e.jsx(D,{children:e.jsxs(r,{children:[e.jsx(l,{children:"Customer Name"}),e.jsx(l,{children:"Amount Collected"})]})}),e.jsxs(_,{children:[g.map((s,a)=>e.jsxs(r,{children:[e.jsx(t,{className:"font-medium",children:s.customer}),e.jsxs(t,{className:"font-medium text-green-600",children:["GH₵",parseFloat(s.amount_collected).toFixed(2)]})]},a)),e.jsxs(r,{className:"bg-green-50",children:[e.jsx(t,{className:"font-bold",children:"Total Collected"}),e.jsxs(t,{className:"font-bold text-green-600",children:["GH₵",F.toFixed(2)]}),e.jsx(t,{})]})]})]})})]}),e.jsxs(n,{children:[e.jsxs(c,{className:"flex flex-row items-center justify-between",children:[e.jsx(o,{children:"Daily Expenses"}),e.jsxs(k,{open:K,onOpenChange:A,children:[e.jsx(P,{asChild:!0,children:e.jsxs(j,{children:[e.jsx(M,{className:"mr-2 h-4 w-4"}),"Add Expense"]})}),e.jsxs(R,{className:"sm:max-w-[425px]",children:[e.jsx(q,{children:e.jsx(B,{children:"Add New Expense"})}),e.jsxs("form",{onSubmit:te,className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(m,{htmlFor:"description",className:"text-right",children:"Description"}),e.jsxs("div",{className:"col-span-3",children:[e.jsx(x,{id:"description",placeholder:"Expense description",value:C.description,onChange:s=>y("description",s.target.value),required:!0}),p.description&&e.jsx(h,{message:p.description,className:"mt-2"})]})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(m,{htmlFor:"amount",className:"text-right",children:"Amount (GH₵)"}),e.jsxs("div",{className:"col-span-3",children:[e.jsx(x,{id:"amount",type:"number",placeholder:"0.00",value:C.amount,onChange:s=>y("amount",s.target.value),required:!0}),p.amount&&e.jsx(h,{message:p.amount,className:"mt-2"})]})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(m,{htmlFor:"notes",className:"text-right",children:"Notes"}),e.jsx("div",{className:"col-span-3",children:e.jsx(x,{id:"notes",placeholder:"Optional notes",value:C.notes,onChange:s=>y("notes",s.target.value)})})]}),e.jsx(j,{type:"submit",disabled:O,children:O?"Adding...":"Add Expense"})]})]})]})]}),e.jsx(i,{children:e.jsxs(T,{children:[e.jsx(D,{children:e.jsxs(r,{children:[e.jsx(l,{children:"Description"}),e.jsx(l,{children:"Amount"})]})}),e.jsxs(_,{children:[f.map((s,a)=>e.jsxs(r,{children:[e.jsx(t,{className:"font-medium",children:s.description}),e.jsxs(t,{className:"font-medium text-red-600",children:["GH₵",parseFloat(s.amount).toFixed(2)]})]},a)),e.jsxs(r,{className:"bg-red-50",children:[e.jsx(t,{className:"font-bold",children:"Total Expenses"}),e.jsxs(t,{className:"font-bold text-red-600",children:["GH₵",w.toFixed(2)]})]})]})]})})]})]}),e.jsxs(n,{children:[e.jsxs(c,{className:"flex flex-col space-y-4",children:[e.jsxs(o,{className:"flex items-center gap-2",children:[e.jsx(V,{className:"h-5 w-5 text-orange-600"}),"Outstanding Customer Debts"]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx(x,{placeholder:"Search customers...",value:H,onChange:s=>J(s.target.value),className:"max-w-sm"})})]}),e.jsx(i,{children:e.jsxs(T,{children:[e.jsx(D,{children:e.jsxs(r,{children:[e.jsx(l,{children:"Customer Name"}),e.jsx(l,{children:"Total Debt"}),e.jsx(l,{children:"Amount Paid"}),e.jsx(l,{children:"Outstanding Balance"}),e.jsx(l,{children:"Last Payment"}),e.jsx(l,{children:"Days Overdue"}),e.jsx(l,{children:"Status"}),e.jsx(l,{children:"Actions"})]})}),e.jsxs(_,{children:[U.map((s,a)=>e.jsxs(r,{children:[e.jsx(t,{className:"font-medium",children:s.customer}),e.jsxs(t,{children:["GH₵",parseFloat(s.total_debt).toFixed(2)]}),e.jsxs(t,{className:"text-green-600",children:["GH₵",parseFloat(s.amount_paid).toFixed(2)]}),e.jsxs(t,{className:"font-medium text-orange-600",children:["GH₵",parseFloat(s.balance).toFixed(2)]}),e.jsx(t,{children:s.last_payment}),e.jsxs(t,{className:s.days_overdue>14?"font-medium text-red-600":"text-orange-600",children:[s.days_overdue," days"]}),e.jsx(t,{children:e.jsx(re,{variant:s.days_overdue>14?"destructive":"secondary",children:s.days_overdue>14?"Critical":"Overdue"})}),e.jsx(t,{children:e.jsx(j,{variant:"outline",size:"sm",onClick:()=>ae(s),children:"Collect"})})]},a)),e.jsxs(r,{className:"bg-orange-50",children:[e.jsx(t,{colSpan:3,className:"font-bold",children:"Total Outstanding"}),e.jsxs(t,{className:"font-bold text-orange-600",children:["GH₵",I.toFixed(2)]}),e.jsx(t,{colSpan:4})]})]})]})})]})]})})}export{Ae as default};
