import{b as Q,r as c,u as X,a as v,j as e,H as Y,L as D}from"./app-IpDexUkN.js";import{B as N}from"./badge-CmzsWlgc.js";import{c as ee,F as r}from"./createLucideIcon-JR7TBAdw.js";import{C as f,a as b,b as y,c as S}from"./card-Datb66K2.js";import{D as T,a as se,b as k,c as E,d as A,e as F,f as B}from"./dialog-DX-NdddR.js";import{I as j}from"./input-Dwv0R-j5.js";import{L as o}from"./label-BdzILd_E.js";import{T as ae,a as te,b as O,c as n,d as re,e as i}from"./table-BAEXV-Dd.js";import{T as H}from"./textarea-bDV6g11N.js";import{A as ne,g as P,W as ie}from"./app-layout-BFhBj9u0.js";import{l as le,S as ce}from"./lodash-BzbrT40b.js";import{P as de}from"./plus-BoFh4Jbm.js";import{E as oe}from"./eye-D3vEH2Uh.js";import{S as xe}from"./square-pen-D5ecgMa4.js";import"./index-Cdu7Mxog.js";import"./index-CgFigxQE.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],he=ee("Archive",me);function Ee(){const{savings:t={data:[]},filters:I={},summary:g={}}=Q().props,[L,x]=c.useState(!1),[M,m]=c.useState(!1),[q,w]=c.useState(null),[h,U]=c.useState(I.search||""),{data:d,setData:l,post:z,put:$,processing:p,errors:a,reset:C}=X({name:"",description:"",date:new Date().toISOString().split("T")[0]}),_=c.useCallback(le.debounce(s=>{v.get(route("savings.index"),{search:s||void 0},{preserveState:!0,preserveScroll:!0,replace:!0})},400),[]);c.useEffect(()=>{_(h)},[h,_]);const G=[{title:"Savings",href:"/savings"}],u=s=>new Intl.NumberFormat("en-GH",{style:"currency",currency:"GHS"}).format(s),R=s=>{switch(s){case"positive":return e.jsx(N,{className:"bg-green-100 text-green-800 hover:bg-green-100",children:"Positive"});case"negative":return e.jsx(N,{className:"bg-red-100 text-red-800 hover:bg-red-100",children:"Negative"});default:return e.jsx(N,{className:"bg-gray-100 text-gray-800 hover:bg-gray-100",children:"Zero"})}};function W(s){s.preventDefault(),z(route("savings.store"),{onSuccess:()=>{C(),x(!1)}})}function V(s){w(s),l({name:s.name,description:s.description||"",date:s.date}),m(!0)}function Z(s){s.preventDefault(),$(route("savings.update",q.id),{onSuccess:()=>{C(),m(!1),w(null)},preserveScroll:!0,preserveState:!0})}function J(s){const K=s.is_active?"archive":"restore";confirm(`Are you sure you want to ${K} this savings?`)&&v.patch(route("savings.archive",s.id),{},{preserveScroll:!0,preserveState:!0})}return e.jsxs(ne,{breadcrumbs:G,children:[e.jsx(Y,{title:"Savings"}),e.jsxs("div",{className:"min-h-screen space-y-6 bg-gray-100 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Savings"}),e.jsxs(T,{open:L,onOpenChange:x,children:[e.jsx(se,{asChild:!0,children:e.jsxs(r,{onClick:()=>x(!0),children:[e.jsx(de,{className:"mr-2 h-4 w-4"}),"New Savings"]})}),e.jsxs(k,{className:"max-w-md space-y-6",children:[e.jsxs(E,{children:[e.jsx(A,{children:"Create New Savings"}),e.jsx(F,{children:"Add a new savings to track credits and debits."})]}),e.jsxs("form",{onSubmit:W,children:[e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(o,{htmlFor:"name",children:["Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(j,{id:"name",placeholder:"Enter savings name",value:d.name,onChange:s=>l("name",s.target.value),required:!0}),a.name&&e.jsx("p",{className:"text-sm text-red-500",children:a.name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"description",children:"Description"}),e.jsx(H,{id:"description",placeholder:"Optional description",value:d.description,onChange:s=>l("description",s.target.value),rows:3}),a.description&&e.jsx("p",{className:"text-sm text-red-500",children:a.description})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(o,{htmlFor:"date",children:["Date ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(j,{id:"date",type:"date",value:d.date,onChange:s=>l("date",s.target.value),required:!0}),a.date&&e.jsx("p",{className:"text-sm text-red-500",children:a.date})]})]}),e.jsxs(B,{children:[e.jsx(r,{type:"button",variant:"outline",onClick:()=>x(!1),children:"Cancel"}),e.jsx(r,{type:"submit",disabled:p,children:p?"Creating...":"Create Savings"})]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[e.jsxs(f,{children:[e.jsxs(b,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(y,{className:"text-sm font-medium",children:"Total Savings"}),e.jsx(P,{className:"h-4 w-4 text-blue-600"})]}),e.jsxs(S,{children:[e.jsx("div",{className:"text-lg font-bold",children:g.total_accounts||0}),e.jsx("p",{className:"text-muted-foreground text-xs",children:"Active savings"})]})]}),e.jsxs(f,{children:[e.jsxs(b,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(y,{className:"text-sm font-medium",children:"Total Balance"}),e.jsx(ie,{className:"h-4 w-4 text-green-600"})]}),e.jsxs(S,{children:[e.jsx("div",{className:`text-lg font-bold ${(g.total_balance||0)>=0?"text-green-600":"text-red-600"}`,children:u(g.total_balance||0)}),e.jsx("p",{className:"text-muted-foreground text-xs",children:"Combined balance across all savings"})]})]})]}),e.jsxs(f,{children:[e.jsxs(b,{children:[e.jsxs(y,{className:"flex items-center gap-2",children:[e.jsx(P,{className:"h-5 w-5"}),"Savings"]}),e.jsx("div",{className:"mt-4 flex items-center space-x-2",children:e.jsxs("div",{className:"relative max-w-md flex-1",children:[e.jsx(ce,{className:"text-muted-foreground absolute left-2 top-2.5 h-4 w-4"}),e.jsx(j,{placeholder:"Search by name or description...",value:h,onChange:s=>U(s.target.value),className:"pl-8"})]})})]}),e.jsxs(S,{children:[e.jsxs(ae,{children:[e.jsx(te,{children:e.jsxs(O,{children:[e.jsx(n,{children:"Name"}),e.jsx(n,{children:"Date"}),e.jsx(n,{className:"text-right",children:"Credits"}),e.jsx(n,{className:"text-right",children:"Debits"}),e.jsx(n,{className:"text-right",children:"Balance"}),e.jsx(n,{children:"Status"}),e.jsx(n,{children:"Actions"})]})}),e.jsx(re,{children:t.data.map(s=>e.jsxs(O,{className:s.is_active?"":"opacity-50",children:[e.jsx(i,{children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:s.name}),s.description&&e.jsx("div",{className:"max-w-xs truncate text-sm text-gray-500",children:s.description})]})}),e.jsx(i,{children:s.date}),e.jsx(i,{className:"text-right font-medium text-green-600",children:u(s.total_credits)}),e.jsx(i,{className:"text-right font-medium text-red-600",children:u(s.total_debits)}),e.jsx(i,{className:"text-right",children:e.jsx("span",{className:`font-bold ${s.balance>=0?"text-green-600":"text-red-600"}`,children:u(s.balance)})}),e.jsx(i,{children:R(s.balance_status)}),e.jsx(i,{children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(r,{variant:"outline",size:"sm",onClick:()=>v.visit(route("savings.show",s.id)),className:"text-blue-600 hover:text-blue-700",children:e.jsx(oe,{className:"h-4 w-4"})}),e.jsx(r,{variant:"outline",size:"sm",onClick:()=>V(s),children:e.jsx(xe,{className:"h-4 w-4"})}),e.jsx(r,{variant:"outline",size:"sm",onClick:()=>J(s),className:s.is_active?"text-orange-600 hover:text-orange-700":"text-green-600 hover:text-green-700",children:e.jsx(he,{className:"h-4 w-4"})})]})})]},s.id))})]}),t.data.length===0&&e.jsx("div",{className:"text-muted-foreground py-8 text-center",children:h?"No savings found matching your search.":"No savings found. Create your first one!"}),(t.prev_page_url||t.next_page_url)&&e.jsxs("div",{className:"mt-6 flex items-center justify-center gap-4",children:[t.prev_page_url?e.jsx(D,{href:t.prev_page_url,preserveState:!0,preserveScroll:!0,className:"rounded border bg-white px-3 py-1 hover:bg-gray-100",children:"Previous"}):e.jsx("span",{className:"cursor-not-allowed rounded border bg-gray-200 px-3 py-1",children:"Previous"}),e.jsx("span",{className:"rounded border px-3 py-1",children:t.current_page}),t.next_page_url?e.jsx(D,{href:t.next_page_url,preserveState:!0,preserveScroll:!0,className:"rounded border bg-white px-3 py-1 hover:bg-gray-100",children:"Next"}):e.jsx("span",{className:"cursor-not-allowed rounded border bg-gray-200 px-3 py-1",children:"Next"})]})]})]})]}),e.jsx(T,{open:M,onOpenChange:m,children:e.jsxs(k,{className:"max-w-md space-y-6",children:[e.jsxs(E,{children:[e.jsx(A,{children:"Edit Savings"}),e.jsx(F,{children:"Update the savings details."})]}),e.jsxs("form",{onSubmit:Z,children:[e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(o,{htmlFor:"edit-name",children:["Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(j,{id:"edit-name",placeholder:"Enter savings name",value:d.name,onChange:s=>l("name",s.target.value),required:!0}),a.name&&e.jsx("p",{className:"text-sm text-red-500",children:a.name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"edit-description",children:"Description"}),e.jsx(H,{id:"edit-description",placeholder:"Optional description",value:d.description,onChange:s=>l("description",s.target.value),rows:3}),a.description&&e.jsx("p",{className:"text-sm text-red-500",children:a.description})]})]}),e.jsxs(B,{children:[e.jsx(r,{type:"button",variant:"outline",onClick:()=>m(!1),children:"Cancel"}),e.jsx(r,{type:"submit",disabled:p,children:p?"Updating...":"Update Savings"})]})]})]})})]})}export{Ee as default};
