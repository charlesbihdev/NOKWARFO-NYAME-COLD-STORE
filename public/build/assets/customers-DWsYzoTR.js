import{b as k,r as x,u as B,j as e,a as v}from"./app-1Notxd3e.js";import{F as l}from"./createLucideIcon-B7W1q_uQ.js";import{C as h,a as u,b as p,c as j}from"./card-DfvEkdop.js";import{D as C,a as G,b,c as y,d as w}from"./dialog-Dx9yVP87.js";import{I as i}from"./index-Xk3s--Yf.js";import{L as r}from"./label-Brq_mziV.js";import{T as U,a as z,b as T,c as d,d as L,e as n}from"./table-B4nc4C0T.js";import{T as F}from"./textarea-640VWfOb.js";import{A as R,U as X,C as J,M as K}from"./app-layout-DP6IZWd4.js";import{P as Q}from"./plus-6p939pSQ.js";import{P as V,M as W}from"./phone-CfscA2Tm.js";import{T as Y}from"./triangle-alert-BCn_3RQf.js";import{H as Z}from"./history-GqziKGW8.js";import{S as $}from"./square-pen-D_U6rt0r.js";import{T as ee}from"./trash-2-DYDRsOaj.js";import"./index-BxglnvVj.js";import"./index-BIqwGjeY.js";function fe(){const{customers:c=[]}=k().props,[A,o]=x.useState(!1),[S,g]=x.useState(null),{data:t,setData:a,post:D,put:E,processing:N,errors:se,reset:f}=B({name:"",phone:"",email:"",address:""}),[H,m]=x.useState(!1),P=[{title:"Customers",href:"/customers"}];function M(s){s.preventDefault(),D(route("customers.store"),{onSuccess:()=>{f(),m(!1)}})}function O(s){g(s),a({name:s.name,phone:s.phone||"",email:s.email||"",address:s.address||""}),o(!0)}function _(s){s.preventDefault(),E(route("customers.update",S.id),{onSuccess:()=>{f(),o(!1),g(null)},preserveScroll:!0,preserveState:!0,only:["customers","errors","flash"]})}function q(s){confirm("Are you sure you want to delete this customer?")&&v.delete(route("customers.destroy",s),{preserveScroll:!0,preserveState:!0,only:["customers","flash"]})}return e.jsxs(R,{breadcrumbs:P,children:[e.jsxs("div",{className:"min-h-screen space-y-6 bg-gray-100 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Customers"}),e.jsxs(C,{open:H,onOpenChange:m,children:[e.jsx(G,{asChild:!0,children:e.jsxs(l,{onClick:()=>m(!0),children:[e.jsx(Q,{className:"mr-2 h-4 w-4"}),"Add Customer"]})}),e.jsxs(b,{className:"max-w-2xl",children:[e.jsx(y,{children:e.jsx(w,{children:"Add New Customer"})}),e.jsxs("form",{onSubmit:M,className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(r,{htmlFor:"customer-name",className:"text-right",children:"Customer Name"}),e.jsx(i,{id:"customer-name",className:"col-span-3",placeholder:"Enter customer name",value:t.name,onChange:s=>a("name",s.target.value),required:!0})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(r,{htmlFor:"phone",className:"text-right",children:"Phone"}),e.jsx(i,{id:"phone",className:"col-span-3",placeholder:"+233 XX XXX XXXX",value:t.phone,onChange:s=>a("phone",s.target.value)})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(r,{htmlFor:"email",className:"text-right",children:"Email"}),e.jsx(i,{id:"email",type:"email",className:"col-span-3",placeholder:"customer@email.com",value:t.email,onChange:s=>a("email",s.target.value)})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(r,{htmlFor:"address",className:"text-right",children:"Address"}),e.jsx(F,{id:"address",className:"col-span-3",placeholder:"Customer address",value:t.address,onChange:s=>a("address",s.target.value)})]}),e.jsx(l,{type:"submit",disabled:N,children:"Add Customer"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-4",children:[e.jsxs(h,{children:[e.jsxs(u,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(p,{className:"text-sm font-medium",children:"Total Customers"}),e.jsx(X,{className:"h-4 w-4 text-blue-600"})]}),e.jsxs(j,{children:[e.jsx("div",{className:"text-2xl font-bold",children:c.length}),e.jsx("p",{className:"text-muted-foreground text-xs",children:"Active customers"})]})]}),e.jsxs(h,{children:[e.jsxs(u,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(p,{className:"text-sm font-medium",children:"Outstanding Balance"}),e.jsx(J,{className:"h-4 w-4 text-orange-600"})]}),e.jsxs(j,{children:[e.jsxs("div",{className:"text-2xl font-bold text-orange-600",children:["GH₵",c.reduce((s,I)=>s+parseFloat(I.outstanding_balance),0).toFixed(2)]}),e.jsx("p",{className:"text-muted-foreground text-xs",children:"Total owed"})]})]})]}),e.jsxs(h,{children:[e.jsx(u,{children:e.jsxs(p,{className:"flex items-center gap-2",children:[e.jsx(X,{className:"h-5 w-5"}),"Customer Directory"]})}),e.jsx(j,{children:e.jsxs(U,{children:[e.jsx(z,{children:e.jsxs(T,{children:[e.jsx(d,{children:"Customer Name"}),e.jsx(d,{children:"Contact Info"}),e.jsx(d,{children:"Address"}),e.jsx(d,{children:"Outstanding Balance"}),e.jsx(d,{children:"Actions"})]})}),e.jsx(L,{children:c.map(s=>e.jsxs(T,{children:[e.jsx(n,{className:"font-medium",children:s.name}),e.jsx(n,{children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[e.jsx(V,{className:"h-3 w-3"}),s.phone]}),e.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[e.jsx(W,{className:"h-3 w-3"}),s.email]})]})}),e.jsx(n,{className:"max-w-xs",children:e.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[e.jsx(K,{className:"h-3 w-3"}),s.address]})}),e.jsx(n,{className:"font-medium",children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:s.outstanding_balance>0?"text-red-600 font-bold":"text-green-600 font-bold",children:["GH₵",parseFloat(s.outstanding_balance).toFixed(2)]}),s.has_outstanding_debt&&e.jsx(Y,{className:"h-4 w-4 text-red-500"})]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Total Debt: GH₵",parseFloat(s.total_debt).toFixed(2)]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Total Payments: GH₵",parseFloat(s.total_payments).toFixed(2)]})]})}),e.jsx(n,{children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(l,{variant:"outline",size:"sm",onClick:()=>v.visit(route("customers.transactions",s.id)),className:"text-blue-600 hover:text-blue-700",children:e.jsx(Z,{className:"h-4 w-4"})}),e.jsx(l,{variant:"outline",size:"sm",onClick:()=>O(s),children:e.jsx($,{className:"h-4 w-4"})}),e.jsx(l,{variant:"outline",size:"sm",onClick:()=>q(s.id),children:e.jsx(ee,{className:"h-4 w-4"})})]})})]},s.id))})]})})]})]}),e.jsx(C,{open:A,onOpenChange:o,children:e.jsxs(b,{className:"max-w-2xl",children:[e.jsx(y,{children:e.jsx(w,{children:"Edit Customer"})}),e.jsxs("form",{onSubmit:_,className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(r,{htmlFor:"edit-customer-name",className:"text-right",children:"Customer Name"}),e.jsx(i,{id:"edit-customer-name",className:"col-span-3",placeholder:"Enter customer name",value:t.name,onChange:s=>a("name",s.target.value),required:!0})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(r,{htmlFor:"edit-phone",className:"text-right",children:"Phone"}),e.jsx(i,{id:"edit-phone",className:"col-span-3",placeholder:"+233 XX XXX XXXX",value:t.phone,onChange:s=>a("phone",s.target.value),required:!0})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(r,{htmlFor:"edit-email",className:"text-right",children:"Email"}),e.jsx(i,{id:"edit-email",type:"email",className:"col-span-3",placeholder:"customer@email.com",value:t.email,onChange:s=>a("email",s.target.value),required:!0})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(r,{htmlFor:"edit-address",className:"text-right",children:"Address"}),e.jsx(F,{id:"edit-address",className:"col-span-3",placeholder:"Customer address",value:t.address,onChange:s=>a("address",s.target.value)})]}),e.jsx(l,{type:"submit",disabled:N,children:"Update Customer"})]})]})})]})}export{fe as default};
