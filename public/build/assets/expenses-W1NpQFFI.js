import{r as m,u as L,j as e,a as y}from"./app-B1Ijehg9.js";import{A as ve}from"./app-layout-Dbx2Oeow.js";import{D as Ne}from"./DateRangePicker-DwkEeZR5.js";import{F as d}from"./createLucideIcon-B1DhxKix.js";import{C as M,a as k,b as z,c as G}from"./card-CaThUayS.js";import{T as fe,a as ye,b as w,c as x,d as Se,e as c}from"./table-CD1z3cxE.js";import{D as R,a as be,b as V,c as B,d as U}from"./dialog-wsPDAiu8.js";import{I as h}from"./input-DJXDQUXM.js";import{L as a}from"./label-DnhGvgIX.js";import{S as C,a as T,b as E,c as F,d as S}from"./select-BOaVquSR.js";import{T as Y}from"./textarea-aibnGtVK.js";import{I as n}from"./InputError-DU-Ypm_9.js";import{P as De}from"./plus-B2EX2e3e.js";import{T as we}from"./trending-down-pTCgPPi6.js";import{S as Ce}from"./square-pen-DvlvcvLn.js";import{T as Te}from"./trash-2-RxSDyOsm.js";import"./index-DNIgj2bq.js";import"./index-CfQIwQru.js";import"./index-RscDEaGL.js";function $e({expenses:t=[],start_date:$="",end_date:J="",type_filter:K="",total_amount:Q=0}){var P,q;const W=()=>{const s=new Date,i=new Date(s.getFullYear(),s.getMonth(),1),j=new Date(s.getFullYear(),s.getMonth()+1,0);return{start:i.toISOString().slice(0,10),end:j.toISOString().slice(0,10)}},{start:X,end:Z}=W(),[v,ee]=m.useState($||X),[N,se]=m.useState(J||Z),[b,te]=m.useState(K||"all"),[ae,_]=m.useState(!1),[re,D]=m.useState(!1),[le,O]=m.useState(null),{data:p,setData:u,post:ne,processing:A,errors:r,reset:ie}=L({description:"",amount:"",type:"others",notes:"",date:new Date().toISOString().split("T")[0]}),{data:g,setData:o,put:de,processing:I,errors:l,reset:ce}=L({description:"",amount:"",type:"others",notes:"",date:new Date().toISOString().split("T")[0]}),oe=[{title:"Expenses",href:"/expenses"}],f=[{value:"fixed",label:"Fixed"},{value:"additional",label:"Additional"},{value:"car_saving",label:"Car Saving"},{value:"trip_saving",label:"Trip Saving"},{value:"loan_saving",label:"Loan Saving"},{value:"others",label:"Others"}],me=(s,i)=>{const j=i==="start"?s:v,je=i==="end"?s:N;i==="start"&&ee(s),i==="end"&&se(s),y.get(route("expenses.index"),{start_date:j,end_date:je,type_filter:b,page:1},{preserveState:!0,preserveScroll:!0,replace:!0})},xe=s=>{te(s),y.get(route("expenses.index"),{start_date:v,end_date:N,type_filter:s,page:1},{preserveState:!0,preserveScroll:!0,replace:!0})},H=s=>{y.get(route("expenses.index"),{start_date:v,end_date:N,type_filter:b,page:s},{preserveState:!0,preserveScroll:!0,replace:!0})};function he(s){s.preventDefault(),ne(route("expenses.store"),{onSuccess:()=>{ie(),_(!1)},preserveScroll:!0})}function pe(s){s.preventDefault(),de(route("expenses.update",le.id),{onSuccess:()=>{ce(),D(!1),O(null)},preserveScroll:!0})}function ue(s){O(s),o({description:s.description,amount:s.amount,type:s.type,notes:s.notes||"",date:new Date(s.date).toISOString().split("T")[0]}),D(!0)}function ge(s){confirm(`Are you sure you want to delete the expense "${s.description}"?`)&&y.delete(route("expenses.destroy",s.id),{preserveScroll:!0})}return e.jsx(ve,{breadcrumbs:oe,children:e.jsxs("div",{className:"min-h-screen space-y-6 bg-gray-100 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Expenses Management"}),e.jsxs(R,{open:ae,onOpenChange:_,children:[e.jsx(be,{asChild:!0,children:e.jsxs(d,{children:[e.jsx(De,{className:"mr-2 h-4 w-4"}),"Add Expense"]})}),e.jsxs(V,{className:"sm:max-w-[425px]",children:[e.jsx(B,{children:e.jsx(U,{children:"Add New Expense"})}),e.jsxs("form",{onSubmit:he,className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(a,{htmlFor:"description",className:"text-right",children:"Description"}),e.jsxs("div",{className:"col-span-3",children:[e.jsx(h,{id:"description",placeholder:"Expense description",value:p.description,onChange:s=>u("description",s.target.value),required:!0}),r.description&&e.jsx(n,{message:r.description,className:"mt-2"})]})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(a,{htmlFor:"amount",className:"text-right",children:"Amount (GH₵)"}),e.jsxs("div",{className:"col-span-3",children:[e.jsx(h,{id:"amount",type:"number",step:"0.01",placeholder:"0.00",value:p.amount,onChange:s=>u("amount",s.target.value),required:!0}),r.amount&&e.jsx(n,{message:r.amount,className:"mt-2"})]})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(a,{htmlFor:"type",className:"text-right",children:"Type"}),e.jsxs("div",{className:"col-span-3",children:[e.jsxs(C,{value:p.type,onValueChange:s=>u("type",s),children:[e.jsx(T,{children:e.jsx(E,{placeholder:"Select expense type"})}),e.jsx(F,{children:f.map(s=>e.jsx(S,{value:s.value,children:s.label},s.value))})]}),r.type&&e.jsx(n,{message:r.type,className:"mt-2"})]})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(a,{htmlFor:"date",className:"text-right",children:"Date"}),e.jsxs("div",{className:"col-span-3",children:[e.jsx(h,{id:"date",type:"date",value:p.date,onChange:s=>u("date",s.target.value),required:!0}),r.date&&e.jsx(n,{message:r.date,className:"mt-2"})]})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(a,{htmlFor:"notes",className:"text-right",children:"Notes"}),e.jsxs("div",{className:"col-span-3",children:[e.jsx(Y,{id:"notes",placeholder:"Optional notes",value:p.notes,onChange:s=>u("notes",s.target.value),rows:3}),r.notes&&e.jsx(n,{message:r.notes,className:"mt-2"})]})]}),e.jsx(d,{type:"submit",disabled:A,children:A?"Adding...":"Add Expense"})]})]})]}),e.jsx(R,{open:re,onOpenChange:D,children:e.jsxs(V,{className:"sm:max-w-[425px]",children:[e.jsx(B,{children:e.jsx(U,{children:"Edit Expense"})}),e.jsxs("form",{onSubmit:pe,className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(a,{htmlFor:"edit-description",className:"text-right",children:"Description"}),e.jsxs("div",{className:"col-span-3",children:[e.jsx(h,{id:"edit-description",placeholder:"Expense description",value:g.description,onChange:s=>o("description",s.target.value),required:!0}),l.description&&e.jsx(n,{message:l.description,className:"mt-2"})]})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(a,{htmlFor:"edit-amount",className:"text-right",children:"Amount (GH₵)"}),e.jsxs("div",{className:"col-span-3",children:[e.jsx(h,{id:"edit-amount",type:"number",step:"0.01",placeholder:"0.00",value:g.amount,onChange:s=>o("amount",s.target.value),required:!0}),l.amount&&e.jsx(n,{message:l.amount,className:"mt-2"})]})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(a,{htmlFor:"edit-type",className:"text-right",children:"Type"}),e.jsxs("div",{className:"col-span-3",children:[e.jsxs(C,{value:g.type,onValueChange:s=>o("type",s),children:[e.jsx(T,{children:e.jsx(E,{placeholder:"Select expense type"})}),e.jsx(F,{children:f.map(s=>e.jsx(S,{value:s.value,children:s.label},s.value))})]}),l.type&&e.jsx(n,{message:l.type,className:"mt-2"})]})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(a,{htmlFor:"edit-date",className:"text-right",children:"Date"}),e.jsxs("div",{className:"col-span-3",children:[e.jsx(h,{id:"edit-date",type:"date",value:g.date,onChange:s=>o("date",s.target.value),required:!0}),l.date&&e.jsx(n,{message:l.date,className:"mt-2"})]})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(a,{htmlFor:"edit-notes",className:"text-right",children:"Notes"}),e.jsxs("div",{className:"col-span-3",children:[e.jsx(Y,{id:"edit-notes",placeholder:"Optional notes",value:g.notes,onChange:s=>o("notes",s.target.value),rows:3}),l.notes&&e.jsx(n,{message:l.notes,className:"mt-2"})]})]}),e.jsx(d,{type:"submit",disabled:I,children:I?"Updating...":"Update Expense"})]})]})})]}),e.jsxs("div",{className:"flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between",children:[e.jsx(Ne,{startDate:v,endDate:N,onChange:me}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(a,{htmlFor:"type-filter",children:"Filter by Type:"}),e.jsxs(C,{value:b,onValueChange:xe,children:[e.jsx(T,{className:"w-48",children:e.jsx(E,{placeholder:"All Types"})}),e.jsxs(F,{children:[e.jsx(S,{value:"all",children:"All Types"}),f.map(s=>e.jsx(S,{value:s.value,children:s.label},s.value))]})]})]})]}),e.jsxs(M,{children:[e.jsxs(k,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(z,{className:"text-sm font-medium",children:"Total Expenses"}),e.jsx(we,{className:"h-4 w-4 text-red-600"})]}),e.jsxs(G,{children:[e.jsxs("div",{className:"text-2xl font-bold text-red-600",children:["GH₵",Number(Q||0).toFixed(2)]}),e.jsxs("p",{className:"text-muted-foreground text-xs",children:[((P=t.data)==null?void 0:P.length)||0," expense",(((q=t.data)==null?void 0:q.length)||0)!==1?"s":""," in selected period"]})]})]}),e.jsxs(M,{children:[e.jsx(k,{children:e.jsx(z,{children:"Expenses List"})}),e.jsxs(G,{children:[e.jsxs(fe,{children:[e.jsx(ye,{children:e.jsxs(w,{children:[e.jsx(x,{children:"Date"}),e.jsx(x,{children:"Description"}),e.jsx(x,{children:"Type"}),e.jsx(x,{children:"Amount"}),e.jsx(x,{children:"Notes"}),e.jsx(x,{children:"Actions"})]})}),e.jsx(Se,{children:t.data&&t.data.length>0?t.data.map(s=>{var i;return e.jsxs(w,{children:[e.jsx(c,{className:"font-medium",children:new Date(s.date).toLocaleDateString()}),e.jsx(c,{children:s.description}),e.jsx(c,{children:e.jsx("span",{className:"inline-flex items-center rounded-full bg-gray-100 px-2.5 py-0.5 text-xs font-medium text-gray-800",children:((i=f.find(j=>j.value===s.type))==null?void 0:i.label)||s.type})}),e.jsxs(c,{className:"font-medium text-red-600",children:["GH₵",Number(s.amount).toFixed(2)]}),e.jsx(c,{className:"text-gray-500",children:s.notes||"-"}),e.jsx(c,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(d,{variant:"outline",size:"sm",onClick:()=>ue(s),className:"h-8 w-8 p-0",children:e.jsx(Ce,{className:"h-4 w-4"})}),e.jsx(d,{variant:"outline",size:"sm",onClick:()=>ge(s),className:"h-8 w-8 p-0 text-red-600 hover:text-red-700",children:e.jsx(Te,{className:"h-4 w-4"})})]})})]},s.id)}):e.jsx(w,{children:e.jsx(c,{colSpan:6,className:"text-center text-gray-500 py-8",children:"No expenses found for the selected period and filters."})})})]}),t.data&&t.data.length>0&&e.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-500",children:["Showing ",t.data.length," expense",t.data.length!==1?"s":""]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(d,{variant:"outline",size:"sm",onClick:()=>H(t.current_page-1),disabled:!t.prev_page_url,children:"Previous"}),e.jsxs("span",{className:"text-sm text-gray-500",children:["Page ",t.current_page," of ",t.last_page]}),e.jsx(d,{variant:"outline",size:"sm",onClick:()=>H(t.current_page+1),disabled:!t.next_page_url,children:"Next"})]})]})]})]})]})})}export{$e as default};
