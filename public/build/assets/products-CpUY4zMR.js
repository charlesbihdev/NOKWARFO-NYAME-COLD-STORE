import{r as d,u as W,j as e,a as X}from"./app-CJAfpu_B.js";import{C as Y}from"./ConfirmArchiveModal-D6yrxql8.js";import{I as i}from"./InputError-DMNrc3h0.js";import{B as Z}from"./badge-CV-W2Fb_.js";import{F as p}from"./createLucideIcon-Cg7ANiR-.js";import{C as ee,a as se,b as re,c as te}from"./card-CqjrLppC.js";import{D as S,a as ae,b as D,c as F,d as T,e as A}from"./dialog-CAA-wllh.js";import{I as l}from"./input-Dk-R2vtg.js";import{L as c}from"./label-Bg7Q41yp.js";import{S as w,a as E,b as k,c as q,d as I}from"./select-Bk5mqKH1.js";import{T as ie,a as ce,b as _,c as m,d as le,e as o}from"./table-GVnBoJML.js";import{A as ne,P as oe}from"./app-layout-BYjCDRLU.js";import{P as de}from"./plus-BdnMlgTQ.js";import{S as me}from"./square-pen-BFRhAgDe.js";import{T as pe}from"./trash-2-DWws5xuW.js";import"./triangle-alert-Ds5pzo1R.js";import"./index-Ca9tWU42.js";import"./index-Dqg2lGr_.js";import"./index-CzC18CvF.js";import"./index-DLss49vn.js";import"./index-BWkE5G2Y.js";function Me({products:v=[],suppliers:he=[],errors:ue={}}){var P,b;const[M,u]=d.useState(!1),[O,x]=d.useState(!1),[B,N]=d.useState(null),[L,g]=d.useState(!1),[n,j]=d.useState(null),[H,f]=d.useState(!1),{data:a,setData:t,post:z,put:R,processing:y,reset:C,errors:r}=W({name:"",description:"",category:"",supplier_id:"",lines_per_carton:1,cost_price_per_carton:""}),U=[{title:"Products",href:"/products"}];function V(s){s.preventDefault(),z(route("products.store"),{onSuccess:()=>{C(),u(!1)},preserveScroll:!0,preserveState:!0,only:["products","errors","flash"]})}function $(s){N(s),t({name:s.name,description:s.description||"",category:s.category,supplier_id:s.supplier_id?s.supplier_id.toString():"",lines_per_carton:s.lines_per_carton,cost_price_per_carton:s.cost_price_per_carton||""}),x(!0)}function G(s){s.preventDefault(),R(route("products.update",B.id),{onSuccess:()=>{C(),x(!1),N(null)},preserveScroll:!0,preserveState:!0,only:["products","errors","flash"]})}function J(s){j(s),g(!0)}function K(){n&&(f(!0),X.delete(route("products.destroy",n.id),{preserveScroll:!0,preserveState:!0,only:["products","flash"],onFinish:()=>{f(!1),g(!1),j(null)}}))}function Q(s){const h=[];return s.sale_items_count>0&&h.push(`${s.sale_items_count} sales`),s.stock_movements_count>0&&h.push(`${s.stock_movements_count} stock movements`),h.length>0?h.join(", "):null}return e.jsxs(ne,{breadcrumbs:U,children:[e.jsxs("div",{className:"min-h-screen space-y-6 bg-gray-100 p-6",children:[e.jsxs("div",{className:"mb-4 rounded border border-blue-200 bg-blue-50 p-4 text-blue-900",children:[e.jsx("strong",{children:"Note:"})," This page is for managing your ",e.jsx("b",{children:"product catalog"})," only.",e.jsx("br",{}),e.jsxs("ul",{className:"mt-2 list-disc pl-6",children:[e.jsx("li",{children:"Add, edit, or remove product details (name, price, supplier, etc.) here."}),e.jsx("li",{children:e.jsxs("b",{children:["All stock changes (add, remove, adjust) are done in ",e.jsx("u",{children:"Inventory Management"}),", not here."]})}),e.jsx("li",{children:"Think of this as your “master list” of what you could possibly have in your store."})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Products"}),e.jsxs(S,{open:M,onOpenChange:u,children:[e.jsx(ae,{asChild:!0,children:e.jsxs(p,{onClick:()=>u(!0),children:[e.jsx(de,{className:"mr-2 h-4 w-4"}),"Add Product"]})}),e.jsxs(D,{className:"max-w-2xl",children:[e.jsxs(F,{children:[e.jsx(T,{children:"Add New Product"}),e.jsx(A,{children:"Enter the product details. All fields marked with * are required."})]}),e.jsxs("form",{onSubmit:V,className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(c,{htmlFor:"name",className:"text-right",children:"Product Name *"}),e.jsxs("div",{className:"col-span-3",children:[e.jsx(l,{id:"name",placeholder:"Enter product name",value:a.name,onChange:s=>t("name",s.target.value),required:!0}),r.name&&e.jsx(i,{message:r.name,className:"mt-2"})]})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(c,{htmlFor:"lines_per_carton",className:"text-right",children:"Lines per Carton *"}),e.jsxs("div",{className:"col-span-3",children:[e.jsxs(w,{value:(P=a.lines_per_carton)==null?void 0:P.toString(),onValueChange:s=>t("lines_per_carton",s),required:!0,children:[e.jsx(E,{children:e.jsx(k,{placeholder:"Select lines per carton"})}),e.jsx(q,{children:[1,2,3,4,5].map(s=>e.jsx(I,{value:s.toString(),children:s},s))})]}),r.lines_per_carton&&e.jsx(i,{message:r.lines_per_carton,className:"mt-2"})]})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(c,{htmlFor:"cost_price_per_carton",className:"text-right",children:"Cost Price/Carton *"}),e.jsxs("div",{className:"col-span-3",children:[e.jsx(l,{id:"cost_price_per_carton",type:"number",step:"0.01",min:"0",placeholder:"e.g., 120.00",value:a.cost_price_per_carton,onChange:s=>t("cost_price_per_carton",s.target.value),required:!0}),e.jsx("p",{className:"text-muted-foreground mt-1 text-xs",children:"The cost price you pay per carton from the supplier"}),r.cost_price_per_carton&&e.jsx(i,{message:r.cost_price_per_carton,className:"mt-2"})]})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(c,{htmlFor:"description",className:"text-right",children:"Description"}),e.jsxs("div",{className:"col-span-3",children:[e.jsx(l,{id:"description",placeholder:"Product description",value:a.description,onChange:s=>t("description",s.target.value)}),r.description&&e.jsx(i,{message:r.description,className:"mt-2"})]})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(c,{htmlFor:"category",className:"text-right",children:"Category *"}),e.jsxs("div",{className:"col-span-3",children:[e.jsx(l,{id:"category",placeholder:"e.g., Frozen, Chilled, Beverages",value:a.category,onChange:s=>t("category",s.target.value),required:!0}),r.category&&e.jsx(i,{message:r.category,className:"mt-2"})]})]}),e.jsx(p,{type:"submit",disabled:y,children:"Add Product"})]})]})]})]}),e.jsx(S,{open:O,onOpenChange:x,children:e.jsxs(D,{className:"max-w-2xl",children:[e.jsxs(F,{children:[e.jsx(T,{children:"Edit Product"}),e.jsx(A,{children:"Update the product information. All fields marked with * are required."})]}),e.jsxs("form",{onSubmit:G,className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(c,{htmlFor:"edit-name",className:"text-right",children:"Product Name *"}),e.jsxs("div",{className:"col-span-3",children:[e.jsx(l,{id:"edit-name",placeholder:"Enter product name",value:a.name,onChange:s=>t("name",s.target.value),required:!0}),r.name&&e.jsx(i,{message:r.name,className:"mt-2"})]})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(c,{htmlFor:"lines_per_carton",className:"text-right",children:"Lines per Carton *"}),e.jsxs("div",{className:"col-span-3",children:[e.jsxs(w,{value:(b=a.lines_per_carton)==null?void 0:b.toString(),onValueChange:s=>t("lines_per_carton",s),required:!0,children:[e.jsx(E,{children:e.jsx(k,{placeholder:"Select lines per carton"})}),e.jsx(q,{children:[1,2,3,4,5].map(s=>e.jsx(I,{value:s.toString(),children:s},s))})]}),r.lines_per_carton&&e.jsx(i,{message:r.lines_per_carton,className:"mt-2"})]})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(c,{htmlFor:"edit-cost_price_per_carton",className:"text-right",children:"Cost Price/Carton *"}),e.jsxs("div",{className:"col-span-3",children:[e.jsx(l,{id:"edit-cost_price_per_carton",type:"number",step:"0.01",min:"0",placeholder:"e.g., 120.00",value:a.cost_price_per_carton,onChange:s=>t("cost_price_per_carton",s.target.value),required:!0}),e.jsx("p",{className:"text-muted-foreground mt-1 text-xs",children:"The cost price you pay per carton from the supplier"}),r.cost_price_per_carton&&e.jsx(i,{message:r.cost_price_per_carton,className:"mt-2"})]})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(c,{htmlFor:"edit-description",className:"text-right",children:"Description"}),e.jsxs("div",{className:"col-span-3",children:[e.jsx(l,{id:"edit-description",placeholder:"Product description",value:a.description,onChange:s=>t("description",s.target.value)}),r.description&&e.jsx(i,{message:r.description,className:"mt-2"})]})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(c,{htmlFor:"edit-category",className:"text-right",children:"Category *"}),e.jsxs("div",{className:"col-span-3",children:[e.jsx(l,{id:"edit-category",placeholder:"e.g., Frozen, Chilled, Beverages",value:a.category,onChange:s=>t("category",s.target.value),required:!0}),r.category&&e.jsx(i,{message:r.category,className:"mt-2"})]})]}),e.jsx(p,{type:"submit",disabled:y,children:"Update Product"})]})]})}),e.jsxs(ee,{children:[e.jsx(se,{children:e.jsxs(re,{className:"flex items-center gap-2",children:[e.jsx(oe,{className:"h-5 w-5"}),"Product Directory"]})}),e.jsx(te,{children:e.jsxs(ie,{children:[e.jsx(ce,{children:e.jsxs(_,{children:[e.jsx(m,{children:"Product Name"}),e.jsx(m,{children:"Lines per Carton"}),e.jsx(m,{children:"Cost Price/Carton"}),e.jsx(m,{children:"Category"}),e.jsx(m,{children:"Status"}),e.jsx(m,{children:"Actions"})]})}),e.jsxs(le,{children:[v.map(s=>e.jsxs(_,{children:[e.jsx(o,{className:"font-medium",children:s.name}),e.jsx(o,{children:s.lines_per_carton}),e.jsx(o,{className:s.cost_price_per_carton?"":"text-orange-600",children:s.cost_price_per_carton?`GH₵${parseFloat(s.cost_price_per_carton).toFixed(2)}`:"Not set"}),e.jsx(o,{children:s.category}),e.jsx(o,{children:e.jsx(Z,{variant:s.is_active?"default":"secondary",children:s.is_active?"Active":"Inactive"})}),e.jsx(o,{children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(p,{variant:"outline",size:"sm",onClick:()=>$(s),children:e.jsx(me,{className:"h-4 w-4"})}),e.jsx(p,{variant:"outline",size:"sm",onClick:()=>J(s),children:e.jsx(pe,{className:"h-4 w-4"})})]})})]},s.id)),v.length===0&&e.jsx(_,{children:e.jsx(o,{colSpan:6,className:"text-muted-foreground py-8 text-center",children:"No products found. Add your first product to get started."})})]})]})})]})]}),e.jsx(Y,{isOpen:L,onClose:()=>{g(!1),j(null)},onConfirm:K,title:"Delete Product",itemName:n==null?void 0:n.name,relatedDataMessage:n?Q(n):null,isProcessing:H})]})}export{Me as default};
