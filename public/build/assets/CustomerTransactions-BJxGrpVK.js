import{u as A,j as e,r as m,H as De,L as W,a as Q}from"./app-BnH38fZV.js";import{B as ee}from"./badge-C9xz2nTi.js";import{c as re,F as a}from"./createLucideIcon-BtnL1mUF.js";import{C as v,a as f,b as _,c as w,d as Ce}from"./card-CpmHGbsc.js";import{D as E,a as ne,b as R,c as H,d as L,e as M,f as O,X as Pe}from"./dialog-Dq9d3o5K.js";import{I as o}from"./input-Cog3RW_M.js";import{L as r}from"./label-AhG-VvZ5.js";import{T as Se,a as ke,b as te,c as h,d as Te,e as p}from"./table-DbdgEq6_.js";import{T as q}from"./textarea-V_S9e6X-.js";import{P as le}from"./plus-B_i5jZEa.js";import{A as Fe,M as Ae,S as Ee}from"./app-layout-CGJfXk6C.js";import{P as de}from"./printer-dEW0okeC.js";import{P as Re,M as He}from"./phone-CNVyJzzh.js";import{C as Le}from"./calendar-BGEu4eEj.js";import{D as Me}from"./dollar-sign-BFe5CrLd.js";import{S as se}from"./square-pen-D4M5yto8.js";import{T as ae}from"./trash-2-DZTaycrW.js";import"./index-B6yMYTsw.js";import"./index-B1pbROxw.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oe=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],qe=re("ArrowLeft",Oe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],ze=re("FileText",Ie);function Be({customer:s,open:l,onOpenChange:u}){const{data:c,setData:j,post:C,processing:g,errors:d,reset:I}=A({amount:"",debt_date:new Date().toISOString().split("T")[0],description:"",notes:""}),y=i=>{i.preventDefault(),C(route("customers.debts.store",s.id),{onSuccess:()=>{u(!1),I()}})};return e.jsxs(E,{open:l,onOpenChange:u,children:[e.jsx(ne,{asChild:!0,children:e.jsxs(a,{variant:"outline",className:"border-red-600 text-red-600 hover:bg-red-50",children:[e.jsx(le,{className:"mr-2 h-4 w-4"}),"Add Debt"]})}),e.jsxs(R,{className:"sm:max-w-[500px]",children:[e.jsxs(H,{children:[e.jsx(L,{children:"Add Debt Record"}),e.jsxs(M,{children:["Record a debt entry for ",s.name,". This can be a previous debt or any outstanding amount."]})]}),e.jsxs("form",{onSubmit:y,children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs(r,{htmlFor:"amount",children:["Amount ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(o,{id:"amount",type:"number",step:"0.01",min:"0.01",value:c.amount,onChange:i=>j("amount",i.target.value),placeholder:"0.00",required:!0}),d.amount&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:d.amount})]}),e.jsxs("div",{children:[e.jsxs(r,{htmlFor:"debt_date",children:["Debt Date ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(o,{id:"debt_date",type:"date",value:c.debt_date,onChange:i=>j("debt_date",i.target.value),required:!0}),d.debt_date&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:d.debt_date})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"description",children:"Description"}),e.jsx(o,{id:"description",type:"text",value:c.description,onChange:i=>j("description",i.target.value),placeholder:"Brief description of the debt...",maxLength:500}),d.description&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:d.description})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"notes",children:"Additional Notes"}),e.jsx(q,{id:"notes",value:c.notes,onChange:i=>j("notes",i.target.value),placeholder:"Any additional notes or details...",rows:3,maxLength:1e3}),d.notes&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:d.notes})]})]}),e.jsxs(O,{className:"mt-6",children:[e.jsx(a,{type:"button",variant:"outline",onClick:()=>u(!1),disabled:g,children:"Cancel"}),e.jsx(a,{type:"submit",disabled:g,className:"bg-red-600 hover:bg-red-700",children:g?"Adding...":"Add Debt"})]})]})]})]})}const Ue=({payment:s,customer:l,onClose:u})=>{const c=()=>{window.print()};return e.jsx("div",{className:"receipt-print-wrapper fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4 print:static print:block print:bg-transparent print:p-0",children:e.jsxs("div",{className:"receipt-container max-h-[90vh] w-full max-w-md overflow-y-auto rounded-lg bg-white p-6 shadow-xl print:max-h-none print:overflow-visible print:rounded-none print:shadow-none",children:[e.jsxs("div",{className:"mb-4 text-center print:mb-2",children:[e.jsx("div",{className:"mx-auto mb-2 w-full border-b-2 border-dashed border-black print:mb-1 print:border-b"}),e.jsx("h1",{className:"text-xl font-bold uppercase tracking-wide print:text-base",children:"NOKWARFO NYAME COLD STORE"}),e.jsx("p",{className:"text-sm text-gray-600 print:text-[10px] print:text-black",children:"Kasoa"}),e.jsxs("p",{className:"text-sm text-gray-600 print:text-[10px] print:text-black",children:["Tel: ","024 375 6588 / 024 693 7080 / 055 515 1777"]}),e.jsx("div",{className:"mx-auto mt-2 w-full border-b-2 border-dashed border-black print:mt-1 print:border-b"})]}),e.jsx("div",{className:"mb-4 text-center print:mb-2",children:e.jsx("span",{className:"inline-block rounded bg-green-100 px-4 py-1 text-lg font-bold text-green-700 print:border print:border-black print:bg-transparent print:px-0 print:py-0 print:text-sm print:text-black",children:"PAYMENT RECEIPT"})}),e.jsxs("div",{className:"mb-4 space-y-2 text-sm print:mb-2 print:space-y-1 print:text-[10px]",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-semibold",children:"Receipt #:"}),e.jsx("span",{className:"font-mono",children:s.id})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-semibold",children:"Date:"}),e.jsx("span",{children:s.payment_date||s.date})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-semibold",children:"Customer:"}),e.jsx("span",{className:"max-w-[60%] truncate text-right",children:l.name})]})]}),e.jsx("div",{className:"my-3 border-t border-dashed border-gray-400 print:my-1 print:border-black"}),e.jsxs("div",{className:"mb-4 space-y-2 print:mb-2 print:space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-base print:text-sm",children:[e.jsx("span",{className:"font-semibold",children:"Payment Amount:"}),e.jsxs("span",{className:"font-bold text-green-600 print:text-black",children:["GH₵ ",parseFloat(s.amount_collected||s.payment_amount||0).toFixed(2)]})]}),s.previous_balance!==void 0&&e.jsxs("div",{className:"flex justify-between text-sm print:text-[10px]",children:[e.jsx("span",{className:"text-gray-600 print:text-black",children:"Previous Balance:"}),e.jsxs("span",{children:["GH₵ ",parseFloat(s.previous_balance).toFixed(2)]})]}),s.outstanding_balance!==void 0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"my-2 border-t border-dashed border-gray-400 print:my-1 print:border-black"}),e.jsxs("div",{className:"flex justify-between text-base print:text-sm",children:[e.jsx("span",{className:"font-semibold",children:"Remaining Balance:"}),e.jsxs("span",{className:"font-bold text-red-600 print:text-black",children:["GH₵ ",parseFloat(s.outstanding_balance||s.current_balance||0).toFixed(2)]})]})]})]}),s.notes&&e.jsxs("div",{className:"mb-4 print:mb-2",children:[e.jsx("div",{className:"my-2 border-t border-dashed border-gray-400 print:my-1 print:border-black"}),e.jsxs("p",{className:"text-sm text-gray-600 print:text-[10px] print:text-black",children:[e.jsx("span",{className:"font-semibold",children:"Notes: "}),s.notes]})]}),e.jsx("div",{className:"space-y-2 border-t-2 border-black pt-3 print:space-y-1 print:pt-2",children:s.outstanding_balance>0||s.current_balance>0?e.jsxs("div",{className:"text-center text-sm text-orange-600 print:text-[10px] print:text-black",children:[e.jsx("p",{className:"font-semibold",children:"PARTIAL PAYMENT RECEIVED"}),e.jsxs("p",{className:"mt-1",children:["Outstanding balance: GH₵ ",parseFloat(s.outstanding_balance||s.current_balance||0).toFixed(2)]})]}):e.jsxs("div",{className:"flex justify-between text-base text-green-600 print:text-sm print:text-black",children:[e.jsx("span",{className:"font-semibold",children:"ACCOUNT SETTLED"}),e.jsx("span",{children:"✓"})]})}),e.jsxs("div",{className:"mt-6 border-t-2 border-dashed border-black pt-4 text-center print:mt-3 print:pt-2",children:[e.jsx("p",{className:"text-sm text-gray-500 print:text-[10px] print:text-black",children:"Thank you for your payment!"}),e.jsx("p",{className:"mt-2 text-sm font-semibold print:mt-1 print:text-xs",children:"We appreciate your business."}),e.jsx("div",{className:"mt-3 text-[10px] text-gray-400 print:mt-2 print:text-[10px] print:text-black",children:"*** PAYMENT RECEIPT ***"})]}),e.jsxs("div",{className:"mt-6 flex gap-3 print:hidden",children:[e.jsxs(a,{onClick:c,className:"flex-1 bg-blue-600 hover:bg-blue-700",children:[e.jsx(de,{className:"mr-2 h-4 w-4"}),"Print Receipt"]}),e.jsxs(a,{onClick:u,variant:"outline",className:"flex-1",children:[e.jsx(Pe,{className:"mr-2 h-4 w-4"}),"Close"]})]})]})})};function ct({customer:s,transactions:l}){const[u,c]=m.useState(!1),[j,C]=m.useState(!1),[g,d]=m.useState(null),[I,y]=m.useState(!1),[i,X]=m.useState(null),[ie,P]=m.useState(!1),[ce,z]=m.useState(!1),[Z,B]=m.useState(null),{data:U,setData:G,post:oe,processing:J,errors:S,reset:xe}=A({amount_collected:"",payment_date:new Date().toISOString().split("T")[0],notes:""}),{data:k,setData:D,put:me,processing:Y,errors:x,reset:he}=A({amount:"",debt_date:"",description:"",notes:""}),{data:$,setData:T,put:pe,processing:K,errors:N,reset:ue}=A({amount_collected:"",payment_date:"",notes:""}),je=t=>{t.preventDefault(),oe(route("customers.payments.store",s.id),{onSuccess:b=>{if(c(!1),xe(),b.props.transactions&&b.props.transactions.data){const F=b.props.transactions.data.find(V=>V.payment_amount>0&&V.type!=="debt"&&V.type!=="historical_debt");F&&(B(F),z(!0))}}})},be=t=>{d(t),D({amount:t.debt_amount,debt_date:t.date,description:t.description,notes:t.notes||""}),y(!0)},ge=t=>{t.preventDefault(),me(route("customers.debts.update",[s.id,g.debt_record_id]),{onSuccess:()=>{y(!1),he(),d(null)}})},ye=t=>{confirm("Are you sure you want to delete this debt record? This will affect all subsequent balance calculations.")&&Q.delete(route("customers.debts.destroy",[s.id,t.debt_record_id]),{preserveScroll:!0})},Ne=t=>{X(t),T({amount_collected:t.payment_amount,payment_date:t.date,notes:t.notes||""}),P(!0)},ve=t=>{t.preventDefault(),pe(route("customers.payments.update",i.payment_id),{onSuccess:()=>{P(!1),ue(),X(null)}})},fe=t=>{confirm("Are you sure you want to delete this payment? This will affect all subsequent balance calculations.")&&Q.delete(route("customers.payments.delete",t.payment_id),{preserveScroll:!0})},_e=t=>{B(t),z(!0)},we=t=>{switch(t){case"paid":return"bg-green-100 text-green-800";case"current":return"bg-blue-100 text-blue-800";case"overdue_30":return"bg-yellow-100 text-yellow-800";case"overdue_60":return"bg-orange-100 text-orange-800";case"overdue_90":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},n=t=>new Intl.NumberFormat("en-GH",{style:"currency",currency:"GHS"}).format(t);return e.jsxs(Fe,{children:[e.jsx(De,{title:`${s.name} - Transaction History`}),e.jsx("div",{className:"py-12",children:e.jsxs("div",{className:"mx-auto max-w-7xl sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs(W,{href:route("customers.index"),className:"mb-4 inline-flex items-center text-sm text-gray-600 hover:text-gray-900",children:[e.jsx(qe,{className:"mr-2 h-4 w-4"}),"Back to Customers"]}),e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:s.name}),e.jsx("p",{className:"mt-1 text-gray-600",children:"Transaction History & Debt Management"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(Be,{customer:s,open:j,onOpenChange:C}),e.jsxs(E,{open:u,onOpenChange:c,children:[e.jsx(ne,{asChild:!0,children:e.jsxs(a,{className:"bg-green-600 hover:bg-green-700",children:[e.jsx(le,{className:"mr-2 h-4 w-4"}),"Record Payment"]})}),e.jsxs(R,{children:[e.jsxs(H,{children:[e.jsx(L,{children:"Record Payment"}),e.jsxs(M,{children:["Record a payment from ",s.name," against their outstanding debt."]})]}),e.jsx("div",{className:"rounded-lg border border-orange-200 bg-orange-50 p-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Outstanding Debt:"}),e.jsx("span",{className:"text-xl font-bold text-orange-600",children:n(s.outstanding_balance)})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Total Debt:"}),e.jsx("span",{className:"font-medium text-gray-900",children:n(s.total_debt)})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Paid So Far:"}),e.jsx("span",{className:"font-medium text-green-600",children:n(s.total_payments)})]})]})}),e.jsxs("form",{onSubmit:je,children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(r,{htmlFor:"amount_collected",children:"Amount Collected"}),e.jsx(o,{id:"amount_collected",type:"number",step:"0.01",value:U.amount_collected,onChange:t=>G("amount_collected",t.target.value),placeholder:"0.00",required:!0}),S.amount_collected&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:S.amount_collected})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"payment_date",children:"Payment Date"}),e.jsx(o,{id:"payment_date",type:"date",value:U.payment_date,onChange:t=>G("payment_date",t.target.value),required:!0}),S.payment_date&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:S.payment_date})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"notes",children:"Notes (Optional)"}),e.jsx(q,{id:"notes",value:U.notes,onChange:t=>G("notes",t.target.value),placeholder:"Payment notes...",rows:3})]})]}),e.jsxs(O,{className:"mt-6",children:[e.jsx(a,{type:"button",variant:"outline",onClick:()=>c(!1),children:"Cancel"}),e.jsx(a,{type:"submit",disabled:J,children:J?"Recording...":"Record Payment"})]})]})]})]})]})]})]}),e.jsxs("div",{className:"mb-8 grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs(v,{children:[e.jsx(f,{className:"pb-2",children:e.jsx(_,{className:"text-sm font-medium text-gray-600",children:"Total Debt"})}),e.jsx(w,{children:e.jsx("div",{className:"text-2xl font-bold text-red-600",children:n(s.total_debt)})})]}),e.jsxs(v,{children:[e.jsx(f,{className:"pb-2",children:e.jsx(_,{className:"text-sm font-medium text-gray-600",children:"Outstanding Balance"})}),e.jsx(w,{children:e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:n(s.outstanding_balance)})})]}),e.jsxs(v,{children:[e.jsx(f,{className:"pb-2",children:e.jsx(_,{className:"text-sm font-medium text-gray-600",children:"Total Payments"})}),e.jsx(w,{children:e.jsx("div",{className:"text-2xl font-bold text-green-600",children:n(s.total_payments)})})]}),e.jsxs(v,{children:[e.jsx(f,{className:"pb-2",children:e.jsx(_,{className:"text-sm font-medium text-gray-600",children:"Status"})}),e.jsx(w,{children:e.jsx(ee,{className:we(s.outstanding_balance>0?"overdue_30":"paid"),children:s.outstanding_balance>0?"Has Outstanding Debt":"Paid Up"})})]})]}),e.jsxs(v,{className:"mb-8",children:[e.jsx(f,{children:e.jsx(_,{children:"Customer Information"})}),e.jsx(w,{children:e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Re,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:s.phone||"No phone number"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(He,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:s.email||"No email address"})]}),s.address&&e.jsxs("div",{className:"flex items-start space-x-2 md:col-span-2",children:[e.jsx(Ae,{className:"mt-0.5 h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:s.address})]})]})})]}),e.jsxs(v,{children:[e.jsxs(f,{children:[e.jsx(_,{children:"Transaction History"}),e.jsx(Ce,{children:"Complete history of debt transactions and payments"})]}),e.jsxs(w,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(Se,{children:[e.jsx(ke,{children:e.jsxs(te,{children:[e.jsx(h,{children:"Date"}),e.jsx(h,{children:"Type"}),e.jsx(h,{children:"Reference"}),e.jsx(h,{children:"Description"}),e.jsx(h,{className:"text-right",children:"Debt Amount"}),e.jsx(h,{className:"text-right",children:"Payment Amount"}),e.jsx(h,{className:"text-right",children:"Balance"}),e.jsx(h,{className:"text-right",children:"Actions"})]})}),e.jsx(Te,{children:l.data.map(t=>e.jsxs(te,{children:[e.jsx(p,{children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Le,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{children:t.date})]})}),e.jsx(p,{children:e.jsx(ee,{className:`capitalize ${t.type==="debt"||t.type==="historical_debt"?"bg-red-600 text-white hover:bg-red-700":"bg-green-600 text-white hover:bg-green-700"}`,children:t.type==="debt"?e.jsxs(e.Fragment,{children:[e.jsx(Ee,{className:"mr-1 h-3 w-3"}),"Debt"]}):t.type==="historical_debt"?e.jsxs(e.Fragment,{children:[e.jsx(ze,{className:"mr-1 h-3 w-3"}),"Historical Debt"]}):e.jsxs(e.Fragment,{children:[e.jsx(Me,{className:"mr-1 h-3 w-3"}),"Payment"]})})}),e.jsx(p,{className:"font-mono text-sm",children:t.reference}),e.jsx(p,{children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:t.description}),t.notes&&e.jsx("div",{className:"mt-1 text-sm text-gray-500",children:t.notes}),t.sale_items&&t.sale_items.length>0&&e.jsx("div",{className:"mt-1 text-sm text-gray-600",children:t.sale_items.map((b,F)=>e.jsxs("div",{children:[b.product," - ",b.quantity," @ ",n(b.unit_price)]},F))})]})}),e.jsx(p,{className:"text-right",children:t.debt_amount>0?e.jsxs("span",{className:"font-medium text-red-600",children:["+",n(t.debt_amount)]}):e.jsx("span",{className:"text-gray-500",children:"-"})}),e.jsx(p,{className:"text-right",children:t.payment_amount>0?e.jsxs("span",{className:"font-medium text-green-600",children:["-",n(t.payment_amount)]}):e.jsx("span",{className:"text-gray-500",children:"-"})}),e.jsx(p,{className:"text-right",children:e.jsx("span",{className:`font-bold ${t.current_balance>0?"text-red-600":"text-green-600"}`,children:n(t.current_balance)})}),e.jsxs(p,{className:"text-right",children:[t.type==="historical_debt"&&e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(a,{variant:"outline",size:"sm",onClick:()=>be(t),className:"text-blue-600 hover:text-blue-700",children:e.jsx(se,{className:"h-3 w-3"})}),e.jsx(a,{variant:"outline",size:"sm",onClick:()=>ye(t),className:"text-red-600 hover:text-red-700",children:e.jsx(ae,{className:"h-3 w-3"})})]}),t.payment_amount>0&&t.type!=="debt"&&t.type!=="historical_debt"&&e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(a,{variant:"outline",size:"sm",onClick:()=>_e(t),className:"text-green-600 hover:text-green-700",children:e.jsx(de,{className:"h-3 w-3"})}),e.jsx(a,{variant:"outline",size:"sm",onClick:()=>Ne(t),className:"text-blue-600 hover:text-blue-700",children:e.jsx(se,{className:"h-3 w-3"})}),e.jsx(a,{variant:"outline",size:"sm",onClick:()=>fe(t),className:"text-red-600 hover:text-red-700",children:e.jsx(ae,{className:"h-3 w-3"})})]})]})]},t.id))})]})}),(l.prev_page_url||l.next_page_url)&&e.jsxs("div",{className:"mt-6 flex items-center justify-center gap-4",children:[l.prev_page_url?e.jsx(W,{href:l.prev_page_url,preserveState:!0,preserveScroll:!0,className:"rounded border bg-white px-3 py-1 hover:bg-gray-100",children:"Previous"}):e.jsx("span",{className:"cursor-not-allowed rounded border bg-gray-200 px-3 py-1",children:"Previous"}),e.jsx("span",{className:"rounded border px-3 py-1",children:l.current_page}),l.next_page_url?e.jsx(W,{href:l.next_page_url,preserveState:!0,preserveScroll:!0,className:"rounded border bg-white px-3 py-1 hover:bg-gray-100",children:"Next"}):e.jsx("span",{className:"cursor-not-allowed rounded border bg-gray-200 px-3 py-1",children:"Next"})]})]})]}),e.jsx(E,{open:I,onOpenChange:y,children:e.jsxs(R,{children:[e.jsxs(H,{children:[e.jsx(L,{children:"Edit Debt Record"}),e.jsx(M,{children:"Update the debt record details."})]}),e.jsxs("form",{onSubmit:ge,children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs(r,{htmlFor:"edit_amount",children:["Amount ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(o,{id:"edit_amount",type:"number",step:"0.01",min:"0.01",value:k.amount,onChange:t=>D("amount",t.target.value),required:!0}),x.amount&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:x.amount})]}),e.jsxs("div",{children:[e.jsxs(r,{htmlFor:"edit_debt_date",children:["Debt Date ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(o,{id:"edit_debt_date",type:"date",value:k.debt_date,onChange:t=>D("debt_date",t.target.value),required:!0}),x.debt_date&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:x.debt_date})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"edit_description",children:"Description"}),e.jsx(o,{id:"edit_description",type:"text",value:k.description,onChange:t=>D("description",t.target.value),maxLength:500}),x.description&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:x.description})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"edit_notes",children:"Additional Notes"}),e.jsx(q,{id:"edit_notes",value:k.notes,onChange:t=>D("notes",t.target.value),rows:3,maxLength:1e3}),x.notes&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:x.notes})]})]}),e.jsxs(O,{className:"mt-6",children:[e.jsx(a,{type:"button",variant:"outline",onClick:()=>y(!1),disabled:Y,children:"Cancel"}),e.jsx(a,{type:"submit",disabled:Y,className:"bg-blue-600 hover:bg-blue-700",children:Y?"Updating...":"Update Debt"})]})]})]})}),e.jsx(E,{open:ie,onOpenChange:P,children:e.jsxs(R,{children:[e.jsxs(H,{children:[e.jsx(L,{children:"Edit Payment Record"}),e.jsx(M,{children:"Update the payment record details."})]}),e.jsx("div",{className:"rounded-lg border border-orange-200 bg-orange-50 p-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Outstanding Debt:"}),e.jsx("span",{className:"text-xl font-bold text-orange-600",children:n(s.outstanding_balance)})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Total Debt:"}),e.jsx("span",{className:"font-medium text-gray-900",children:n(s.total_debt)})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Paid So Far:"}),e.jsx("span",{className:"font-medium text-green-600",children:n(s.total_payments)})]})]})}),e.jsxs("form",{onSubmit:ve,children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs(r,{htmlFor:"edit_payment_amount",children:["Amount ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(o,{id:"edit_payment_amount",type:"number",step:"0.01",min:"0.01",value:$.amount_collected,onChange:t=>T("amount_collected",t.target.value),required:!0}),N.amount_collected&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:N.amount_collected})]}),e.jsxs("div",{children:[e.jsxs(r,{htmlFor:"edit_payment_date",children:["Payment Date ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(o,{id:"edit_payment_date",type:"date",value:$.payment_date,onChange:t=>T("payment_date",t.target.value),required:!0}),N.payment_date&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:N.payment_date})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"edit_payment_notes",children:"Notes"}),e.jsx(q,{id:"edit_payment_notes",value:$.notes,onChange:t=>T("notes",t.target.value),rows:3,maxLength:1e3}),N.notes&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:N.notes})]})]}),e.jsxs(O,{className:"mt-6",children:[e.jsx(a,{type:"button",variant:"outline",onClick:()=>P(!1),disabled:K,children:"Cancel"}),e.jsx(a,{type:"submit",disabled:K,className:"bg-blue-600 hover:bg-blue-700",children:K?"Updating...":"Update Payment"})]})]})]})})]})}),ce&&Z&&e.jsx(Ue,{payment:Z,customer:s,onClose:()=>{z(!1),B(null)}})]})}export{ct as default};
