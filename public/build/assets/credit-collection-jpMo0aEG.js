import{r as v,u as k,j as e}from"./app-C36bihvT.js";import{I as y}from"./InputError-B7Vw7TVM.js";import{B as E}from"./badge-Bpu2CsSb.js";import{c as M,F}from"./createLucideIcon-XfsHsazo.js";import{C as n,a as i,b as d,c as m}from"./card-BHrraKyP.js";import{D as V,b as q,c as P,d as Q}from"./dialog-RGyyvdl5.js";import{I as g}from"./index-DFXOyceB.js";import{L as p}from"./label-pihz-xdu.js";import{S as W,a as z,b as J,c as K,d as U}from"./select-D9Y5OSZY.js";import{T as _,a as S,b as r,c as t,d as T,e as a}from"./table-D_gRW9S0.js";import{A as X}from"./app-layout-GngZEOIY.js";import{T as w}from"./triangle-alert-CoEFQDxF.js";import"./index-BUfac13D.js";import"./index-B7v61762.js";import"./index-BuOrZ9W5.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],Z=M("Wallet",Y);function ue({credit_collections:x=[],outstanding_debts:h=[],customers:H=[]}){const[D,u]=v.useState(!1),[f,O]=v.useState(""),G=h.filter(s=>s.customer.toLowerCase().includes(f.toLowerCase())),{data:j,setData:c,post:A,processing:N,errors:o,reset:L}=k({customer_id:"",amount_collected:"",notes:""}),I=[{title:"Credit Collection",href:"/credit-collection"}];function B(s){c({customer_id:s.customer_id,amount_collected:"",notes:""}),u(!0)}function R(s){s.preventDefault(),A(route("credit-collection.store"),{onSuccess:()=>{L(),u(!1)},preserveScroll:!0})}const C=x.reduce((s,l)=>s+parseFloat(l.amount_collected),0),b=h.reduce((s,l)=>s+parseFloat(l.balance),0);return e.jsx(X,{breadcrumbs:I,children:e.jsxs("div",{className:"min-h-screen space-y-6 bg-gray-100 p-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("h1",{className:"text-3xl font-bold",children:"Credit Collection & Debt Management"})}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[e.jsxs(n,{children:[e.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(d,{className:"text-sm font-medium",children:"Collections Today"}),e.jsx(Z,{className:"h-4 w-4 text-green-600"})]}),e.jsxs(m,{children:[e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["GH₵",C.toFixed(2)]}),e.jsxs("p",{className:"text-muted-foreground text-xs",children:["From ",x.length," customers"]})]})]}),e.jsxs(n,{children:[e.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(d,{className:"text-sm font-medium",children:"Total Outstanding"}),e.jsx(w,{className:"h-4 w-4 text-orange-600"})]}),e.jsxs(m,{children:[e.jsxs("div",{className:"text-2xl font-bold text-orange-600",children:["GH₵",b.toFixed(2)]}),e.jsxs("p",{className:"text-muted-foreground text-xs",children:[h.length," customers"]})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:e.jsxs(n,{children:[e.jsx(i,{children:e.jsx(d,{children:"Amount Collected from Creditors Today"})}),e.jsx(m,{children:e.jsxs(_,{children:[e.jsx(S,{children:e.jsxs(r,{children:[e.jsx(t,{children:"Customer Name"}),e.jsx(t,{children:"Amount Collected"})]})}),e.jsxs(T,{children:[x.map((s,l)=>e.jsxs(r,{children:[e.jsx(a,{className:"font-medium",children:s.customer}),e.jsxs(a,{className:"font-medium text-green-600",children:["GH₵",parseFloat(s.amount_collected).toFixed(2)]})]},l)),e.jsxs(r,{className:"bg-green-50",children:[e.jsx(a,{className:"font-bold",children:"Total Collected"}),e.jsxs(a,{className:"font-bold text-green-600",children:["GH₵",C.toFixed(2)]})]})]})]})})]})}),e.jsxs(n,{children:[e.jsxs(i,{className:"flex flex-col space-y-4",children:[e.jsxs(d,{className:"flex items-center gap-2",children:[e.jsx(w,{className:"h-5 w-5 text-orange-600"}),"Outstanding Customer Debts"]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx(g,{placeholder:"Search customers...",value:f,onChange:s=>O(s.target.value),className:"max-w-sm"})})]}),e.jsx(m,{children:e.jsxs(_,{children:[e.jsx(S,{children:e.jsxs(r,{children:[e.jsx(t,{children:"Customer Name"}),e.jsx(t,{children:"Total Debt"}),e.jsx(t,{children:"Amount Paid"}),e.jsx(t,{children:"Outstanding Balance"}),e.jsx(t,{children:"Last Payment"}),e.jsx(t,{children:"Days Overdue"}),e.jsx(t,{children:"Status"}),e.jsx(t,{children:"Actions"})]})}),e.jsxs(T,{children:[G.map((s,l)=>e.jsxs(r,{children:[e.jsx(a,{className:"font-medium",children:s.customer}),e.jsxs(a,{children:["GH₵",parseFloat(s.total_debt).toFixed(2)]}),e.jsxs(a,{className:"text-green-600",children:["GH₵",parseFloat(s.amount_paid).toFixed(2)]}),e.jsxs(a,{className:"font-medium text-orange-600",children:["GH₵",parseFloat(s.balance).toFixed(2)]}),e.jsx(a,{children:s.last_payment}),e.jsxs(a,{className:s.days_overdue>14?"font-medium text-red-600":"text-orange-600",children:[s.days_overdue," days"]}),e.jsx(a,{children:e.jsx(E,{className:s.days_overdue>14?"bg-red-600 text-white hover:bg-red-700":"bg-orange-600 text-white hover:bg-orange-700",children:s.days_overdue>14?"Critical":"Overdue"})}),e.jsx(a,{children:e.jsx(F,{variant:"outline",size:"sm",onClick:()=>B(s),children:"Collect"})})]},l)),e.jsxs(r,{className:"bg-orange-50",children:[e.jsx(a,{colSpan:3,className:"font-bold",children:"Total Outstanding"}),e.jsxs(a,{className:"font-bold text-orange-600",children:["GH₵",b.toFixed(2)]}),e.jsx(a,{colSpan:4})]})]})]})})]}),e.jsx(V,{open:D,onOpenChange:u,children:e.jsxs(q,{className:"sm:max-w-[425px]",children:[e.jsx(P,{children:e.jsx(Q,{children:"Record Credit Collection"})}),e.jsxs("form",{onSubmit:R,className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(p,{htmlFor:"customer",className:"text-right",children:"Customer"}),e.jsxs(W,{value:j.customer_id,onValueChange:s=>c("customer_id",s),disabled:!0,children:[e.jsx(z,{className:"col-span-3",children:e.jsx(J,{placeholder:"Select customer"})}),e.jsx(K,{children:H.map(s=>e.jsx(U,{value:s.id,children:s.name},s.id))})]}),o.customer_id&&e.jsx(y,{message:o.customer_id,className:"mt-2"})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(p,{htmlFor:"amount",className:"text-right",children:"Amount (GH₵)"}),e.jsxs("div",{className:"col-span-3",children:[e.jsx(g,{id:"amount",type:"number",className:"w-full",placeholder:"0.00",value:j.amount_collected,onChange:s=>c("amount_collected",s.target.value),required:!0}),o.amount_collected&&e.jsx(y,{message:o.amount_collected,className:"mt-2"})]})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(p,{htmlFor:"notes",className:"text-right",children:"Notes"}),e.jsx("div",{className:"col-span-3",children:e.jsx(g,{id:"notes",placeholder:"Optional notes",value:j.notes,onChange:s=>c("notes",s.target.value)})})]}),e.jsx(F,{type:"submit",disabled:N,children:N?"Recording...":"Record Collection"})]})]})})]})})}export{ue as default};
