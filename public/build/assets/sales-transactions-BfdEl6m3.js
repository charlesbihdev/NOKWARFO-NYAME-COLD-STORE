import{r as ne,j as a,c as mr,a as Ia,L as Ra,u as Sg}from"./app-C91agm-K.js";import{c as Cg,F as ke}from"./createLucideIcon-BtIOmvPk.js";import{C as Nr,a as Sr,b as Cr,c as Ir}from"./card-bQtTgRYf.js";import{R as Ig,A as Rg}from"./app-layout-BryGhyHM.js";import{I as Eg}from"./InputError-Cg9yyB1m.js";import{D as Tg,b as jg,c as Lg,d as Og,f as Fg,X as La}from"./dialog-YapOZ0I2.js";import{I as pn}from"./input-WI2R0PGo.js";import{S as br,a as wr,b as yr,c as Ar,d as Dn}from"./select-DUxYnJOv.js";import{B as Ea}from"./badge-DErfEEMB.js";import{T as Dg,a as Pg,b as Ta,c as Ge,d as Wg,e as He}from"./table-BlXjy_ah.js";import{D as Bg}from"./DateRangePicker-B1zk98kA.js";import{P as Oa}from"./printer-BeRb2wPh.js";import"./index-DOYZj-e2.js";import"./index-EOS2E6TK.js";import"./index-C-sTOIjg.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mg=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],Ug=Cg("Search",Mg);function Gg({open:P,onClose:te,products:l,customers:Te,form:y,items:J,setItems:Y,amountPaid:U,setAmountPaid:Z,dueDate:Ae,setDueDate:je,paymentType:T,setPaymentType:Xe,runningTotal:G}){ne.useEffect(()=>{y.setData("items",J)},[J]),ne.useEffect(()=>{y.setData("amount_paid",U)},[U]),ne.useEffect(()=>{y.setData("due_date",Ae)},[Ae]),ne.useEffect(()=>{y.setData("payment_type",T)},[T]);const fe=m=>l.find(j=>String(j.id)===String(m))||null,_e=(m,j,de)=>{const ve=J.map((K,Qn)=>{if(Qn!==m)return K;let oe={...K,[j]:de};const St=fe(oe.product_id);if(!St)return oe;const Vn=St.lines_per_carton||1;let et=0;if(Vn>1){const Sn=parseInt(oe.cartons)||0,nt=parseInt(oe.lines)||0;et=Sn*Vn+nt;const tn=(parseFloat(oe.unit_selling_price)||0)/Vn;oe.qty=et,oe.total=(tn*et).toFixed(2)}else{const Sn=parseInt(oe.qty)||0,nt=parseFloat(oe.unit_selling_price)||0;oe.qty=Sn,oe.total=(nt*Sn).toFixed(2),oe.cartons=void 0,oe.lines=void 0}return oe});Y(ve)},ue=()=>{Y([...J,{product_id:"",qty:"",unit_selling_price:"",total:"",cartons:0,lines:0}])},Le=m=>{J.length!==1&&Y(J.filter((j,de)=>de!==m))},Je=m=>{Z(m),T==="partial"&&(parseFloat(m)<=0||parseFloat(m)>=G?y.setError("amount_paid","For partial payments, the amount paid must be greater than 0 and less than the total."):y.setError("amount_paid",void 0))},C=m=>{Xe(m),m==="credit"?(Z("0"),y.setError("amount_paid",void 0),y.data.customer_id||y.setData("customer_name","")):m==="cash"?(Z(G.toString()),y.setError("amount_paid",void 0)):m==="partial"&&(Z(""),y.setError("amount_paid",void 0),y.data.customer_id||y.setData("customer_name",""))};return a.jsx(Tg,{open:P,onOpenChange:te,children:a.jsxs(jg,{children:[a.jsx(Lg,{children:a.jsx(Og,{children:"Add Sales Transaction"})}),a.jsxs("form",{onSubmit:m=>{if(m.preventDefault(),T==="cash"&&parseFloat(U)!==G){y.setError("amount_paid","For cash payments, the amount paid must equal the total.");return}if(T==="credit"&&parseFloat(U)!==0){y.setError("amount_paid","For credit sales, the amount paid must be 0.");return}if(T==="partial"&&(parseFloat(U)<=0||parseFloat(U)>=G)){y.setError("amount_paid","For partial payments, the amount paid must be greater than 0 and less than the total.");return}y.post("/sales-transactions",{onSuccess:()=>te()})},className:"space-y-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"mb-1 block font-medium",children:["Transaction Date",a.jsx(pn,{type:"date",value:y.data.transaction_date,onChange:m=>y.setData("transaction_date",m.target.value),required:!0})]}),y.errors.transaction_date&&a.jsx("div",{className:"mt-1 text-xs text-red-500",children:y.errors.transaction_date})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"mb-1 block font-medium",children:["Customer ",(T==="credit"||T==="partial")&&a.jsx("span",{className:"text-red-500",children:"*"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(br,{value:y.data.customer_id?String(y.data.customer_id):"none",onValueChange:m=>{m==="none"?y.setData("customer_id",null):(y.setData("customer_id",m),y.setData("customer_name",""))},children:[a.jsx(wr,{className:T==="credit"||T==="partial"?"border-orange-500":"",children:a.jsx(yr,{placeholder:"Select customer"})}),a.jsxs(Ar,{children:[T==="cash"&&a.jsx(Dn,{value:"none",children:"-- No customer selected --"}),Te.map(m=>a.jsx(Dn,{value:String(m.id),children:m.name},m.id))]})]}),!y.data.customer_id&&T==="cash"&&a.jsx(pn,{type:"text",placeholder:"Or enter customer name",value:y.data.customer_name,onChange:m=>y.setData("customer_name",m.target.value)})]})]}),(T==="credit"||T==="partial")&&!y.data.customer_id&&a.jsx("div",{className:"mt-2 rounded-md bg-orange-50 p-3 border border-orange-200",children:a.jsxs("div",{className:"flex",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("svg",{className:"h-5 w-5 text-orange-400",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),a.jsxs("div",{className:"ml-3",children:[a.jsx("h3",{className:"text-sm font-medium text-orange-800",children:"Registered Customer Required"}),a.jsx("div",{className:"mt-1 text-xs text-orange-700",children:"Credit and partial sales require selecting a registered customer to track who owes money."})]})]})}),y.errors.customer_id&&a.jsx("div",{className:"mt-1 text-xs text-red-500",children:y.errors.customer_id})]}),a.jsxs("div",{children:[a.jsx("label",{className:"mb-1 block font-medium",children:"Items"}),a.jsxs("div",{className:"max-h-64 space-y-2 overflow-y-auto",children:[J.map((m,j)=>{const de=fe(m.product_id),ve=(de==null?void 0:de.lines_per_carton)||1;return a.jsxs("div",{className:"grid w-full grid-cols-4 items-end gap-2",children:[a.jsx("div",{className:"flex-1",children:a.jsxs(br,{value:m.product_id,onValueChange:K=>_e(j,"product_id",K),children:[a.jsx(wr,{children:a.jsx(yr,{placeholder:"Product"})}),a.jsx(Ar,{children:l.map(K=>a.jsx(Dn,{value:String(K.id),children:K.name},K.id))})]})}),ve>1?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"",children:a.jsx(pn,{type:"number",min:"0",placeholder:"Cartons",value:m.cartons||"",onChange:K=>_e(j,"cartons",K.target.value)})}),a.jsx("div",{className:"",children:a.jsxs(br,{value:m.lines!==void 0?String(m.lines):"",onValueChange:K=>_e(j,"lines",K),children:[a.jsx(wr,{children:a.jsx(yr,{placeholder:"Lines"})}),a.jsx(Ar,{children:[...Array(ve).keys()].map(K=>a.jsx(Dn,{value:String(K+1),children:K+1},K+1))})]})})]}):a.jsx("div",{className:"",children:a.jsx(pn,{type:"number",min:"1",placeholder:"Qty",value:m.qty||"",onChange:K=>_e(j,"qty",K.target.value)})}),a.jsx("div",{className:"",children:a.jsx(pn,{type:"number",min:"0",step:"0.01",placeholder:"Unit Price",value:m.unit_selling_price||"",onChange:K=>_e(j,"unit_selling_price",K.target.value)})}),a.jsx("div",{className:"",children:a.jsx(pn,{type:"number",min:"0",step:"0.01",placeholder:"Total",value:m.total||"",readOnly:!0})}),a.jsx(ke,{type:"button",variant:"destructive",size:"sm",className:"text-white",onClick:()=>Le(j),disabled:J.length===1,children:"Remove"})]},j)}),a.jsx(ke,{type:"button",variant:"outline",size:"sm",onClick:ue,children:"Add Item"})]}),y.errors.items&&a.jsx("div",{className:"mt-1 text-xs text-red-500",children:y.errors.items})]}),a.jsxs("div",{className:"text-lg font-bold",children:["Total: GH₵",G.toFixed(2)]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("label",{className:"mb-1 block font-medium",children:"Payment Type"}),a.jsxs(br,{value:T,onValueChange:C,children:[a.jsx(wr,{children:a.jsx(yr,{placeholder:"Select payment type"})}),a.jsxs(Ar,{children:[a.jsx(Dn,{value:"cash",children:"Cash"}),a.jsx(Dn,{value:"credit",children:"Credit"}),a.jsx(Dn,{value:"partial",children:"Partial"})]})]}),y.errors.payment_type&&a.jsx("div",{className:"mt-1 text-xs text-red-500",children:y.errors.payment_type})]}),a.jsxs("div",{className:"flex-1",children:[a.jsx("label",{className:"mb-1 block font-medium",children:"Amount Paid"}),a.jsx(pn,{type:"number",min:T==="partial"?1:0,max:T==="partial"?G-1:G,step:"0.01",value:U,onChange:m=>Je(m.target.value),disabled:T==="credit"||T==="cash"}),y.errors.amount_paid&&a.jsx(Eg,{message:y.errors.amount_paid,className:"mt-2"})]}),T!=="cash"&&a.jsxs("div",{className:"flex-1",children:[a.jsx("label",{className:"mb-1 block font-medium",children:"Due Date"}),a.jsx(pn,{type:"date",value:Ae,onChange:m=>je(m.target.value)}),y.errors.due_date&&a.jsx("div",{className:"mt-1 text-xs text-red-500",children:y.errors.due_date})]})]}),a.jsxs(Fg,{children:[a.jsx(ke,{type:"button",variant:"secondary",onClick:te,children:"Cancel"}),a.jsx(ke,{type:"submit",children:y.processing?"Saving..":"Save"})]})]})]})})}var Nt={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var Hg=Nt.exports,ja;function qg(){return ja||(ja=1,(function(P,te){(function(){var l,Te="4.17.21",y=200,J="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",Y="Expected a function",U="Invalid `variable` option passed into `_.template`",Z="__lodash_hash_undefined__",Ae=500,je="__lodash_placeholder__",T=1,Xe=2,G=4,fe=1,_e=2,ue=1,Le=2,Je=4,C=8,m=16,j=32,de=64,ve=128,K=256,Qn=512,oe=30,St="...",Vn=800,et=16,Sn=1,nt=2,ki=3,tn=1/0,gn=9007199254740991,Fa=17976931348623157e292,Ct=NaN,Qe=4294967295,Da=Qe-1,Pa=Qe>>>1,Wa=[["ary",ve],["bind",ue],["bindKey",Le],["curry",C],["curryRight",m],["flip",Qn],["partial",j],["partialRight",de],["rearg",K]],Pn="[object Arguments]",It="[object Array]",Ba="[object AsyncFunction]",tt="[object Boolean]",rt="[object Date]",Ma="[object DOMException]",Rt="[object Error]",Et="[object Function]",Xi="[object GeneratorFunction]",qe="[object Map]",it="[object Number]",Ua="[object Null]",rn="[object Object]",Ji="[object Promise]",Ga="[object Proxy]",st="[object RegExp]",Ke="[object Set]",ut="[object String]",Tt="[object Symbol]",Ha="[object Undefined]",at="[object WeakMap]",qa="[object WeakSet]",lt="[object ArrayBuffer]",Wn="[object DataView]",Rr="[object Float32Array]",Er="[object Float64Array]",Tr="[object Int8Array]",jr="[object Int16Array]",Lr="[object Int32Array]",Or="[object Uint8Array]",Fr="[object Uint8ClampedArray]",Dr="[object Uint16Array]",Pr="[object Uint32Array]",Ka=/\b__p \+= '';/g,za=/\b(__p \+=) '' \+/g,$a=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Qi=/&(?:amp|lt|gt|quot|#39);/g,Vi=/[&<>"']/g,Ya=RegExp(Qi.source),Za=RegExp(Vi.source),ka=/<%-([\s\S]+?)%>/g,Xa=/<%([\s\S]+?)%>/g,es=/<%=([\s\S]+?)%>/g,Ja=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Qa=/^\w*$/,Va=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Wr=/[\\^$.*+?()[\]{}|]/g,el=RegExp(Wr.source),Br=/^\s+/,nl=/\s/,tl=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,rl=/\{\n\/\* \[wrapped with (.+)\] \*/,il=/,? & /,sl=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ul=/[()=,{}\[\]\/\s]/,al=/\\(\\)?/g,ll=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ns=/\w*$/,fl=/^[-+]0x[0-9a-f]+$/i,ol=/^0b[01]+$/i,cl=/^\[object .+?Constructor\]$/,hl=/^0o[0-7]+$/i,dl=/^(?:0|[1-9]\d*)$/,pl=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,jt=/($^)/,gl=/['\n\r\u2028\u2029\\]/g,Lt="\\ud800-\\udfff",xl="\\u0300-\\u036f",_l="\\ufe20-\\ufe2f",vl="\\u20d0-\\u20ff",ts=xl+_l+vl,rs="\\u2700-\\u27bf",is="a-z\\xdf-\\xf6\\xf8-\\xff",ml="\\xac\\xb1\\xd7\\xf7",bl="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",wl="\\u2000-\\u206f",yl=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ss="A-Z\\xc0-\\xd6\\xd8-\\xde",us="\\ufe0e\\ufe0f",as=ml+bl+wl+yl,Mr="['’]",Al="["+Lt+"]",ls="["+as+"]",Ot="["+ts+"]",fs="\\d+",Nl="["+rs+"]",os="["+is+"]",cs="[^"+Lt+as+fs+rs+is+ss+"]",Ur="\\ud83c[\\udffb-\\udfff]",Sl="(?:"+Ot+"|"+Ur+")",hs="[^"+Lt+"]",Gr="(?:\\ud83c[\\udde6-\\uddff]){2}",Hr="[\\ud800-\\udbff][\\udc00-\\udfff]",Bn="["+ss+"]",ds="\\u200d",ps="(?:"+os+"|"+cs+")",Cl="(?:"+Bn+"|"+cs+")",gs="(?:"+Mr+"(?:d|ll|m|re|s|t|ve))?",xs="(?:"+Mr+"(?:D|LL|M|RE|S|T|VE))?",_s=Sl+"?",vs="["+us+"]?",Il="(?:"+ds+"(?:"+[hs,Gr,Hr].join("|")+")"+vs+_s+")*",Rl="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",El="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",ms=vs+_s+Il,Tl="(?:"+[Nl,Gr,Hr].join("|")+")"+ms,jl="(?:"+[hs+Ot+"?",Ot,Gr,Hr,Al].join("|")+")",Ll=RegExp(Mr,"g"),Ol=RegExp(Ot,"g"),qr=RegExp(Ur+"(?="+Ur+")|"+jl+ms,"g"),Fl=RegExp([Bn+"?"+os+"+"+gs+"(?="+[ls,Bn,"$"].join("|")+")",Cl+"+"+xs+"(?="+[ls,Bn+ps,"$"].join("|")+")",Bn+"?"+ps+"+"+gs,Bn+"+"+xs,El,Rl,fs,Tl].join("|"),"g"),Dl=RegExp("["+ds+Lt+ts+us+"]"),Pl=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Wl=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Bl=-1,$={};$[Rr]=$[Er]=$[Tr]=$[jr]=$[Lr]=$[Or]=$[Fr]=$[Dr]=$[Pr]=!0,$[Pn]=$[It]=$[lt]=$[tt]=$[Wn]=$[rt]=$[Rt]=$[Et]=$[qe]=$[it]=$[rn]=$[st]=$[Ke]=$[ut]=$[at]=!1;var z={};z[Pn]=z[It]=z[lt]=z[Wn]=z[tt]=z[rt]=z[Rr]=z[Er]=z[Tr]=z[jr]=z[Lr]=z[qe]=z[it]=z[rn]=z[st]=z[Ke]=z[ut]=z[Tt]=z[Or]=z[Fr]=z[Dr]=z[Pr]=!0,z[Rt]=z[Et]=z[at]=!1;var Ml={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},Ul={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Gl={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Hl={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ql=parseFloat,Kl=parseInt,bs=typeof mr=="object"&&mr&&mr.Object===Object&&mr,zl=typeof self=="object"&&self&&self.Object===Object&&self,ae=bs||zl||Function("return this")(),Kr=te&&!te.nodeType&&te,Cn=Kr&&!0&&P&&!P.nodeType&&P,ws=Cn&&Cn.exports===Kr,zr=ws&&bs.process,Oe=(function(){try{var c=Cn&&Cn.require&&Cn.require("util").types;return c||zr&&zr.binding&&zr.binding("util")}catch{}})(),ys=Oe&&Oe.isArrayBuffer,As=Oe&&Oe.isDate,Ns=Oe&&Oe.isMap,Ss=Oe&&Oe.isRegExp,Cs=Oe&&Oe.isSet,Is=Oe&&Oe.isTypedArray;function Ne(c,p,d){switch(d.length){case 0:return c.call(p);case 1:return c.call(p,d[0]);case 2:return c.call(p,d[0],d[1]);case 3:return c.call(p,d[0],d[1],d[2])}return c.apply(p,d)}function $l(c,p,d,b){for(var I=-1,B=c==null?0:c.length;++I<B;){var re=c[I];p(b,re,d(re),c)}return b}function Fe(c,p){for(var d=-1,b=c==null?0:c.length;++d<b&&p(c[d],d,c)!==!1;);return c}function Yl(c,p){for(var d=c==null?0:c.length;d--&&p(c[d],d,c)!==!1;);return c}function Rs(c,p){for(var d=-1,b=c==null?0:c.length;++d<b;)if(!p(c[d],d,c))return!1;return!0}function xn(c,p){for(var d=-1,b=c==null?0:c.length,I=0,B=[];++d<b;){var re=c[d];p(re,d,c)&&(B[I++]=re)}return B}function Ft(c,p){var d=c==null?0:c.length;return!!d&&Mn(c,p,0)>-1}function $r(c,p,d){for(var b=-1,I=c==null?0:c.length;++b<I;)if(d(p,c[b]))return!0;return!1}function k(c,p){for(var d=-1,b=c==null?0:c.length,I=Array(b);++d<b;)I[d]=p(c[d],d,c);return I}function _n(c,p){for(var d=-1,b=p.length,I=c.length;++d<b;)c[I+d]=p[d];return c}function Yr(c,p,d,b){var I=-1,B=c==null?0:c.length;for(b&&B&&(d=c[++I]);++I<B;)d=p(d,c[I],I,c);return d}function Zl(c,p,d,b){var I=c==null?0:c.length;for(b&&I&&(d=c[--I]);I--;)d=p(d,c[I],I,c);return d}function Zr(c,p){for(var d=-1,b=c==null?0:c.length;++d<b;)if(p(c[d],d,c))return!0;return!1}var kl=kr("length");function Xl(c){return c.split("")}function Jl(c){return c.match(sl)||[]}function Es(c,p,d){var b;return d(c,function(I,B,re){if(p(I,B,re))return b=B,!1}),b}function Dt(c,p,d,b){for(var I=c.length,B=d+(b?1:-1);b?B--:++B<I;)if(p(c[B],B,c))return B;return-1}function Mn(c,p,d){return p===p?of(c,p,d):Dt(c,Ts,d)}function Ql(c,p,d,b){for(var I=d-1,B=c.length;++I<B;)if(b(c[I],p))return I;return-1}function Ts(c){return c!==c}function js(c,p){var d=c==null?0:c.length;return d?Jr(c,p)/d:Ct}function kr(c){return function(p){return p==null?l:p[c]}}function Xr(c){return function(p){return c==null?l:c[p]}}function Ls(c,p,d,b,I){return I(c,function(B,re,q){d=b?(b=!1,B):p(d,B,re,q)}),d}function Vl(c,p){var d=c.length;for(c.sort(p);d--;)c[d]=c[d].value;return c}function Jr(c,p){for(var d,b=-1,I=c.length;++b<I;){var B=p(c[b]);B!==l&&(d=d===l?B:d+B)}return d}function Qr(c,p){for(var d=-1,b=Array(c);++d<c;)b[d]=p(d);return b}function ef(c,p){return k(p,function(d){return[d,c[d]]})}function Os(c){return c&&c.slice(0,Ws(c)+1).replace(Br,"")}function Se(c){return function(p){return c(p)}}function Vr(c,p){return k(p,function(d){return c[d]})}function ft(c,p){return c.has(p)}function Fs(c,p){for(var d=-1,b=c.length;++d<b&&Mn(p,c[d],0)>-1;);return d}function Ds(c,p){for(var d=c.length;d--&&Mn(p,c[d],0)>-1;);return d}function nf(c,p){for(var d=c.length,b=0;d--;)c[d]===p&&++b;return b}var tf=Xr(Ml),rf=Xr(Ul);function sf(c){return"\\"+Hl[c]}function uf(c,p){return c==null?l:c[p]}function Un(c){return Dl.test(c)}function af(c){return Pl.test(c)}function lf(c){for(var p,d=[];!(p=c.next()).done;)d.push(p.value);return d}function ei(c){var p=-1,d=Array(c.size);return c.forEach(function(b,I){d[++p]=[I,b]}),d}function Ps(c,p){return function(d){return c(p(d))}}function vn(c,p){for(var d=-1,b=c.length,I=0,B=[];++d<b;){var re=c[d];(re===p||re===je)&&(c[d]=je,B[I++]=d)}return B}function Pt(c){var p=-1,d=Array(c.size);return c.forEach(function(b){d[++p]=b}),d}function ff(c){var p=-1,d=Array(c.size);return c.forEach(function(b){d[++p]=[b,b]}),d}function of(c,p,d){for(var b=d-1,I=c.length;++b<I;)if(c[b]===p)return b;return-1}function cf(c,p,d){for(var b=d+1;b--;)if(c[b]===p)return b;return b}function Gn(c){return Un(c)?df(c):kl(c)}function ze(c){return Un(c)?pf(c):Xl(c)}function Ws(c){for(var p=c.length;p--&&nl.test(c.charAt(p)););return p}var hf=Xr(Gl);function df(c){for(var p=qr.lastIndex=0;qr.test(c);)++p;return p}function pf(c){return c.match(qr)||[]}function gf(c){return c.match(Fl)||[]}var xf=(function c(p){p=p==null?ae:Hn.defaults(ae.Object(),p,Hn.pick(ae,Wl));var d=p.Array,b=p.Date,I=p.Error,B=p.Function,re=p.Math,q=p.Object,ni=p.RegExp,_f=p.String,De=p.TypeError,Wt=d.prototype,vf=B.prototype,qn=q.prototype,Bt=p["__core-js_shared__"],Mt=vf.toString,H=qn.hasOwnProperty,mf=0,Bs=(function(){var e=/[^.]+$/.exec(Bt&&Bt.keys&&Bt.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""})(),Ut=qn.toString,bf=Mt.call(q),wf=ae._,yf=ni("^"+Mt.call(H).replace(Wr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Gt=ws?p.Buffer:l,mn=p.Symbol,Ht=p.Uint8Array,Ms=Gt?Gt.allocUnsafe:l,qt=Ps(q.getPrototypeOf,q),Us=q.create,Gs=qn.propertyIsEnumerable,Kt=Wt.splice,Hs=mn?mn.isConcatSpreadable:l,ot=mn?mn.iterator:l,In=mn?mn.toStringTag:l,zt=(function(){try{var e=Ln(q,"defineProperty");return e({},"",{}),e}catch{}})(),Af=p.clearTimeout!==ae.clearTimeout&&p.clearTimeout,Nf=b&&b.now!==ae.Date.now&&b.now,Sf=p.setTimeout!==ae.setTimeout&&p.setTimeout,$t=re.ceil,Yt=re.floor,ti=q.getOwnPropertySymbols,Cf=Gt?Gt.isBuffer:l,qs=p.isFinite,If=Wt.join,Rf=Ps(q.keys,q),ie=re.max,ce=re.min,Ef=b.now,Tf=p.parseInt,Ks=re.random,jf=Wt.reverse,ri=Ln(p,"DataView"),ct=Ln(p,"Map"),ii=Ln(p,"Promise"),Kn=Ln(p,"Set"),ht=Ln(p,"WeakMap"),dt=Ln(q,"create"),Zt=ht&&new ht,zn={},Lf=On(ri),Of=On(ct),Ff=On(ii),Df=On(Kn),Pf=On(ht),kt=mn?mn.prototype:l,pt=kt?kt.valueOf:l,zs=kt?kt.toString:l;function s(e){if(Q(e)&&!R(e)&&!(e instanceof D)){if(e instanceof Pe)return e;if(H.call(e,"__wrapped__"))return $u(e)}return new Pe(e)}var $n=(function(){function e(){}return function(n){if(!X(n))return{};if(Us)return Us(n);e.prototype=n;var t=new e;return e.prototype=l,t}})();function Xt(){}function Pe(e,n){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!n,this.__index__=0,this.__values__=l}s.templateSettings={escape:ka,evaluate:Xa,interpolate:es,variable:"",imports:{_:s}},s.prototype=Xt.prototype,s.prototype.constructor=s,Pe.prototype=$n(Xt.prototype),Pe.prototype.constructor=Pe;function D(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Qe,this.__views__=[]}function Wf(){var e=new D(this.__wrapped__);return e.__actions__=me(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=me(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=me(this.__views__),e}function Bf(){if(this.__filtered__){var e=new D(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function Mf(){var e=this.__wrapped__.value(),n=this.__dir__,t=R(e),r=n<0,i=t?e.length:0,u=Qo(0,i,this.__views__),f=u.start,o=u.end,h=o-f,g=r?o:f-1,x=this.__iteratees__,_=x.length,v=0,w=ce(h,this.__takeCount__);if(!t||!r&&i==h&&w==h)return gu(e,this.__actions__);var N=[];e:for(;h--&&v<w;){g+=n;for(var L=-1,S=e[g];++L<_;){var F=x[L],W=F.iteratee,Re=F.type,xe=W(S);if(Re==nt)S=xe;else if(!xe){if(Re==Sn)continue e;break e}}N[v++]=S}return N}D.prototype=$n(Xt.prototype),D.prototype.constructor=D;function Rn(e){var n=-1,t=e==null?0:e.length;for(this.clear();++n<t;){var r=e[n];this.set(r[0],r[1])}}function Uf(){this.__data__=dt?dt(null):{},this.size=0}function Gf(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n}function Hf(e){var n=this.__data__;if(dt){var t=n[e];return t===Z?l:t}return H.call(n,e)?n[e]:l}function qf(e){var n=this.__data__;return dt?n[e]!==l:H.call(n,e)}function Kf(e,n){var t=this.__data__;return this.size+=this.has(e)?0:1,t[e]=dt&&n===l?Z:n,this}Rn.prototype.clear=Uf,Rn.prototype.delete=Gf,Rn.prototype.get=Hf,Rn.prototype.has=qf,Rn.prototype.set=Kf;function sn(e){var n=-1,t=e==null?0:e.length;for(this.clear();++n<t;){var r=e[n];this.set(r[0],r[1])}}function zf(){this.__data__=[],this.size=0}function $f(e){var n=this.__data__,t=Jt(n,e);if(t<0)return!1;var r=n.length-1;return t==r?n.pop():Kt.call(n,t,1),--this.size,!0}function Yf(e){var n=this.__data__,t=Jt(n,e);return t<0?l:n[t][1]}function Zf(e){return Jt(this.__data__,e)>-1}function kf(e,n){var t=this.__data__,r=Jt(t,e);return r<0?(++this.size,t.push([e,n])):t[r][1]=n,this}sn.prototype.clear=zf,sn.prototype.delete=$f,sn.prototype.get=Yf,sn.prototype.has=Zf,sn.prototype.set=kf;function un(e){var n=-1,t=e==null?0:e.length;for(this.clear();++n<t;){var r=e[n];this.set(r[0],r[1])}}function Xf(){this.size=0,this.__data__={hash:new Rn,map:new(ct||sn),string:new Rn}}function Jf(e){var n=fr(this,e).delete(e);return this.size-=n?1:0,n}function Qf(e){return fr(this,e).get(e)}function Vf(e){return fr(this,e).has(e)}function eo(e,n){var t=fr(this,e),r=t.size;return t.set(e,n),this.size+=t.size==r?0:1,this}un.prototype.clear=Xf,un.prototype.delete=Jf,un.prototype.get=Qf,un.prototype.has=Vf,un.prototype.set=eo;function En(e){var n=-1,t=e==null?0:e.length;for(this.__data__=new un;++n<t;)this.add(e[n])}function no(e){return this.__data__.set(e,Z),this}function to(e){return this.__data__.has(e)}En.prototype.add=En.prototype.push=no,En.prototype.has=to;function $e(e){var n=this.__data__=new sn(e);this.size=n.size}function ro(){this.__data__=new sn,this.size=0}function io(e){var n=this.__data__,t=n.delete(e);return this.size=n.size,t}function so(e){return this.__data__.get(e)}function uo(e){return this.__data__.has(e)}function ao(e,n){var t=this.__data__;if(t instanceof sn){var r=t.__data__;if(!ct||r.length<y-1)return r.push([e,n]),this.size=++t.size,this;t=this.__data__=new un(r)}return t.set(e,n),this.size=t.size,this}$e.prototype.clear=ro,$e.prototype.delete=io,$e.prototype.get=so,$e.prototype.has=uo,$e.prototype.set=ao;function $s(e,n){var t=R(e),r=!t&&Fn(e),i=!t&&!r&&Nn(e),u=!t&&!r&&!i&&Xn(e),f=t||r||i||u,o=f?Qr(e.length,_f):[],h=o.length;for(var g in e)(n||H.call(e,g))&&!(f&&(g=="length"||i&&(g=="offset"||g=="parent")||u&&(g=="buffer"||g=="byteLength"||g=="byteOffset")||on(g,h)))&&o.push(g);return o}function Ys(e){var n=e.length;return n?e[gi(0,n-1)]:l}function lo(e,n){return or(me(e),Tn(n,0,e.length))}function fo(e){return or(me(e))}function si(e,n,t){(t!==l&&!Ye(e[n],t)||t===l&&!(n in e))&&an(e,n,t)}function gt(e,n,t){var r=e[n];(!(H.call(e,n)&&Ye(r,t))||t===l&&!(n in e))&&an(e,n,t)}function Jt(e,n){for(var t=e.length;t--;)if(Ye(e[t][0],n))return t;return-1}function oo(e,n,t,r){return bn(e,function(i,u,f){n(r,i,t(i),f)}),r}function Zs(e,n){return e&&en(n,se(n),e)}function co(e,n){return e&&en(n,we(n),e)}function an(e,n,t){n=="__proto__"&&zt?zt(e,n,{configurable:!0,enumerable:!0,value:t,writable:!0}):e[n]=t}function ui(e,n){for(var t=-1,r=n.length,i=d(r),u=e==null;++t<r;)i[t]=u?l:Ui(e,n[t]);return i}function Tn(e,n,t){return e===e&&(t!==l&&(e=e<=t?e:t),n!==l&&(e=e>=n?e:n)),e}function We(e,n,t,r,i,u){var f,o=n&T,h=n&Xe,g=n&G;if(t&&(f=i?t(e,r,i,u):t(e)),f!==l)return f;if(!X(e))return e;var x=R(e);if(x){if(f=ec(e),!o)return me(e,f)}else{var _=he(e),v=_==Et||_==Xi;if(Nn(e))return vu(e,o);if(_==rn||_==Pn||v&&!i){if(f=h||v?{}:Wu(e),!o)return h?qo(e,co(f,e)):Ho(e,Zs(f,e))}else{if(!z[_])return i?e:{};f=nc(e,_,o)}}u||(u=new $e);var w=u.get(e);if(w)return w;u.set(e,f),ha(e)?e.forEach(function(S){f.add(We(S,n,t,S,e,u))}):oa(e)&&e.forEach(function(S,F){f.set(F,We(S,n,t,F,e,u))});var N=g?h?Ci:Si:h?we:se,L=x?l:N(e);return Fe(L||e,function(S,F){L&&(F=S,S=e[F]),gt(f,F,We(S,n,t,F,e,u))}),f}function ho(e){var n=se(e);return function(t){return ks(t,e,n)}}function ks(e,n,t){var r=t.length;if(e==null)return!r;for(e=q(e);r--;){var i=t[r],u=n[i],f=e[i];if(f===l&&!(i in e)||!u(f))return!1}return!0}function Xs(e,n,t){if(typeof e!="function")throw new De(Y);return yt(function(){e.apply(l,t)},n)}function xt(e,n,t,r){var i=-1,u=Ft,f=!0,o=e.length,h=[],g=n.length;if(!o)return h;t&&(n=k(n,Se(t))),r?(u=$r,f=!1):n.length>=y&&(u=ft,f=!1,n=new En(n));e:for(;++i<o;){var x=e[i],_=t==null?x:t(x);if(x=r||x!==0?x:0,f&&_===_){for(var v=g;v--;)if(n[v]===_)continue e;h.push(x)}else u(n,_,r)||h.push(x)}return h}var bn=Au(Ve),Js=Au(li,!0);function po(e,n){var t=!0;return bn(e,function(r,i,u){return t=!!n(r,i,u),t}),t}function Qt(e,n,t){for(var r=-1,i=e.length;++r<i;){var u=e[r],f=n(u);if(f!=null&&(o===l?f===f&&!Ie(f):t(f,o)))var o=f,h=u}return h}function go(e,n,t,r){var i=e.length;for(t=E(t),t<0&&(t=-t>i?0:i+t),r=r===l||r>i?i:E(r),r<0&&(r+=i),r=t>r?0:pa(r);t<r;)e[t++]=n;return e}function Qs(e,n){var t=[];return bn(e,function(r,i,u){n(r,i,u)&&t.push(r)}),t}function le(e,n,t,r,i){var u=-1,f=e.length;for(t||(t=rc),i||(i=[]);++u<f;){var o=e[u];n>0&&t(o)?n>1?le(o,n-1,t,r,i):_n(i,o):r||(i[i.length]=o)}return i}var ai=Nu(),Vs=Nu(!0);function Ve(e,n){return e&&ai(e,n,se)}function li(e,n){return e&&Vs(e,n,se)}function Vt(e,n){return xn(n,function(t){return cn(e[t])})}function jn(e,n){n=yn(n,e);for(var t=0,r=n.length;e!=null&&t<r;)e=e[nn(n[t++])];return t&&t==r?e:l}function eu(e,n,t){var r=n(e);return R(e)?r:_n(r,t(e))}function pe(e){return e==null?e===l?Ha:Ua:In&&In in q(e)?Jo(e):oc(e)}function fi(e,n){return e>n}function xo(e,n){return e!=null&&H.call(e,n)}function _o(e,n){return e!=null&&n in q(e)}function vo(e,n,t){return e>=ce(n,t)&&e<ie(n,t)}function oi(e,n,t){for(var r=t?$r:Ft,i=e[0].length,u=e.length,f=u,o=d(u),h=1/0,g=[];f--;){var x=e[f];f&&n&&(x=k(x,Se(n))),h=ce(x.length,h),o[f]=!t&&(n||i>=120&&x.length>=120)?new En(f&&x):l}x=e[0];var _=-1,v=o[0];e:for(;++_<i&&g.length<h;){var w=x[_],N=n?n(w):w;if(w=t||w!==0?w:0,!(v?ft(v,N):r(g,N,t))){for(f=u;--f;){var L=o[f];if(!(L?ft(L,N):r(e[f],N,t)))continue e}v&&v.push(N),g.push(w)}}return g}function mo(e,n,t,r){return Ve(e,function(i,u,f){n(r,t(i),u,f)}),r}function _t(e,n,t){n=yn(n,e),e=Gu(e,n);var r=e==null?e:e[nn(Me(n))];return r==null?l:Ne(r,e,t)}function nu(e){return Q(e)&&pe(e)==Pn}function bo(e){return Q(e)&&pe(e)==lt}function wo(e){return Q(e)&&pe(e)==rt}function vt(e,n,t,r,i){return e===n?!0:e==null||n==null||!Q(e)&&!Q(n)?e!==e&&n!==n:yo(e,n,t,r,vt,i)}function yo(e,n,t,r,i,u){var f=R(e),o=R(n),h=f?It:he(e),g=o?It:he(n);h=h==Pn?rn:h,g=g==Pn?rn:g;var x=h==rn,_=g==rn,v=h==g;if(v&&Nn(e)){if(!Nn(n))return!1;f=!0,x=!1}if(v&&!x)return u||(u=new $e),f||Xn(e)?Fu(e,n,t,r,i,u):ko(e,n,h,t,r,i,u);if(!(t&fe)){var w=x&&H.call(e,"__wrapped__"),N=_&&H.call(n,"__wrapped__");if(w||N){var L=w?e.value():e,S=N?n.value():n;return u||(u=new $e),i(L,S,t,r,u)}}return v?(u||(u=new $e),Xo(e,n,t,r,i,u)):!1}function Ao(e){return Q(e)&&he(e)==qe}function ci(e,n,t,r){var i=t.length,u=i,f=!r;if(e==null)return!u;for(e=q(e);i--;){var o=t[i];if(f&&o[2]?o[1]!==e[o[0]]:!(o[0]in e))return!1}for(;++i<u;){o=t[i];var h=o[0],g=e[h],x=o[1];if(f&&o[2]){if(g===l&&!(h in e))return!1}else{var _=new $e;if(r)var v=r(g,x,h,e,n,_);if(!(v===l?vt(x,g,fe|_e,r,_):v))return!1}}return!0}function tu(e){if(!X(e)||sc(e))return!1;var n=cn(e)?yf:cl;return n.test(On(e))}function No(e){return Q(e)&&pe(e)==st}function So(e){return Q(e)&&he(e)==Ke}function Co(e){return Q(e)&&xr(e.length)&&!!$[pe(e)]}function ru(e){return typeof e=="function"?e:e==null?ye:typeof e=="object"?R(e)?uu(e[0],e[1]):su(e):Sa(e)}function hi(e){if(!wt(e))return Rf(e);var n=[];for(var t in q(e))H.call(e,t)&&t!="constructor"&&n.push(t);return n}function Io(e){if(!X(e))return fc(e);var n=wt(e),t=[];for(var r in e)r=="constructor"&&(n||!H.call(e,r))||t.push(r);return t}function di(e,n){return e<n}function iu(e,n){var t=-1,r=be(e)?d(e.length):[];return bn(e,function(i,u,f){r[++t]=n(i,u,f)}),r}function su(e){var n=Ri(e);return n.length==1&&n[0][2]?Mu(n[0][0],n[0][1]):function(t){return t===e||ci(t,e,n)}}function uu(e,n){return Ti(e)&&Bu(n)?Mu(nn(e),n):function(t){var r=Ui(t,e);return r===l&&r===n?Gi(t,e):vt(n,r,fe|_e)}}function er(e,n,t,r,i){e!==n&&ai(n,function(u,f){if(i||(i=new $e),X(u))Ro(e,n,f,t,er,r,i);else{var o=r?r(Li(e,f),u,f+"",e,n,i):l;o===l&&(o=u),si(e,f,o)}},we)}function Ro(e,n,t,r,i,u,f){var o=Li(e,t),h=Li(n,t),g=f.get(h);if(g){si(e,t,g);return}var x=u?u(o,h,t+"",e,n,f):l,_=x===l;if(_){var v=R(h),w=!v&&Nn(h),N=!v&&!w&&Xn(h);x=h,v||w||N?R(o)?x=o:V(o)?x=me(o):w?(_=!1,x=vu(h,!0)):N?(_=!1,x=mu(h,!0)):x=[]:At(h)||Fn(h)?(x=o,Fn(o)?x=ga(o):(!X(o)||cn(o))&&(x=Wu(h))):_=!1}_&&(f.set(h,x),i(x,h,r,u,f),f.delete(h)),si(e,t,x)}function au(e,n){var t=e.length;if(t)return n+=n<0?t:0,on(n,t)?e[n]:l}function lu(e,n,t){n.length?n=k(n,function(u){return R(u)?function(f){return jn(f,u.length===1?u[0]:u)}:u}):n=[ye];var r=-1;n=k(n,Se(A()));var i=iu(e,function(u,f,o){var h=k(n,function(g){return g(u)});return{criteria:h,index:++r,value:u}});return Vl(i,function(u,f){return Go(u,f,t)})}function Eo(e,n){return fu(e,n,function(t,r){return Gi(e,r)})}function fu(e,n,t){for(var r=-1,i=n.length,u={};++r<i;){var f=n[r],o=jn(e,f);t(o,f)&&mt(u,yn(f,e),o)}return u}function To(e){return function(n){return jn(n,e)}}function pi(e,n,t,r){var i=r?Ql:Mn,u=-1,f=n.length,o=e;for(e===n&&(n=me(n)),t&&(o=k(e,Se(t)));++u<f;)for(var h=0,g=n[u],x=t?t(g):g;(h=i(o,x,h,r))>-1;)o!==e&&Kt.call(o,h,1),Kt.call(e,h,1);return e}function ou(e,n){for(var t=e?n.length:0,r=t-1;t--;){var i=n[t];if(t==r||i!==u){var u=i;on(i)?Kt.call(e,i,1):vi(e,i)}}return e}function gi(e,n){return e+Yt(Ks()*(n-e+1))}function jo(e,n,t,r){for(var i=-1,u=ie($t((n-e)/(t||1)),0),f=d(u);u--;)f[r?u:++i]=e,e+=t;return f}function xi(e,n){var t="";if(!e||n<1||n>gn)return t;do n%2&&(t+=e),n=Yt(n/2),n&&(e+=e);while(n);return t}function O(e,n){return Oi(Uu(e,n,ye),e+"")}function Lo(e){return Ys(Jn(e))}function Oo(e,n){var t=Jn(e);return or(t,Tn(n,0,t.length))}function mt(e,n,t,r){if(!X(e))return e;n=yn(n,e);for(var i=-1,u=n.length,f=u-1,o=e;o!=null&&++i<u;){var h=nn(n[i]),g=t;if(h==="__proto__"||h==="constructor"||h==="prototype")return e;if(i!=f){var x=o[h];g=r?r(x,h,o):l,g===l&&(g=X(x)?x:on(n[i+1])?[]:{})}gt(o,h,g),o=o[h]}return e}var cu=Zt?function(e,n){return Zt.set(e,n),e}:ye,Fo=zt?function(e,n){return zt(e,"toString",{configurable:!0,enumerable:!1,value:qi(n),writable:!0})}:ye;function Do(e){return or(Jn(e))}function Be(e,n,t){var r=-1,i=e.length;n<0&&(n=-n>i?0:i+n),t=t>i?i:t,t<0&&(t+=i),i=n>t?0:t-n>>>0,n>>>=0;for(var u=d(i);++r<i;)u[r]=e[r+n];return u}function Po(e,n){var t;return bn(e,function(r,i,u){return t=n(r,i,u),!t}),!!t}function nr(e,n,t){var r=0,i=e==null?r:e.length;if(typeof n=="number"&&n===n&&i<=Pa){for(;r<i;){var u=r+i>>>1,f=e[u];f!==null&&!Ie(f)&&(t?f<=n:f<n)?r=u+1:i=u}return i}return _i(e,n,ye,t)}function _i(e,n,t,r){var i=0,u=e==null?0:e.length;if(u===0)return 0;n=t(n);for(var f=n!==n,o=n===null,h=Ie(n),g=n===l;i<u;){var x=Yt((i+u)/2),_=t(e[x]),v=_!==l,w=_===null,N=_===_,L=Ie(_);if(f)var S=r||N;else g?S=N&&(r||v):o?S=N&&v&&(r||!w):h?S=N&&v&&!w&&(r||!L):w||L?S=!1:S=r?_<=n:_<n;S?i=x+1:u=x}return ce(u,Da)}function hu(e,n){for(var t=-1,r=e.length,i=0,u=[];++t<r;){var f=e[t],o=n?n(f):f;if(!t||!Ye(o,h)){var h=o;u[i++]=f===0?0:f}}return u}function du(e){return typeof e=="number"?e:Ie(e)?Ct:+e}function Ce(e){if(typeof e=="string")return e;if(R(e))return k(e,Ce)+"";if(Ie(e))return zs?zs.call(e):"";var n=e+"";return n=="0"&&1/e==-tn?"-0":n}function wn(e,n,t){var r=-1,i=Ft,u=e.length,f=!0,o=[],h=o;if(t)f=!1,i=$r;else if(u>=y){var g=n?null:Yo(e);if(g)return Pt(g);f=!1,i=ft,h=new En}else h=n?[]:o;e:for(;++r<u;){var x=e[r],_=n?n(x):x;if(x=t||x!==0?x:0,f&&_===_){for(var v=h.length;v--;)if(h[v]===_)continue e;n&&h.push(_),o.push(x)}else i(h,_,t)||(h!==o&&h.push(_),o.push(x))}return o}function vi(e,n){return n=yn(n,e),e=Gu(e,n),e==null||delete e[nn(Me(n))]}function pu(e,n,t,r){return mt(e,n,t(jn(e,n)),r)}function tr(e,n,t,r){for(var i=e.length,u=r?i:-1;(r?u--:++u<i)&&n(e[u],u,e););return t?Be(e,r?0:u,r?u+1:i):Be(e,r?u+1:0,r?i:u)}function gu(e,n){var t=e;return t instanceof D&&(t=t.value()),Yr(n,function(r,i){return i.func.apply(i.thisArg,_n([r],i.args))},t)}function mi(e,n,t){var r=e.length;if(r<2)return r?wn(e[0]):[];for(var i=-1,u=d(r);++i<r;)for(var f=e[i],o=-1;++o<r;)o!=i&&(u[i]=xt(u[i]||f,e[o],n,t));return wn(le(u,1),n,t)}function xu(e,n,t){for(var r=-1,i=e.length,u=n.length,f={};++r<i;){var o=r<u?n[r]:l;t(f,e[r],o)}return f}function bi(e){return V(e)?e:[]}function wi(e){return typeof e=="function"?e:ye}function yn(e,n){return R(e)?e:Ti(e,n)?[e]:zu(M(e))}var Wo=O;function An(e,n,t){var r=e.length;return t=t===l?r:t,!n&&t>=r?e:Be(e,n,t)}var _u=Af||function(e){return ae.clearTimeout(e)};function vu(e,n){if(n)return e.slice();var t=e.length,r=Ms?Ms(t):new e.constructor(t);return e.copy(r),r}function yi(e){var n=new e.constructor(e.byteLength);return new Ht(n).set(new Ht(e)),n}function Bo(e,n){var t=n?yi(e.buffer):e.buffer;return new e.constructor(t,e.byteOffset,e.byteLength)}function Mo(e){var n=new e.constructor(e.source,ns.exec(e));return n.lastIndex=e.lastIndex,n}function Uo(e){return pt?q(pt.call(e)):{}}function mu(e,n){var t=n?yi(e.buffer):e.buffer;return new e.constructor(t,e.byteOffset,e.length)}function bu(e,n){if(e!==n){var t=e!==l,r=e===null,i=e===e,u=Ie(e),f=n!==l,o=n===null,h=n===n,g=Ie(n);if(!o&&!g&&!u&&e>n||u&&f&&h&&!o&&!g||r&&f&&h||!t&&h||!i)return 1;if(!r&&!u&&!g&&e<n||g&&t&&i&&!r&&!u||o&&t&&i||!f&&i||!h)return-1}return 0}function Go(e,n,t){for(var r=-1,i=e.criteria,u=n.criteria,f=i.length,o=t.length;++r<f;){var h=bu(i[r],u[r]);if(h){if(r>=o)return h;var g=t[r];return h*(g=="desc"?-1:1)}}return e.index-n.index}function wu(e,n,t,r){for(var i=-1,u=e.length,f=t.length,o=-1,h=n.length,g=ie(u-f,0),x=d(h+g),_=!r;++o<h;)x[o]=n[o];for(;++i<f;)(_||i<u)&&(x[t[i]]=e[i]);for(;g--;)x[o++]=e[i++];return x}function yu(e,n,t,r){for(var i=-1,u=e.length,f=-1,o=t.length,h=-1,g=n.length,x=ie(u-o,0),_=d(x+g),v=!r;++i<x;)_[i]=e[i];for(var w=i;++h<g;)_[w+h]=n[h];for(;++f<o;)(v||i<u)&&(_[w+t[f]]=e[i++]);return _}function me(e,n){var t=-1,r=e.length;for(n||(n=d(r));++t<r;)n[t]=e[t];return n}function en(e,n,t,r){var i=!t;t||(t={});for(var u=-1,f=n.length;++u<f;){var o=n[u],h=r?r(t[o],e[o],o,t,e):l;h===l&&(h=e[o]),i?an(t,o,h):gt(t,o,h)}return t}function Ho(e,n){return en(e,Ei(e),n)}function qo(e,n){return en(e,Du(e),n)}function rr(e,n){return function(t,r){var i=R(t)?$l:oo,u=n?n():{};return i(t,e,A(r,2),u)}}function Yn(e){return O(function(n,t){var r=-1,i=t.length,u=i>1?t[i-1]:l,f=i>2?t[2]:l;for(u=e.length>3&&typeof u=="function"?(i--,u):l,f&&ge(t[0],t[1],f)&&(u=i<3?l:u,i=1),n=q(n);++r<i;){var o=t[r];o&&e(n,o,r,u)}return n})}function Au(e,n){return function(t,r){if(t==null)return t;if(!be(t))return e(t,r);for(var i=t.length,u=n?i:-1,f=q(t);(n?u--:++u<i)&&r(f[u],u,f)!==!1;);return t}}function Nu(e){return function(n,t,r){for(var i=-1,u=q(n),f=r(n),o=f.length;o--;){var h=f[e?o:++i];if(t(u[h],h,u)===!1)break}return n}}function Ko(e,n,t){var r=n&ue,i=bt(e);function u(){var f=this&&this!==ae&&this instanceof u?i:e;return f.apply(r?t:this,arguments)}return u}function Su(e){return function(n){n=M(n);var t=Un(n)?ze(n):l,r=t?t[0]:n.charAt(0),i=t?An(t,1).join(""):n.slice(1);return r[e]()+i}}function Zn(e){return function(n){return Yr(Aa(ya(n).replace(Ll,"")),e,"")}}function bt(e){return function(){var n=arguments;switch(n.length){case 0:return new e;case 1:return new e(n[0]);case 2:return new e(n[0],n[1]);case 3:return new e(n[0],n[1],n[2]);case 4:return new e(n[0],n[1],n[2],n[3]);case 5:return new e(n[0],n[1],n[2],n[3],n[4]);case 6:return new e(n[0],n[1],n[2],n[3],n[4],n[5]);case 7:return new e(n[0],n[1],n[2],n[3],n[4],n[5],n[6])}var t=$n(e.prototype),r=e.apply(t,n);return X(r)?r:t}}function zo(e,n,t){var r=bt(e);function i(){for(var u=arguments.length,f=d(u),o=u,h=kn(i);o--;)f[o]=arguments[o];var g=u<3&&f[0]!==h&&f[u-1]!==h?[]:vn(f,h);if(u-=g.length,u<t)return Tu(e,n,ir,i.placeholder,l,f,g,l,l,t-u);var x=this&&this!==ae&&this instanceof i?r:e;return Ne(x,this,f)}return i}function Cu(e){return function(n,t,r){var i=q(n);if(!be(n)){var u=A(t,3);n=se(n),t=function(o){return u(i[o],o,i)}}var f=e(n,t,r);return f>-1?i[u?n[f]:f]:l}}function Iu(e){return fn(function(n){var t=n.length,r=t,i=Pe.prototype.thru;for(e&&n.reverse();r--;){var u=n[r];if(typeof u!="function")throw new De(Y);if(i&&!f&&lr(u)=="wrapper")var f=new Pe([],!0)}for(r=f?r:t;++r<t;){u=n[r];var o=lr(u),h=o=="wrapper"?Ii(u):l;h&&ji(h[0])&&h[1]==(ve|C|j|K)&&!h[4].length&&h[9]==1?f=f[lr(h[0])].apply(f,h[3]):f=u.length==1&&ji(u)?f[o]():f.thru(u)}return function(){var g=arguments,x=g[0];if(f&&g.length==1&&R(x))return f.plant(x).value();for(var _=0,v=t?n[_].apply(this,g):x;++_<t;)v=n[_].call(this,v);return v}})}function ir(e,n,t,r,i,u,f,o,h,g){var x=n&ve,_=n&ue,v=n&Le,w=n&(C|m),N=n&Qn,L=v?l:bt(e);function S(){for(var F=arguments.length,W=d(F),Re=F;Re--;)W[Re]=arguments[Re];if(w)var xe=kn(S),Ee=nf(W,xe);if(r&&(W=wu(W,r,i,w)),u&&(W=yu(W,u,f,w)),F-=Ee,w&&F<g){var ee=vn(W,xe);return Tu(e,n,ir,S.placeholder,t,W,ee,o,h,g-F)}var Ze=_?t:this,dn=v?Ze[e]:e;return F=W.length,o?W=cc(W,o):N&&F>1&&W.reverse(),x&&h<F&&(W.length=h),this&&this!==ae&&this instanceof S&&(dn=L||bt(dn)),dn.apply(Ze,W)}return S}function Ru(e,n){return function(t,r){return mo(t,e,n(r),{})}}function sr(e,n){return function(t,r){var i;if(t===l&&r===l)return n;if(t!==l&&(i=t),r!==l){if(i===l)return r;typeof t=="string"||typeof r=="string"?(t=Ce(t),r=Ce(r)):(t=du(t),r=du(r)),i=e(t,r)}return i}}function Ai(e){return fn(function(n){return n=k(n,Se(A())),O(function(t){var r=this;return e(n,function(i){return Ne(i,r,t)})})})}function ur(e,n){n=n===l?" ":Ce(n);var t=n.length;if(t<2)return t?xi(n,e):n;var r=xi(n,$t(e/Gn(n)));return Un(n)?An(ze(r),0,e).join(""):r.slice(0,e)}function $o(e,n,t,r){var i=n&ue,u=bt(e);function f(){for(var o=-1,h=arguments.length,g=-1,x=r.length,_=d(x+h),v=this&&this!==ae&&this instanceof f?u:e;++g<x;)_[g]=r[g];for(;h--;)_[g++]=arguments[++o];return Ne(v,i?t:this,_)}return f}function Eu(e){return function(n,t,r){return r&&typeof r!="number"&&ge(n,t,r)&&(t=r=l),n=hn(n),t===l?(t=n,n=0):t=hn(t),r=r===l?n<t?1:-1:hn(r),jo(n,t,r,e)}}function ar(e){return function(n,t){return typeof n=="string"&&typeof t=="string"||(n=Ue(n),t=Ue(t)),e(n,t)}}function Tu(e,n,t,r,i,u,f,o,h,g){var x=n&C,_=x?f:l,v=x?l:f,w=x?u:l,N=x?l:u;n|=x?j:de,n&=~(x?de:j),n&Je||(n&=-4);var L=[e,n,i,w,_,N,v,o,h,g],S=t.apply(l,L);return ji(e)&&Hu(S,L),S.placeholder=r,qu(S,e,n)}function Ni(e){var n=re[e];return function(t,r){if(t=Ue(t),r=r==null?0:ce(E(r),292),r&&qs(t)){var i=(M(t)+"e").split("e"),u=n(i[0]+"e"+(+i[1]+r));return i=(M(u)+"e").split("e"),+(i[0]+"e"+(+i[1]-r))}return n(t)}}var Yo=Kn&&1/Pt(new Kn([,-0]))[1]==tn?function(e){return new Kn(e)}:$i;function ju(e){return function(n){var t=he(n);return t==qe?ei(n):t==Ke?ff(n):ef(n,e(n))}}function ln(e,n,t,r,i,u,f,o){var h=n&Le;if(!h&&typeof e!="function")throw new De(Y);var g=r?r.length:0;if(g||(n&=-97,r=i=l),f=f===l?f:ie(E(f),0),o=o===l?o:E(o),g-=i?i.length:0,n&de){var x=r,_=i;r=i=l}var v=h?l:Ii(e),w=[e,n,t,r,i,x,_,u,f,o];if(v&&lc(w,v),e=w[0],n=w[1],t=w[2],r=w[3],i=w[4],o=w[9]=w[9]===l?h?0:e.length:ie(w[9]-g,0),!o&&n&(C|m)&&(n&=-25),!n||n==ue)var N=Ko(e,n,t);else n==C||n==m?N=zo(e,n,o):(n==j||n==(ue|j))&&!i.length?N=$o(e,n,t,r):N=ir.apply(l,w);var L=v?cu:Hu;return qu(L(N,w),e,n)}function Lu(e,n,t,r){return e===l||Ye(e,qn[t])&&!H.call(r,t)?n:e}function Ou(e,n,t,r,i,u){return X(e)&&X(n)&&(u.set(n,e),er(e,n,l,Ou,u),u.delete(n)),e}function Zo(e){return At(e)?l:e}function Fu(e,n,t,r,i,u){var f=t&fe,o=e.length,h=n.length;if(o!=h&&!(f&&h>o))return!1;var g=u.get(e),x=u.get(n);if(g&&x)return g==n&&x==e;var _=-1,v=!0,w=t&_e?new En:l;for(u.set(e,n),u.set(n,e);++_<o;){var N=e[_],L=n[_];if(r)var S=f?r(L,N,_,n,e,u):r(N,L,_,e,n,u);if(S!==l){if(S)continue;v=!1;break}if(w){if(!Zr(n,function(F,W){if(!ft(w,W)&&(N===F||i(N,F,t,r,u)))return w.push(W)})){v=!1;break}}else if(!(N===L||i(N,L,t,r,u))){v=!1;break}}return u.delete(e),u.delete(n),v}function ko(e,n,t,r,i,u,f){switch(t){case Wn:if(e.byteLength!=n.byteLength||e.byteOffset!=n.byteOffset)return!1;e=e.buffer,n=n.buffer;case lt:return!(e.byteLength!=n.byteLength||!u(new Ht(e),new Ht(n)));case tt:case rt:case it:return Ye(+e,+n);case Rt:return e.name==n.name&&e.message==n.message;case st:case ut:return e==n+"";case qe:var o=ei;case Ke:var h=r&fe;if(o||(o=Pt),e.size!=n.size&&!h)return!1;var g=f.get(e);if(g)return g==n;r|=_e,f.set(e,n);var x=Fu(o(e),o(n),r,i,u,f);return f.delete(e),x;case Tt:if(pt)return pt.call(e)==pt.call(n)}return!1}function Xo(e,n,t,r,i,u){var f=t&fe,o=Si(e),h=o.length,g=Si(n),x=g.length;if(h!=x&&!f)return!1;for(var _=h;_--;){var v=o[_];if(!(f?v in n:H.call(n,v)))return!1}var w=u.get(e),N=u.get(n);if(w&&N)return w==n&&N==e;var L=!0;u.set(e,n),u.set(n,e);for(var S=f;++_<h;){v=o[_];var F=e[v],W=n[v];if(r)var Re=f?r(W,F,v,n,e,u):r(F,W,v,e,n,u);if(!(Re===l?F===W||i(F,W,t,r,u):Re)){L=!1;break}S||(S=v=="constructor")}if(L&&!S){var xe=e.constructor,Ee=n.constructor;xe!=Ee&&"constructor"in e&&"constructor"in n&&!(typeof xe=="function"&&xe instanceof xe&&typeof Ee=="function"&&Ee instanceof Ee)&&(L=!1)}return u.delete(e),u.delete(n),L}function fn(e){return Oi(Uu(e,l,ku),e+"")}function Si(e){return eu(e,se,Ei)}function Ci(e){return eu(e,we,Du)}var Ii=Zt?function(e){return Zt.get(e)}:$i;function lr(e){for(var n=e.name+"",t=zn[n],r=H.call(zn,n)?t.length:0;r--;){var i=t[r],u=i.func;if(u==null||u==e)return i.name}return n}function kn(e){var n=H.call(s,"placeholder")?s:e;return n.placeholder}function A(){var e=s.iteratee||Ki;return e=e===Ki?ru:e,arguments.length?e(arguments[0],arguments[1]):e}function fr(e,n){var t=e.__data__;return ic(n)?t[typeof n=="string"?"string":"hash"]:t.map}function Ri(e){for(var n=se(e),t=n.length;t--;){var r=n[t],i=e[r];n[t]=[r,i,Bu(i)]}return n}function Ln(e,n){var t=uf(e,n);return tu(t)?t:l}function Jo(e){var n=H.call(e,In),t=e[In];try{e[In]=l;var r=!0}catch{}var i=Ut.call(e);return r&&(n?e[In]=t:delete e[In]),i}var Ei=ti?function(e){return e==null?[]:(e=q(e),xn(ti(e),function(n){return Gs.call(e,n)}))}:Yi,Du=ti?function(e){for(var n=[];e;)_n(n,Ei(e)),e=qt(e);return n}:Yi,he=pe;(ri&&he(new ri(new ArrayBuffer(1)))!=Wn||ct&&he(new ct)!=qe||ii&&he(ii.resolve())!=Ji||Kn&&he(new Kn)!=Ke||ht&&he(new ht)!=at)&&(he=function(e){var n=pe(e),t=n==rn?e.constructor:l,r=t?On(t):"";if(r)switch(r){case Lf:return Wn;case Of:return qe;case Ff:return Ji;case Df:return Ke;case Pf:return at}return n});function Qo(e,n,t){for(var r=-1,i=t.length;++r<i;){var u=t[r],f=u.size;switch(u.type){case"drop":e+=f;break;case"dropRight":n-=f;break;case"take":n=ce(n,e+f);break;case"takeRight":e=ie(e,n-f);break}}return{start:e,end:n}}function Vo(e){var n=e.match(rl);return n?n[1].split(il):[]}function Pu(e,n,t){n=yn(n,e);for(var r=-1,i=n.length,u=!1;++r<i;){var f=nn(n[r]);if(!(u=e!=null&&t(e,f)))break;e=e[f]}return u||++r!=i?u:(i=e==null?0:e.length,!!i&&xr(i)&&on(f,i)&&(R(e)||Fn(e)))}function ec(e){var n=e.length,t=new e.constructor(n);return n&&typeof e[0]=="string"&&H.call(e,"index")&&(t.index=e.index,t.input=e.input),t}function Wu(e){return typeof e.constructor=="function"&&!wt(e)?$n(qt(e)):{}}function nc(e,n,t){var r=e.constructor;switch(n){case lt:return yi(e);case tt:case rt:return new r(+e);case Wn:return Bo(e,t);case Rr:case Er:case Tr:case jr:case Lr:case Or:case Fr:case Dr:case Pr:return mu(e,t);case qe:return new r;case it:case ut:return new r(e);case st:return Mo(e);case Ke:return new r;case Tt:return Uo(e)}}function tc(e,n){var t=n.length;if(!t)return e;var r=t-1;return n[r]=(t>1?"& ":"")+n[r],n=n.join(t>2?", ":" "),e.replace(tl,`{
/* [wrapped with `+n+`] */
`)}function rc(e){return R(e)||Fn(e)||!!(Hs&&e&&e[Hs])}function on(e,n){var t=typeof e;return n=n??gn,!!n&&(t=="number"||t!="symbol"&&dl.test(e))&&e>-1&&e%1==0&&e<n}function ge(e,n,t){if(!X(t))return!1;var r=typeof n;return(r=="number"?be(t)&&on(n,t.length):r=="string"&&n in t)?Ye(t[n],e):!1}function Ti(e,n){if(R(e))return!1;var t=typeof e;return t=="number"||t=="symbol"||t=="boolean"||e==null||Ie(e)?!0:Qa.test(e)||!Ja.test(e)||n!=null&&e in q(n)}function ic(e){var n=typeof e;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?e!=="__proto__":e===null}function ji(e){var n=lr(e),t=s[n];if(typeof t!="function"||!(n in D.prototype))return!1;if(e===t)return!0;var r=Ii(t);return!!r&&e===r[0]}function sc(e){return!!Bs&&Bs in e}var uc=Bt?cn:Zi;function wt(e){var n=e&&e.constructor,t=typeof n=="function"&&n.prototype||qn;return e===t}function Bu(e){return e===e&&!X(e)}function Mu(e,n){return function(t){return t==null?!1:t[e]===n&&(n!==l||e in q(t))}}function ac(e){var n=pr(e,function(r){return t.size===Ae&&t.clear(),r}),t=n.cache;return n}function lc(e,n){var t=e[1],r=n[1],i=t|r,u=i<(ue|Le|ve),f=r==ve&&t==C||r==ve&&t==K&&e[7].length<=n[8]||r==(ve|K)&&n[7].length<=n[8]&&t==C;if(!(u||f))return e;r&ue&&(e[2]=n[2],i|=t&ue?0:Je);var o=n[3];if(o){var h=e[3];e[3]=h?wu(h,o,n[4]):o,e[4]=h?vn(e[3],je):n[4]}return o=n[5],o&&(h=e[5],e[5]=h?yu(h,o,n[6]):o,e[6]=h?vn(e[5],je):n[6]),o=n[7],o&&(e[7]=o),r&ve&&(e[8]=e[8]==null?n[8]:ce(e[8],n[8])),e[9]==null&&(e[9]=n[9]),e[0]=n[0],e[1]=i,e}function fc(e){var n=[];if(e!=null)for(var t in q(e))n.push(t);return n}function oc(e){return Ut.call(e)}function Uu(e,n,t){return n=ie(n===l?e.length-1:n,0),function(){for(var r=arguments,i=-1,u=ie(r.length-n,0),f=d(u);++i<u;)f[i]=r[n+i];i=-1;for(var o=d(n+1);++i<n;)o[i]=r[i];return o[n]=t(f),Ne(e,this,o)}}function Gu(e,n){return n.length<2?e:jn(e,Be(n,0,-1))}function cc(e,n){for(var t=e.length,r=ce(n.length,t),i=me(e);r--;){var u=n[r];e[r]=on(u,t)?i[u]:l}return e}function Li(e,n){if(!(n==="constructor"&&typeof e[n]=="function")&&n!="__proto__")return e[n]}var Hu=Ku(cu),yt=Sf||function(e,n){return ae.setTimeout(e,n)},Oi=Ku(Fo);function qu(e,n,t){var r=n+"";return Oi(e,tc(r,hc(Vo(r),t)))}function Ku(e){var n=0,t=0;return function(){var r=Ef(),i=et-(r-t);if(t=r,i>0){if(++n>=Vn)return arguments[0]}else n=0;return e.apply(l,arguments)}}function or(e,n){var t=-1,r=e.length,i=r-1;for(n=n===l?r:n;++t<n;){var u=gi(t,i),f=e[u];e[u]=e[t],e[t]=f}return e.length=n,e}var zu=ac(function(e){var n=[];return e.charCodeAt(0)===46&&n.push(""),e.replace(Va,function(t,r,i,u){n.push(i?u.replace(al,"$1"):r||t)}),n});function nn(e){if(typeof e=="string"||Ie(e))return e;var n=e+"";return n=="0"&&1/e==-tn?"-0":n}function On(e){if(e!=null){try{return Mt.call(e)}catch{}try{return e+""}catch{}}return""}function hc(e,n){return Fe(Wa,function(t){var r="_."+t[0];n&t[1]&&!Ft(e,r)&&e.push(r)}),e.sort()}function $u(e){if(e instanceof D)return e.clone();var n=new Pe(e.__wrapped__,e.__chain__);return n.__actions__=me(e.__actions__),n.__index__=e.__index__,n.__values__=e.__values__,n}function dc(e,n,t){(t?ge(e,n,t):n===l)?n=1:n=ie(E(n),0);var r=e==null?0:e.length;if(!r||n<1)return[];for(var i=0,u=0,f=d($t(r/n));i<r;)f[u++]=Be(e,i,i+=n);return f}function pc(e){for(var n=-1,t=e==null?0:e.length,r=0,i=[];++n<t;){var u=e[n];u&&(i[r++]=u)}return i}function gc(){var e=arguments.length;if(!e)return[];for(var n=d(e-1),t=arguments[0],r=e;r--;)n[r-1]=arguments[r];return _n(R(t)?me(t):[t],le(n,1))}var xc=O(function(e,n){return V(e)?xt(e,le(n,1,V,!0)):[]}),_c=O(function(e,n){var t=Me(n);return V(t)&&(t=l),V(e)?xt(e,le(n,1,V,!0),A(t,2)):[]}),vc=O(function(e,n){var t=Me(n);return V(t)&&(t=l),V(e)?xt(e,le(n,1,V,!0),l,t):[]});function mc(e,n,t){var r=e==null?0:e.length;return r?(n=t||n===l?1:E(n),Be(e,n<0?0:n,r)):[]}function bc(e,n,t){var r=e==null?0:e.length;return r?(n=t||n===l?1:E(n),n=r-n,Be(e,0,n<0?0:n)):[]}function wc(e,n){return e&&e.length?tr(e,A(n,3),!0,!0):[]}function yc(e,n){return e&&e.length?tr(e,A(n,3),!0):[]}function Ac(e,n,t,r){var i=e==null?0:e.length;return i?(t&&typeof t!="number"&&ge(e,n,t)&&(t=0,r=i),go(e,n,t,r)):[]}function Yu(e,n,t){var r=e==null?0:e.length;if(!r)return-1;var i=t==null?0:E(t);return i<0&&(i=ie(r+i,0)),Dt(e,A(n,3),i)}function Zu(e,n,t){var r=e==null?0:e.length;if(!r)return-1;var i=r-1;return t!==l&&(i=E(t),i=t<0?ie(r+i,0):ce(i,r-1)),Dt(e,A(n,3),i,!0)}function ku(e){var n=e==null?0:e.length;return n?le(e,1):[]}function Nc(e){var n=e==null?0:e.length;return n?le(e,tn):[]}function Sc(e,n){var t=e==null?0:e.length;return t?(n=n===l?1:E(n),le(e,n)):[]}function Cc(e){for(var n=-1,t=e==null?0:e.length,r={};++n<t;){var i=e[n];r[i[0]]=i[1]}return r}function Xu(e){return e&&e.length?e[0]:l}function Ic(e,n,t){var r=e==null?0:e.length;if(!r)return-1;var i=t==null?0:E(t);return i<0&&(i=ie(r+i,0)),Mn(e,n,i)}function Rc(e){var n=e==null?0:e.length;return n?Be(e,0,-1):[]}var Ec=O(function(e){var n=k(e,bi);return n.length&&n[0]===e[0]?oi(n):[]}),Tc=O(function(e){var n=Me(e),t=k(e,bi);return n===Me(t)?n=l:t.pop(),t.length&&t[0]===e[0]?oi(t,A(n,2)):[]}),jc=O(function(e){var n=Me(e),t=k(e,bi);return n=typeof n=="function"?n:l,n&&t.pop(),t.length&&t[0]===e[0]?oi(t,l,n):[]});function Lc(e,n){return e==null?"":If.call(e,n)}function Me(e){var n=e==null?0:e.length;return n?e[n-1]:l}function Oc(e,n,t){var r=e==null?0:e.length;if(!r)return-1;var i=r;return t!==l&&(i=E(t),i=i<0?ie(r+i,0):ce(i,r-1)),n===n?cf(e,n,i):Dt(e,Ts,i,!0)}function Fc(e,n){return e&&e.length?au(e,E(n)):l}var Dc=O(Ju);function Ju(e,n){return e&&e.length&&n&&n.length?pi(e,n):e}function Pc(e,n,t){return e&&e.length&&n&&n.length?pi(e,n,A(t,2)):e}function Wc(e,n,t){return e&&e.length&&n&&n.length?pi(e,n,l,t):e}var Bc=fn(function(e,n){var t=e==null?0:e.length,r=ui(e,n);return ou(e,k(n,function(i){return on(i,t)?+i:i}).sort(bu)),r});function Mc(e,n){var t=[];if(!(e&&e.length))return t;var r=-1,i=[],u=e.length;for(n=A(n,3);++r<u;){var f=e[r];n(f,r,e)&&(t.push(f),i.push(r))}return ou(e,i),t}function Fi(e){return e==null?e:jf.call(e)}function Uc(e,n,t){var r=e==null?0:e.length;return r?(t&&typeof t!="number"&&ge(e,n,t)?(n=0,t=r):(n=n==null?0:E(n),t=t===l?r:E(t)),Be(e,n,t)):[]}function Gc(e,n){return nr(e,n)}function Hc(e,n,t){return _i(e,n,A(t,2))}function qc(e,n){var t=e==null?0:e.length;if(t){var r=nr(e,n);if(r<t&&Ye(e[r],n))return r}return-1}function Kc(e,n){return nr(e,n,!0)}function zc(e,n,t){return _i(e,n,A(t,2),!0)}function $c(e,n){var t=e==null?0:e.length;if(t){var r=nr(e,n,!0)-1;if(Ye(e[r],n))return r}return-1}function Yc(e){return e&&e.length?hu(e):[]}function Zc(e,n){return e&&e.length?hu(e,A(n,2)):[]}function kc(e){var n=e==null?0:e.length;return n?Be(e,1,n):[]}function Xc(e,n,t){return e&&e.length?(n=t||n===l?1:E(n),Be(e,0,n<0?0:n)):[]}function Jc(e,n,t){var r=e==null?0:e.length;return r?(n=t||n===l?1:E(n),n=r-n,Be(e,n<0?0:n,r)):[]}function Qc(e,n){return e&&e.length?tr(e,A(n,3),!1,!0):[]}function Vc(e,n){return e&&e.length?tr(e,A(n,3)):[]}var eh=O(function(e){return wn(le(e,1,V,!0))}),nh=O(function(e){var n=Me(e);return V(n)&&(n=l),wn(le(e,1,V,!0),A(n,2))}),th=O(function(e){var n=Me(e);return n=typeof n=="function"?n:l,wn(le(e,1,V,!0),l,n)});function rh(e){return e&&e.length?wn(e):[]}function ih(e,n){return e&&e.length?wn(e,A(n,2)):[]}function sh(e,n){return n=typeof n=="function"?n:l,e&&e.length?wn(e,l,n):[]}function Di(e){if(!(e&&e.length))return[];var n=0;return e=xn(e,function(t){if(V(t))return n=ie(t.length,n),!0}),Qr(n,function(t){return k(e,kr(t))})}function Qu(e,n){if(!(e&&e.length))return[];var t=Di(e);return n==null?t:k(t,function(r){return Ne(n,l,r)})}var uh=O(function(e,n){return V(e)?xt(e,n):[]}),ah=O(function(e){return mi(xn(e,V))}),lh=O(function(e){var n=Me(e);return V(n)&&(n=l),mi(xn(e,V),A(n,2))}),fh=O(function(e){var n=Me(e);return n=typeof n=="function"?n:l,mi(xn(e,V),l,n)}),oh=O(Di);function ch(e,n){return xu(e||[],n||[],gt)}function hh(e,n){return xu(e||[],n||[],mt)}var dh=O(function(e){var n=e.length,t=n>1?e[n-1]:l;return t=typeof t=="function"?(e.pop(),t):l,Qu(e,t)});function Vu(e){var n=s(e);return n.__chain__=!0,n}function ph(e,n){return n(e),e}function cr(e,n){return n(e)}var gh=fn(function(e){var n=e.length,t=n?e[0]:0,r=this.__wrapped__,i=function(u){return ui(u,e)};return n>1||this.__actions__.length||!(r instanceof D)||!on(t)?this.thru(i):(r=r.slice(t,+t+(n?1:0)),r.__actions__.push({func:cr,args:[i],thisArg:l}),new Pe(r,this.__chain__).thru(function(u){return n&&!u.length&&u.push(l),u}))});function xh(){return Vu(this)}function _h(){return new Pe(this.value(),this.__chain__)}function vh(){this.__values__===l&&(this.__values__=da(this.value()));var e=this.__index__>=this.__values__.length,n=e?l:this.__values__[this.__index__++];return{done:e,value:n}}function mh(){return this}function bh(e){for(var n,t=this;t instanceof Xt;){var r=$u(t);r.__index__=0,r.__values__=l,n?i.__wrapped__=r:n=r;var i=r;t=t.__wrapped__}return i.__wrapped__=e,n}function wh(){var e=this.__wrapped__;if(e instanceof D){var n=e;return this.__actions__.length&&(n=new D(this)),n=n.reverse(),n.__actions__.push({func:cr,args:[Fi],thisArg:l}),new Pe(n,this.__chain__)}return this.thru(Fi)}function yh(){return gu(this.__wrapped__,this.__actions__)}var Ah=rr(function(e,n,t){H.call(e,t)?++e[t]:an(e,t,1)});function Nh(e,n,t){var r=R(e)?Rs:po;return t&&ge(e,n,t)&&(n=l),r(e,A(n,3))}function Sh(e,n){var t=R(e)?xn:Qs;return t(e,A(n,3))}var Ch=Cu(Yu),Ih=Cu(Zu);function Rh(e,n){return le(hr(e,n),1)}function Eh(e,n){return le(hr(e,n),tn)}function Th(e,n,t){return t=t===l?1:E(t),le(hr(e,n),t)}function ea(e,n){var t=R(e)?Fe:bn;return t(e,A(n,3))}function na(e,n){var t=R(e)?Yl:Js;return t(e,A(n,3))}var jh=rr(function(e,n,t){H.call(e,t)?e[t].push(n):an(e,t,[n])});function Lh(e,n,t,r){e=be(e)?e:Jn(e),t=t&&!r?E(t):0;var i=e.length;return t<0&&(t=ie(i+t,0)),_r(e)?t<=i&&e.indexOf(n,t)>-1:!!i&&Mn(e,n,t)>-1}var Oh=O(function(e,n,t){var r=-1,i=typeof n=="function",u=be(e)?d(e.length):[];return bn(e,function(f){u[++r]=i?Ne(n,f,t):_t(f,n,t)}),u}),Fh=rr(function(e,n,t){an(e,t,n)});function hr(e,n){var t=R(e)?k:iu;return t(e,A(n,3))}function Dh(e,n,t,r){return e==null?[]:(R(n)||(n=n==null?[]:[n]),t=r?l:t,R(t)||(t=t==null?[]:[t]),lu(e,n,t))}var Ph=rr(function(e,n,t){e[t?0:1].push(n)},function(){return[[],[]]});function Wh(e,n,t){var r=R(e)?Yr:Ls,i=arguments.length<3;return r(e,A(n,4),t,i,bn)}function Bh(e,n,t){var r=R(e)?Zl:Ls,i=arguments.length<3;return r(e,A(n,4),t,i,Js)}function Mh(e,n){var t=R(e)?xn:Qs;return t(e,gr(A(n,3)))}function Uh(e){var n=R(e)?Ys:Lo;return n(e)}function Gh(e,n,t){(t?ge(e,n,t):n===l)?n=1:n=E(n);var r=R(e)?lo:Oo;return r(e,n)}function Hh(e){var n=R(e)?fo:Do;return n(e)}function qh(e){if(e==null)return 0;if(be(e))return _r(e)?Gn(e):e.length;var n=he(e);return n==qe||n==Ke?e.size:hi(e).length}function Kh(e,n,t){var r=R(e)?Zr:Po;return t&&ge(e,n,t)&&(n=l),r(e,A(n,3))}var zh=O(function(e,n){if(e==null)return[];var t=n.length;return t>1&&ge(e,n[0],n[1])?n=[]:t>2&&ge(n[0],n[1],n[2])&&(n=[n[0]]),lu(e,le(n,1),[])}),dr=Nf||function(){return ae.Date.now()};function $h(e,n){if(typeof n!="function")throw new De(Y);return e=E(e),function(){if(--e<1)return n.apply(this,arguments)}}function ta(e,n,t){return n=t?l:n,n=e&&n==null?e.length:n,ln(e,ve,l,l,l,l,n)}function ra(e,n){var t;if(typeof n!="function")throw new De(Y);return e=E(e),function(){return--e>0&&(t=n.apply(this,arguments)),e<=1&&(n=l),t}}var Pi=O(function(e,n,t){var r=ue;if(t.length){var i=vn(t,kn(Pi));r|=j}return ln(e,r,n,t,i)}),ia=O(function(e,n,t){var r=ue|Le;if(t.length){var i=vn(t,kn(ia));r|=j}return ln(n,r,e,t,i)});function sa(e,n,t){n=t?l:n;var r=ln(e,C,l,l,l,l,l,n);return r.placeholder=sa.placeholder,r}function ua(e,n,t){n=t?l:n;var r=ln(e,m,l,l,l,l,l,n);return r.placeholder=ua.placeholder,r}function aa(e,n,t){var r,i,u,f,o,h,g=0,x=!1,_=!1,v=!0;if(typeof e!="function")throw new De(Y);n=Ue(n)||0,X(t)&&(x=!!t.leading,_="maxWait"in t,u=_?ie(Ue(t.maxWait)||0,n):u,v="trailing"in t?!!t.trailing:v);function w(ee){var Ze=r,dn=i;return r=i=l,g=ee,f=e.apply(dn,Ze),f}function N(ee){return g=ee,o=yt(F,n),x?w(ee):f}function L(ee){var Ze=ee-h,dn=ee-g,Ca=n-Ze;return _?ce(Ca,u-dn):Ca}function S(ee){var Ze=ee-h,dn=ee-g;return h===l||Ze>=n||Ze<0||_&&dn>=u}function F(){var ee=dr();if(S(ee))return W(ee);o=yt(F,L(ee))}function W(ee){return o=l,v&&r?w(ee):(r=i=l,f)}function Re(){o!==l&&_u(o),g=0,r=h=i=o=l}function xe(){return o===l?f:W(dr())}function Ee(){var ee=dr(),Ze=S(ee);if(r=arguments,i=this,h=ee,Ze){if(o===l)return N(h);if(_)return _u(o),o=yt(F,n),w(h)}return o===l&&(o=yt(F,n)),f}return Ee.cancel=Re,Ee.flush=xe,Ee}var Yh=O(function(e,n){return Xs(e,1,n)}),Zh=O(function(e,n,t){return Xs(e,Ue(n)||0,t)});function kh(e){return ln(e,Qn)}function pr(e,n){if(typeof e!="function"||n!=null&&typeof n!="function")throw new De(Y);var t=function(){var r=arguments,i=n?n.apply(this,r):r[0],u=t.cache;if(u.has(i))return u.get(i);var f=e.apply(this,r);return t.cache=u.set(i,f)||u,f};return t.cache=new(pr.Cache||un),t}pr.Cache=un;function gr(e){if(typeof e!="function")throw new De(Y);return function(){var n=arguments;switch(n.length){case 0:return!e.call(this);case 1:return!e.call(this,n[0]);case 2:return!e.call(this,n[0],n[1]);case 3:return!e.call(this,n[0],n[1],n[2])}return!e.apply(this,n)}}function Xh(e){return ra(2,e)}var Jh=Wo(function(e,n){n=n.length==1&&R(n[0])?k(n[0],Se(A())):k(le(n,1),Se(A()));var t=n.length;return O(function(r){for(var i=-1,u=ce(r.length,t);++i<u;)r[i]=n[i].call(this,r[i]);return Ne(e,this,r)})}),Wi=O(function(e,n){var t=vn(n,kn(Wi));return ln(e,j,l,n,t)}),la=O(function(e,n){var t=vn(n,kn(la));return ln(e,de,l,n,t)}),Qh=fn(function(e,n){return ln(e,K,l,l,l,n)});function Vh(e,n){if(typeof e!="function")throw new De(Y);return n=n===l?n:E(n),O(e,n)}function ed(e,n){if(typeof e!="function")throw new De(Y);return n=n==null?0:ie(E(n),0),O(function(t){var r=t[n],i=An(t,0,n);return r&&_n(i,r),Ne(e,this,i)})}function nd(e,n,t){var r=!0,i=!0;if(typeof e!="function")throw new De(Y);return X(t)&&(r="leading"in t?!!t.leading:r,i="trailing"in t?!!t.trailing:i),aa(e,n,{leading:r,maxWait:n,trailing:i})}function td(e){return ta(e,1)}function rd(e,n){return Wi(wi(n),e)}function id(){if(!arguments.length)return[];var e=arguments[0];return R(e)?e:[e]}function sd(e){return We(e,G)}function ud(e,n){return n=typeof n=="function"?n:l,We(e,G,n)}function ad(e){return We(e,T|G)}function ld(e,n){return n=typeof n=="function"?n:l,We(e,T|G,n)}function fd(e,n){return n==null||ks(e,n,se(n))}function Ye(e,n){return e===n||e!==e&&n!==n}var od=ar(fi),cd=ar(function(e,n){return e>=n}),Fn=nu((function(){return arguments})())?nu:function(e){return Q(e)&&H.call(e,"callee")&&!Gs.call(e,"callee")},R=d.isArray,hd=ys?Se(ys):bo;function be(e){return e!=null&&xr(e.length)&&!cn(e)}function V(e){return Q(e)&&be(e)}function dd(e){return e===!0||e===!1||Q(e)&&pe(e)==tt}var Nn=Cf||Zi,pd=As?Se(As):wo;function gd(e){return Q(e)&&e.nodeType===1&&!At(e)}function xd(e){if(e==null)return!0;if(be(e)&&(R(e)||typeof e=="string"||typeof e.splice=="function"||Nn(e)||Xn(e)||Fn(e)))return!e.length;var n=he(e);if(n==qe||n==Ke)return!e.size;if(wt(e))return!hi(e).length;for(var t in e)if(H.call(e,t))return!1;return!0}function _d(e,n){return vt(e,n)}function vd(e,n,t){t=typeof t=="function"?t:l;var r=t?t(e,n):l;return r===l?vt(e,n,l,t):!!r}function Bi(e){if(!Q(e))return!1;var n=pe(e);return n==Rt||n==Ma||typeof e.message=="string"&&typeof e.name=="string"&&!At(e)}function md(e){return typeof e=="number"&&qs(e)}function cn(e){if(!X(e))return!1;var n=pe(e);return n==Et||n==Xi||n==Ba||n==Ga}function fa(e){return typeof e=="number"&&e==E(e)}function xr(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=gn}function X(e){var n=typeof e;return e!=null&&(n=="object"||n=="function")}function Q(e){return e!=null&&typeof e=="object"}var oa=Ns?Se(Ns):Ao;function bd(e,n){return e===n||ci(e,n,Ri(n))}function wd(e,n,t){return t=typeof t=="function"?t:l,ci(e,n,Ri(n),t)}function yd(e){return ca(e)&&e!=+e}function Ad(e){if(uc(e))throw new I(J);return tu(e)}function Nd(e){return e===null}function Sd(e){return e==null}function ca(e){return typeof e=="number"||Q(e)&&pe(e)==it}function At(e){if(!Q(e)||pe(e)!=rn)return!1;var n=qt(e);if(n===null)return!0;var t=H.call(n,"constructor")&&n.constructor;return typeof t=="function"&&t instanceof t&&Mt.call(t)==bf}var Mi=Ss?Se(Ss):No;function Cd(e){return fa(e)&&e>=-gn&&e<=gn}var ha=Cs?Se(Cs):So;function _r(e){return typeof e=="string"||!R(e)&&Q(e)&&pe(e)==ut}function Ie(e){return typeof e=="symbol"||Q(e)&&pe(e)==Tt}var Xn=Is?Se(Is):Co;function Id(e){return e===l}function Rd(e){return Q(e)&&he(e)==at}function Ed(e){return Q(e)&&pe(e)==qa}var Td=ar(di),jd=ar(function(e,n){return e<=n});function da(e){if(!e)return[];if(be(e))return _r(e)?ze(e):me(e);if(ot&&e[ot])return lf(e[ot]());var n=he(e),t=n==qe?ei:n==Ke?Pt:Jn;return t(e)}function hn(e){if(!e)return e===0?e:0;if(e=Ue(e),e===tn||e===-tn){var n=e<0?-1:1;return n*Fa}return e===e?e:0}function E(e){var n=hn(e),t=n%1;return n===n?t?n-t:n:0}function pa(e){return e?Tn(E(e),0,Qe):0}function Ue(e){if(typeof e=="number")return e;if(Ie(e))return Ct;if(X(e)){var n=typeof e.valueOf=="function"?e.valueOf():e;e=X(n)?n+"":n}if(typeof e!="string")return e===0?e:+e;e=Os(e);var t=ol.test(e);return t||hl.test(e)?Kl(e.slice(2),t?2:8):fl.test(e)?Ct:+e}function ga(e){return en(e,we(e))}function Ld(e){return e?Tn(E(e),-gn,gn):e===0?e:0}function M(e){return e==null?"":Ce(e)}var Od=Yn(function(e,n){if(wt(n)||be(n)){en(n,se(n),e);return}for(var t in n)H.call(n,t)&&gt(e,t,n[t])}),xa=Yn(function(e,n){en(n,we(n),e)}),vr=Yn(function(e,n,t,r){en(n,we(n),e,r)}),Fd=Yn(function(e,n,t,r){en(n,se(n),e,r)}),Dd=fn(ui);function Pd(e,n){var t=$n(e);return n==null?t:Zs(t,n)}var Wd=O(function(e,n){e=q(e);var t=-1,r=n.length,i=r>2?n[2]:l;for(i&&ge(n[0],n[1],i)&&(r=1);++t<r;)for(var u=n[t],f=we(u),o=-1,h=f.length;++o<h;){var g=f[o],x=e[g];(x===l||Ye(x,qn[g])&&!H.call(e,g))&&(e[g]=u[g])}return e}),Bd=O(function(e){return e.push(l,Ou),Ne(_a,l,e)});function Md(e,n){return Es(e,A(n,3),Ve)}function Ud(e,n){return Es(e,A(n,3),li)}function Gd(e,n){return e==null?e:ai(e,A(n,3),we)}function Hd(e,n){return e==null?e:Vs(e,A(n,3),we)}function qd(e,n){return e&&Ve(e,A(n,3))}function Kd(e,n){return e&&li(e,A(n,3))}function zd(e){return e==null?[]:Vt(e,se(e))}function $d(e){return e==null?[]:Vt(e,we(e))}function Ui(e,n,t){var r=e==null?l:jn(e,n);return r===l?t:r}function Yd(e,n){return e!=null&&Pu(e,n,xo)}function Gi(e,n){return e!=null&&Pu(e,n,_o)}var Zd=Ru(function(e,n,t){n!=null&&typeof n.toString!="function"&&(n=Ut.call(n)),e[n]=t},qi(ye)),kd=Ru(function(e,n,t){n!=null&&typeof n.toString!="function"&&(n=Ut.call(n)),H.call(e,n)?e[n].push(t):e[n]=[t]},A),Xd=O(_t);function se(e){return be(e)?$s(e):hi(e)}function we(e){return be(e)?$s(e,!0):Io(e)}function Jd(e,n){var t={};return n=A(n,3),Ve(e,function(r,i,u){an(t,n(r,i,u),r)}),t}function Qd(e,n){var t={};return n=A(n,3),Ve(e,function(r,i,u){an(t,i,n(r,i,u))}),t}var Vd=Yn(function(e,n,t){er(e,n,t)}),_a=Yn(function(e,n,t,r){er(e,n,t,r)}),ep=fn(function(e,n){var t={};if(e==null)return t;var r=!1;n=k(n,function(u){return u=yn(u,e),r||(r=u.length>1),u}),en(e,Ci(e),t),r&&(t=We(t,T|Xe|G,Zo));for(var i=n.length;i--;)vi(t,n[i]);return t});function np(e,n){return va(e,gr(A(n)))}var tp=fn(function(e,n){return e==null?{}:Eo(e,n)});function va(e,n){if(e==null)return{};var t=k(Ci(e),function(r){return[r]});return n=A(n),fu(e,t,function(r,i){return n(r,i[0])})}function rp(e,n,t){n=yn(n,e);var r=-1,i=n.length;for(i||(i=1,e=l);++r<i;){var u=e==null?l:e[nn(n[r])];u===l&&(r=i,u=t),e=cn(u)?u.call(e):u}return e}function ip(e,n,t){return e==null?e:mt(e,n,t)}function sp(e,n,t,r){return r=typeof r=="function"?r:l,e==null?e:mt(e,n,t,r)}var ma=ju(se),ba=ju(we);function up(e,n,t){var r=R(e),i=r||Nn(e)||Xn(e);if(n=A(n,4),t==null){var u=e&&e.constructor;i?t=r?new u:[]:X(e)?t=cn(u)?$n(qt(e)):{}:t={}}return(i?Fe:Ve)(e,function(f,o,h){return n(t,f,o,h)}),t}function ap(e,n){return e==null?!0:vi(e,n)}function lp(e,n,t){return e==null?e:pu(e,n,wi(t))}function fp(e,n,t,r){return r=typeof r=="function"?r:l,e==null?e:pu(e,n,wi(t),r)}function Jn(e){return e==null?[]:Vr(e,se(e))}function op(e){return e==null?[]:Vr(e,we(e))}function cp(e,n,t){return t===l&&(t=n,n=l),t!==l&&(t=Ue(t),t=t===t?t:0),n!==l&&(n=Ue(n),n=n===n?n:0),Tn(Ue(e),n,t)}function hp(e,n,t){return n=hn(n),t===l?(t=n,n=0):t=hn(t),e=Ue(e),vo(e,n,t)}function dp(e,n,t){if(t&&typeof t!="boolean"&&ge(e,n,t)&&(n=t=l),t===l&&(typeof n=="boolean"?(t=n,n=l):typeof e=="boolean"&&(t=e,e=l)),e===l&&n===l?(e=0,n=1):(e=hn(e),n===l?(n=e,e=0):n=hn(n)),e>n){var r=e;e=n,n=r}if(t||e%1||n%1){var i=Ks();return ce(e+i*(n-e+ql("1e-"+((i+"").length-1))),n)}return gi(e,n)}var pp=Zn(function(e,n,t){return n=n.toLowerCase(),e+(t?wa(n):n)});function wa(e){return Hi(M(e).toLowerCase())}function ya(e){return e=M(e),e&&e.replace(pl,tf).replace(Ol,"")}function gp(e,n,t){e=M(e),n=Ce(n);var r=e.length;t=t===l?r:Tn(E(t),0,r);var i=t;return t-=n.length,t>=0&&e.slice(t,i)==n}function xp(e){return e=M(e),e&&Za.test(e)?e.replace(Vi,rf):e}function _p(e){return e=M(e),e&&el.test(e)?e.replace(Wr,"\\$&"):e}var vp=Zn(function(e,n,t){return e+(t?"-":"")+n.toLowerCase()}),mp=Zn(function(e,n,t){return e+(t?" ":"")+n.toLowerCase()}),bp=Su("toLowerCase");function wp(e,n,t){e=M(e),n=E(n);var r=n?Gn(e):0;if(!n||r>=n)return e;var i=(n-r)/2;return ur(Yt(i),t)+e+ur($t(i),t)}function yp(e,n,t){e=M(e),n=E(n);var r=n?Gn(e):0;return n&&r<n?e+ur(n-r,t):e}function Ap(e,n,t){e=M(e),n=E(n);var r=n?Gn(e):0;return n&&r<n?ur(n-r,t)+e:e}function Np(e,n,t){return t||n==null?n=0:n&&(n=+n),Tf(M(e).replace(Br,""),n||0)}function Sp(e,n,t){return(t?ge(e,n,t):n===l)?n=1:n=E(n),xi(M(e),n)}function Cp(){var e=arguments,n=M(e[0]);return e.length<3?n:n.replace(e[1],e[2])}var Ip=Zn(function(e,n,t){return e+(t?"_":"")+n.toLowerCase()});function Rp(e,n,t){return t&&typeof t!="number"&&ge(e,n,t)&&(n=t=l),t=t===l?Qe:t>>>0,t?(e=M(e),e&&(typeof n=="string"||n!=null&&!Mi(n))&&(n=Ce(n),!n&&Un(e))?An(ze(e),0,t):e.split(n,t)):[]}var Ep=Zn(function(e,n,t){return e+(t?" ":"")+Hi(n)});function Tp(e,n,t){return e=M(e),t=t==null?0:Tn(E(t),0,e.length),n=Ce(n),e.slice(t,t+n.length)==n}function jp(e,n,t){var r=s.templateSettings;t&&ge(e,n,t)&&(n=l),e=M(e),n=vr({},n,r,Lu);var i=vr({},n.imports,r.imports,Lu),u=se(i),f=Vr(i,u),o,h,g=0,x=n.interpolate||jt,_="__p += '",v=ni((n.escape||jt).source+"|"+x.source+"|"+(x===es?ll:jt).source+"|"+(n.evaluate||jt).source+"|$","g"),w="//# sourceURL="+(H.call(n,"sourceURL")?(n.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Bl+"]")+`
`;e.replace(v,function(S,F,W,Re,xe,Ee){return W||(W=Re),_+=e.slice(g,Ee).replace(gl,sf),F&&(o=!0,_+=`' +
__e(`+F+`) +
'`),xe&&(h=!0,_+=`';
`+xe+`;
__p += '`),W&&(_+=`' +
((__t = (`+W+`)) == null ? '' : __t) +
'`),g=Ee+S.length,S}),_+=`';
`;var N=H.call(n,"variable")&&n.variable;if(!N)_=`with (obj) {
`+_+`
}
`;else if(ul.test(N))throw new I(U);_=(h?_.replace(Ka,""):_).replace(za,"$1").replace($a,"$1;"),_="function("+(N||"obj")+`) {
`+(N?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(o?", __e = _.escape":"")+(h?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+_+`return __p
}`;var L=Na(function(){return B(u,w+"return "+_).apply(l,f)});if(L.source=_,Bi(L))throw L;return L}function Lp(e){return M(e).toLowerCase()}function Op(e){return M(e).toUpperCase()}function Fp(e,n,t){if(e=M(e),e&&(t||n===l))return Os(e);if(!e||!(n=Ce(n)))return e;var r=ze(e),i=ze(n),u=Fs(r,i),f=Ds(r,i)+1;return An(r,u,f).join("")}function Dp(e,n,t){if(e=M(e),e&&(t||n===l))return e.slice(0,Ws(e)+1);if(!e||!(n=Ce(n)))return e;var r=ze(e),i=Ds(r,ze(n))+1;return An(r,0,i).join("")}function Pp(e,n,t){if(e=M(e),e&&(t||n===l))return e.replace(Br,"");if(!e||!(n=Ce(n)))return e;var r=ze(e),i=Fs(r,ze(n));return An(r,i).join("")}function Wp(e,n){var t=oe,r=St;if(X(n)){var i="separator"in n?n.separator:i;t="length"in n?E(n.length):t,r="omission"in n?Ce(n.omission):r}e=M(e);var u=e.length;if(Un(e)){var f=ze(e);u=f.length}if(t>=u)return e;var o=t-Gn(r);if(o<1)return r;var h=f?An(f,0,o).join(""):e.slice(0,o);if(i===l)return h+r;if(f&&(o+=h.length-o),Mi(i)){if(e.slice(o).search(i)){var g,x=h;for(i.global||(i=ni(i.source,M(ns.exec(i))+"g")),i.lastIndex=0;g=i.exec(x);)var _=g.index;h=h.slice(0,_===l?o:_)}}else if(e.indexOf(Ce(i),o)!=o){var v=h.lastIndexOf(i);v>-1&&(h=h.slice(0,v))}return h+r}function Bp(e){return e=M(e),e&&Ya.test(e)?e.replace(Qi,hf):e}var Mp=Zn(function(e,n,t){return e+(t?" ":"")+n.toUpperCase()}),Hi=Su("toUpperCase");function Aa(e,n,t){return e=M(e),n=t?l:n,n===l?af(e)?gf(e):Jl(e):e.match(n)||[]}var Na=O(function(e,n){try{return Ne(e,l,n)}catch(t){return Bi(t)?t:new I(t)}}),Up=fn(function(e,n){return Fe(n,function(t){t=nn(t),an(e,t,Pi(e[t],e))}),e});function Gp(e){var n=e==null?0:e.length,t=A();return e=n?k(e,function(r){if(typeof r[1]!="function")throw new De(Y);return[t(r[0]),r[1]]}):[],O(function(r){for(var i=-1;++i<n;){var u=e[i];if(Ne(u[0],this,r))return Ne(u[1],this,r)}})}function Hp(e){return ho(We(e,T))}function qi(e){return function(){return e}}function qp(e,n){return e==null||e!==e?n:e}var Kp=Iu(),zp=Iu(!0);function ye(e){return e}function Ki(e){return ru(typeof e=="function"?e:We(e,T))}function $p(e){return su(We(e,T))}function Yp(e,n){return uu(e,We(n,T))}var Zp=O(function(e,n){return function(t){return _t(t,e,n)}}),kp=O(function(e,n){return function(t){return _t(e,t,n)}});function zi(e,n,t){var r=se(n),i=Vt(n,r);t==null&&!(X(n)&&(i.length||!r.length))&&(t=n,n=e,e=this,i=Vt(n,se(n)));var u=!(X(t)&&"chain"in t)||!!t.chain,f=cn(e);return Fe(i,function(o){var h=n[o];e[o]=h,f&&(e.prototype[o]=function(){var g=this.__chain__;if(u||g){var x=e(this.__wrapped__),_=x.__actions__=me(this.__actions__);return _.push({func:h,args:arguments,thisArg:e}),x.__chain__=g,x}return h.apply(e,_n([this.value()],arguments))})}),e}function Xp(){return ae._===this&&(ae._=wf),this}function $i(){}function Jp(e){return e=E(e),O(function(n){return au(n,e)})}var Qp=Ai(k),Vp=Ai(Rs),eg=Ai(Zr);function Sa(e){return Ti(e)?kr(nn(e)):To(e)}function ng(e){return function(n){return e==null?l:jn(e,n)}}var tg=Eu(),rg=Eu(!0);function Yi(){return[]}function Zi(){return!1}function ig(){return{}}function sg(){return""}function ug(){return!0}function ag(e,n){if(e=E(e),e<1||e>gn)return[];var t=Qe,r=ce(e,Qe);n=A(n),e-=Qe;for(var i=Qr(r,n);++t<e;)n(t);return i}function lg(e){return R(e)?k(e,nn):Ie(e)?[e]:me(zu(M(e)))}function fg(e){var n=++mf;return M(e)+n}var og=sr(function(e,n){return e+n},0),cg=Ni("ceil"),hg=sr(function(e,n){return e/n},1),dg=Ni("floor");function pg(e){return e&&e.length?Qt(e,ye,fi):l}function gg(e,n){return e&&e.length?Qt(e,A(n,2),fi):l}function xg(e){return js(e,ye)}function _g(e,n){return js(e,A(n,2))}function vg(e){return e&&e.length?Qt(e,ye,di):l}function mg(e,n){return e&&e.length?Qt(e,A(n,2),di):l}var bg=sr(function(e,n){return e*n},1),wg=Ni("round"),yg=sr(function(e,n){return e-n},0);function Ag(e){return e&&e.length?Jr(e,ye):0}function Ng(e,n){return e&&e.length?Jr(e,A(n,2)):0}return s.after=$h,s.ary=ta,s.assign=Od,s.assignIn=xa,s.assignInWith=vr,s.assignWith=Fd,s.at=Dd,s.before=ra,s.bind=Pi,s.bindAll=Up,s.bindKey=ia,s.castArray=id,s.chain=Vu,s.chunk=dc,s.compact=pc,s.concat=gc,s.cond=Gp,s.conforms=Hp,s.constant=qi,s.countBy=Ah,s.create=Pd,s.curry=sa,s.curryRight=ua,s.debounce=aa,s.defaults=Wd,s.defaultsDeep=Bd,s.defer=Yh,s.delay=Zh,s.difference=xc,s.differenceBy=_c,s.differenceWith=vc,s.drop=mc,s.dropRight=bc,s.dropRightWhile=wc,s.dropWhile=yc,s.fill=Ac,s.filter=Sh,s.flatMap=Rh,s.flatMapDeep=Eh,s.flatMapDepth=Th,s.flatten=ku,s.flattenDeep=Nc,s.flattenDepth=Sc,s.flip=kh,s.flow=Kp,s.flowRight=zp,s.fromPairs=Cc,s.functions=zd,s.functionsIn=$d,s.groupBy=jh,s.initial=Rc,s.intersection=Ec,s.intersectionBy=Tc,s.intersectionWith=jc,s.invert=Zd,s.invertBy=kd,s.invokeMap=Oh,s.iteratee=Ki,s.keyBy=Fh,s.keys=se,s.keysIn=we,s.map=hr,s.mapKeys=Jd,s.mapValues=Qd,s.matches=$p,s.matchesProperty=Yp,s.memoize=pr,s.merge=Vd,s.mergeWith=_a,s.method=Zp,s.methodOf=kp,s.mixin=zi,s.negate=gr,s.nthArg=Jp,s.omit=ep,s.omitBy=np,s.once=Xh,s.orderBy=Dh,s.over=Qp,s.overArgs=Jh,s.overEvery=Vp,s.overSome=eg,s.partial=Wi,s.partialRight=la,s.partition=Ph,s.pick=tp,s.pickBy=va,s.property=Sa,s.propertyOf=ng,s.pull=Dc,s.pullAll=Ju,s.pullAllBy=Pc,s.pullAllWith=Wc,s.pullAt=Bc,s.range=tg,s.rangeRight=rg,s.rearg=Qh,s.reject=Mh,s.remove=Mc,s.rest=Vh,s.reverse=Fi,s.sampleSize=Gh,s.set=ip,s.setWith=sp,s.shuffle=Hh,s.slice=Uc,s.sortBy=zh,s.sortedUniq=Yc,s.sortedUniqBy=Zc,s.split=Rp,s.spread=ed,s.tail=kc,s.take=Xc,s.takeRight=Jc,s.takeRightWhile=Qc,s.takeWhile=Vc,s.tap=ph,s.throttle=nd,s.thru=cr,s.toArray=da,s.toPairs=ma,s.toPairsIn=ba,s.toPath=lg,s.toPlainObject=ga,s.transform=up,s.unary=td,s.union=eh,s.unionBy=nh,s.unionWith=th,s.uniq=rh,s.uniqBy=ih,s.uniqWith=sh,s.unset=ap,s.unzip=Di,s.unzipWith=Qu,s.update=lp,s.updateWith=fp,s.values=Jn,s.valuesIn=op,s.without=uh,s.words=Aa,s.wrap=rd,s.xor=ah,s.xorBy=lh,s.xorWith=fh,s.zip=oh,s.zipObject=ch,s.zipObjectDeep=hh,s.zipWith=dh,s.entries=ma,s.entriesIn=ba,s.extend=xa,s.extendWith=vr,zi(s,s),s.add=og,s.attempt=Na,s.camelCase=pp,s.capitalize=wa,s.ceil=cg,s.clamp=cp,s.clone=sd,s.cloneDeep=ad,s.cloneDeepWith=ld,s.cloneWith=ud,s.conformsTo=fd,s.deburr=ya,s.defaultTo=qp,s.divide=hg,s.endsWith=gp,s.eq=Ye,s.escape=xp,s.escapeRegExp=_p,s.every=Nh,s.find=Ch,s.findIndex=Yu,s.findKey=Md,s.findLast=Ih,s.findLastIndex=Zu,s.findLastKey=Ud,s.floor=dg,s.forEach=ea,s.forEachRight=na,s.forIn=Gd,s.forInRight=Hd,s.forOwn=qd,s.forOwnRight=Kd,s.get=Ui,s.gt=od,s.gte=cd,s.has=Yd,s.hasIn=Gi,s.head=Xu,s.identity=ye,s.includes=Lh,s.indexOf=Ic,s.inRange=hp,s.invoke=Xd,s.isArguments=Fn,s.isArray=R,s.isArrayBuffer=hd,s.isArrayLike=be,s.isArrayLikeObject=V,s.isBoolean=dd,s.isBuffer=Nn,s.isDate=pd,s.isElement=gd,s.isEmpty=xd,s.isEqual=_d,s.isEqualWith=vd,s.isError=Bi,s.isFinite=md,s.isFunction=cn,s.isInteger=fa,s.isLength=xr,s.isMap=oa,s.isMatch=bd,s.isMatchWith=wd,s.isNaN=yd,s.isNative=Ad,s.isNil=Sd,s.isNull=Nd,s.isNumber=ca,s.isObject=X,s.isObjectLike=Q,s.isPlainObject=At,s.isRegExp=Mi,s.isSafeInteger=Cd,s.isSet=ha,s.isString=_r,s.isSymbol=Ie,s.isTypedArray=Xn,s.isUndefined=Id,s.isWeakMap=Rd,s.isWeakSet=Ed,s.join=Lc,s.kebabCase=vp,s.last=Me,s.lastIndexOf=Oc,s.lowerCase=mp,s.lowerFirst=bp,s.lt=Td,s.lte=jd,s.max=pg,s.maxBy=gg,s.mean=xg,s.meanBy=_g,s.min=vg,s.minBy=mg,s.stubArray=Yi,s.stubFalse=Zi,s.stubObject=ig,s.stubString=sg,s.stubTrue=ug,s.multiply=bg,s.nth=Fc,s.noConflict=Xp,s.noop=$i,s.now=dr,s.pad=wp,s.padEnd=yp,s.padStart=Ap,s.parseInt=Np,s.random=dp,s.reduce=Wh,s.reduceRight=Bh,s.repeat=Sp,s.replace=Cp,s.result=rp,s.round=wg,s.runInContext=c,s.sample=Uh,s.size=qh,s.snakeCase=Ip,s.some=Kh,s.sortedIndex=Gc,s.sortedIndexBy=Hc,s.sortedIndexOf=qc,s.sortedLastIndex=Kc,s.sortedLastIndexBy=zc,s.sortedLastIndexOf=$c,s.startCase=Ep,s.startsWith=Tp,s.subtract=yg,s.sum=Ag,s.sumBy=Ng,s.template=jp,s.times=ag,s.toFinite=hn,s.toInteger=E,s.toLength=pa,s.toLower=Lp,s.toNumber=Ue,s.toSafeInteger=Ld,s.toString=M,s.toUpper=Op,s.trim=Fp,s.trimEnd=Dp,s.trimStart=Pp,s.truncate=Wp,s.unescape=Bp,s.uniqueId=fg,s.upperCase=Mp,s.upperFirst=Hi,s.each=ea,s.eachRight=na,s.first=Xu,zi(s,(function(){var e={};return Ve(s,function(n,t){H.call(s.prototype,t)||(e[t]=n)}),e})(),{chain:!1}),s.VERSION=Te,Fe(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){s[e].placeholder=s}),Fe(["drop","take"],function(e,n){D.prototype[e]=function(t){t=t===l?1:ie(E(t),0);var r=this.__filtered__&&!n?new D(this):this.clone();return r.__filtered__?r.__takeCount__=ce(t,r.__takeCount__):r.__views__.push({size:ce(t,Qe),type:e+(r.__dir__<0?"Right":"")}),r},D.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}}),Fe(["filter","map","takeWhile"],function(e,n){var t=n+1,r=t==Sn||t==ki;D.prototype[e]=function(i){var u=this.clone();return u.__iteratees__.push({iteratee:A(i,3),type:t}),u.__filtered__=u.__filtered__||r,u}}),Fe(["head","last"],function(e,n){var t="take"+(n?"Right":"");D.prototype[e]=function(){return this[t](1).value()[0]}}),Fe(["initial","tail"],function(e,n){var t="drop"+(n?"":"Right");D.prototype[e]=function(){return this.__filtered__?new D(this):this[t](1)}}),D.prototype.compact=function(){return this.filter(ye)},D.prototype.find=function(e){return this.filter(e).head()},D.prototype.findLast=function(e){return this.reverse().find(e)},D.prototype.invokeMap=O(function(e,n){return typeof e=="function"?new D(this):this.map(function(t){return _t(t,e,n)})}),D.prototype.reject=function(e){return this.filter(gr(A(e)))},D.prototype.slice=function(e,n){e=E(e);var t=this;return t.__filtered__&&(e>0||n<0)?new D(t):(e<0?t=t.takeRight(-e):e&&(t=t.drop(e)),n!==l&&(n=E(n),t=n<0?t.dropRight(-n):t.take(n-e)),t)},D.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},D.prototype.toArray=function(){return this.take(Qe)},Ve(D.prototype,function(e,n){var t=/^(?:filter|find|map|reject)|While$/.test(n),r=/^(?:head|last)$/.test(n),i=s[r?"take"+(n=="last"?"Right":""):n],u=r||/^find/.test(n);i&&(s.prototype[n]=function(){var f=this.__wrapped__,o=r?[1]:arguments,h=f instanceof D,g=o[0],x=h||R(f),_=function(F){var W=i.apply(s,_n([F],o));return r&&v?W[0]:W};x&&t&&typeof g=="function"&&g.length!=1&&(h=x=!1);var v=this.__chain__,w=!!this.__actions__.length,N=u&&!v,L=h&&!w;if(!u&&x){f=L?f:new D(this);var S=e.apply(f,o);return S.__actions__.push({func:cr,args:[_],thisArg:l}),new Pe(S,v)}return N&&L?e.apply(this,o):(S=this.thru(_),N?r?S.value()[0]:S.value():S)})}),Fe(["pop","push","shift","sort","splice","unshift"],function(e){var n=Wt[e],t=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);s.prototype[e]=function(){var i=arguments;if(r&&!this.__chain__){var u=this.value();return n.apply(R(u)?u:[],i)}return this[t](function(f){return n.apply(R(f)?f:[],i)})}}),Ve(D.prototype,function(e,n){var t=s[n];if(t){var r=t.name+"";H.call(zn,r)||(zn[r]=[]),zn[r].push({name:n,func:t})}}),zn[ir(l,Le).name]=[{name:"wrapper",func:l}],D.prototype.clone=Wf,D.prototype.reverse=Bf,D.prototype.value=Mf,s.prototype.at=gh,s.prototype.chain=xh,s.prototype.commit=_h,s.prototype.next=vh,s.prototype.plant=bh,s.prototype.reverse=wh,s.prototype.toJSON=s.prototype.valueOf=s.prototype.value=yh,s.prototype.first=s.prototype.head,ot&&(s.prototype[ot]=mh),s}),Hn=xf();Cn?((Cn.exports=Hn)._=Hn,Kr._=Hn):ae._=Hn}).call(Hg)})(Nt,Nt.exports)),Nt.exports}var Kg=qg();const zg=({transaction:P,onClose:te})=>{const l=()=>{window.print()},Te=P.sale_items.reduce((U,Z)=>U+parseFloat(Z.total),0);return a.jsx("div",{className:"receipt-print-wrapper fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4 print:static print:block print:bg-transparent print:p-0",children:a.jsxs("div",{className:"receipt-container max-h-[90vh] w-full max-w-md overflow-y-auto rounded-lg bg-white p-6 shadow-xl print:max-h-none print:w-[80mm] print:max-w-[80mm] print:overflow-visible print:rounded-none print:p-0 print:shadow-none",children:[a.jsxs("div",{className:"mb-4 text-center print:mb-2",children:[a.jsx("div",{className:"mx-auto mb-2 w-full border-b-2 border-dashed border-black print:mb-1 print:border-b"}),a.jsx("h1",{className:"text-xl font-bold tracking-wide uppercase print:text-base",children:"NOKWARFO NYAME COLD STORE"}),a.jsx("p",{className:"text-sm text-gray-600 print:text-xs print:text-black",children:"Kasoa"}),a.jsxs("p",{className:"text-sm text-gray-600 print:text-xs print:text-black",children:["Tel: ","024 375 6588 / 024 693 7080 / 055 515 1777"]}),a.jsx("div",{className:"mx-auto mt-2 w-full border-b-2 border-dashed border-black print:mt-1 print:border-b"})]}),a.jsx("div",{className:"mb-4 text-center print:mb-2",children:a.jsx("span",{className:"inline-block rounded bg-red-100 px-4 py-1 text-lg font-bold text-red-700 print:border print:border-black print:bg-transparent print:px-0 print:py-0 print:text-sm print:text-black",children:"CREDIT SALE"})}),a.jsxs("div",{className:"mb-4 space-y-2 text-sm print:mb-2 print:space-y-1 print:text-[10px]",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"font-semibold",children:"Receipt #:"}),a.jsx("span",{className:"font-mono",children:P.id})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"font-semibold",children:"Date:"}),a.jsx("span",{children:P.date})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"font-semibold",children:"Creditor:"}),a.jsx("span",{className:"max-w-[60%] truncate text-right",children:P.customer||"Walk-in Customer"})]})]}),a.jsx("div",{className:"my-3 border-t border-dashed border-gray-400 print:my-1 print:border-black"}),a.jsxs("table",{className:"mb-4 w-full text-sm print:mb-2 print:text-[11px]",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b-2 border-black",children:[a.jsx("th",{className:"pb-2 text-left font-bold print:pb-1",children:"Item"}),a.jsx("th",{className:"pb-2 text-center font-bold print:pb-1",children:"Qty"}),a.jsx("th",{className:"pb-2 text-right font-bold print:pb-1",children:"Price"}),a.jsx("th",{className:"pb-2 text-right font-bold print:pb-1",children:"Total"})]})}),a.jsx("tbody",{children:P.sale_items.map((U,Z)=>a.jsxs("tr",{className:"border-b border-gray-200 print:border-gray-400",children:[a.jsx("td",{className:"py-2 pr-1 print:max-w-[80px] print:truncate print:py-1",children:U.product}),a.jsx("td",{className:"py-2 text-center print:py-1",children:U.quantity}),a.jsx("td",{className:"py-2 text-right print:py-1",children:parseFloat(U.unit_selling_price).toFixed(2)}),a.jsx("td",{className:"py-2 text-right font-medium print:py-1",children:parseFloat(U.total).toFixed(2)})]},Z))})]}),a.jsxs("div",{className:"space-y-2 border-t-2 border-black pt-3 print:space-y-1 print:pt-2",children:[a.jsxs("div",{className:"flex justify-between text-base print:text-[10px]",children:[a.jsx("span",{className:"font-semibold",children:"Subtotal:"}),a.jsxs("span",{children:["GH₵ ",Te.toFixed(2)]})]}),a.jsxs("div",{className:"flex justify-between text-base print:text-[10px]",children:[a.jsx("span",{className:"font-semibold",children:"Amount Paid:"}),a.jsxs("span",{children:["GH₵ ",parseFloat(P.amount_paid).toFixed(2)]})]}),a.jsx("div",{className:"my-2 border-t border-dashed border-gray-400 print:my-1 print:border-black"}),a.jsxs("div",{className:"flex justify-between text-lg font-bold print:text-xs",children:[a.jsx("span",{className:"text-red-600 print:text-black",children:"BALANCE DUE:"}),a.jsxs("span",{className:"text-red-600 print:text-black",children:["GH₵ ",parseFloat(P.amount_owed).toFixed(2)]})]})]}),a.jsxs("div",{className:"mt-6 border-t-2 border-dashed border-black pt-4 text-center print:mt-3 print:pt-2",children:[a.jsx("p",{className:"text-sm text-gray-500 print:text-[10px] print:text-black",children:"Goods sold are NOT returnable."}),a.jsx("p",{className:"mt-2 text-sm font-semibold print:mt-1 print:text-[10px]",children:"Thank You For Your Patronage!"}),a.jsx("div",{className:"mt-3 text-[10px] text-gray-400 print:mt-2 print:text-[10px] print:text-black",children:"*** CREDIT TRANSACTION ***"})]}),a.jsxs("div",{className:"mt-6 flex gap-3 print:hidden",children:[a.jsxs(ke,{onClick:l,className:"flex-1 bg-blue-600 hover:bg-blue-700",children:[a.jsx(Oa,{className:"mr-2 h-4 w-4"}),"Print Receipt"]}),a.jsxs(ke,{onClick:te,variant:"outline",className:"flex-1",children:[a.jsx(La,{className:"mr-2 h-4 w-4"}),"Close"]})]})]})})},$g=({transaction:P,onClose:te})=>{const l=()=>{window.print()},Te=P.sale_items.reduce((U,Z)=>U+parseFloat(Z.total),0);return a.jsx("div",{className:"receipt-print-wrapper fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4 print:static print:block print:bg-transparent print:p-0",children:a.jsxs("div",{className:"receipt-container max-h-[90vh] w-full max-w-md overflow-y-auto rounded-lg bg-white p-6 shadow-xl print:max-h-none print:w-[80mm] print:max-w-[80mm] print:overflow-visible print:rounded-none print:p-0 print:shadow-none",children:[a.jsxs("div",{className:"mb-4 text-center print:mb-2",children:[a.jsx("div",{className:"mx-auto mb-2 w-full border-b-2 border-dashed border-black print:mb-1 print:border-b"}),a.jsx("h1",{className:"text-xl font-bold tracking-wide uppercase print:text-base",children:"NOKWARFO NYAME COLD STORE"}),a.jsx("p",{className:"text-sm text-gray-600 print:text-xs print:text-black",children:"Kasoa"}),a.jsxs("p",{className:"text-sm text-gray-600 print:text-xs print:text-black",children:["Tel: ","024 375 6588 / 024 693 7080 / 055 515 1777"]}),a.jsx("div",{className:"mx-auto mt-2 w-full border-b-2 border-dashed border-black print:mt-1 print:border-b"})]}),a.jsx("div",{className:"mb-4 text-center print:mb-2",children:a.jsx("span",{className:"inline-block rounded bg-green-100 px-4 py-1 text-lg font-bold text-green-700 print:border print:border-black print:bg-transparent print:px-0 print:py-0 print:text-sm print:text-black",children:"CASH SALE"})}),a.jsxs("div",{className:"mb-4 space-y-2 text-sm print:mb-2 print:space-y-1 print:text-[10px]",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"font-semibold",children:"Receipt #:"}),a.jsx("span",{className:"font-mono",children:P.id})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"font-semibold",children:"Date:"}),a.jsx("span",{children:P.date})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"font-semibold",children:"Customer:"}),a.jsx("span",{className:"max-w-[60%] truncate text-right",children:P.customer||"Walk-in Customer"})]})]}),a.jsx("div",{className:"my-3 border-t border-dashed border-gray-400 print:my-1 print:border-black"}),a.jsxs("table",{className:"mb-4 w-full text-sm print:mb-2 print:text-[11px]",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b-2 border-black",children:[a.jsx("th",{className:"pb-2 text-left font-bold print:pb-1",children:"Item"}),a.jsx("th",{className:"pb-2 text-center font-bold print:pb-1",children:"Qty"}),a.jsx("th",{className:"pb-2 text-right font-bold print:pb-1",children:"Price"}),a.jsx("th",{className:"pb-2 text-right font-bold print:pb-1",children:"Total"})]})}),a.jsx("tbody",{children:P.sale_items.map((U,Z)=>a.jsxs("tr",{className:"border-b border-gray-200 print:border-gray-400",children:[a.jsx("td",{className:"py-2 pr-1 print:max-w-[80px] print:truncate print:py-1",children:U.product}),a.jsx("td",{className:"py-2 text-center print:py-1",children:U.quantity}),a.jsx("td",{className:"py-2 text-right print:py-1",children:parseFloat(U.unit_selling_price).toFixed(2)}),a.jsx("td",{className:"py-2 text-right font-medium print:py-1",children:parseFloat(U.total).toFixed(2)})]},Z))})]}),a.jsxs("div",{className:"space-y-2 border-t-2 border-black pt-3 print:space-y-1 print:pt-2",children:[a.jsxs("div",{className:"flex justify-between text-lg font-bold print:text-sm",children:[a.jsx("span",{children:"TOTAL:"}),a.jsxs("span",{children:["GH₵ ",Te.toFixed(2)]})]}),a.jsx("div",{className:"my-2 border-t border-dashed border-gray-400 print:my-1 print:border-black"}),a.jsxs("div",{className:"flex justify-between text-base text-green-600 print:text-xs print:text-black",children:[a.jsx("span",{className:"font-semibold",children:"PAID IN FULL"}),a.jsx("span",{children:"✓"})]})]}),a.jsxs("div",{className:"mt-6 border-t-2 border-dashed border-black pt-4 text-center print:mt-3 print:pt-2",children:[a.jsx("p",{className:"text-sm text-gray-500 print:text-[10px] print:text-black",children:"Goods sold are NOT returnable."}),a.jsx("p",{className:"mt-2 text-sm font-semibold print:mt-1 print:text-[10px]",children:"Thank You For Your Patronage!"}),a.jsx("div",{className:"mt-3 text-[10px] text-gray-400 print:mt-2 print:text-[10px] print:text-black",children:"*** INSTANT PAYMENT ***"})]}),a.jsxs("div",{className:"mt-6 flex gap-3 print:hidden",children:[a.jsxs(ke,{onClick:l,className:"flex-1 bg-blue-600 hover:bg-blue-700",children:[a.jsx(Oa,{className:"mr-2 h-4 w-4"}),"Print Receipt"]}),a.jsxs(ke,{onClick:te,variant:"outline",className:"flex-1",children:[a.jsx(La,{className:"mr-2 h-4 w-4"}),"Close"]})]})]})})},Yg=({searchTerm:P,onSearchChange:te})=>a.jsx("div",{className:"mb-4 flex items-center space-x-2",children:a.jsxs("div",{className:"relative flex-1",children:[a.jsx(Ug,{className:"text-muted-foreground absolute top-2.5 left-2 h-4 w-4"}),a.jsx(pn,{placeholder:"Search by Transaction ID, Customer, or Product...",value:P,onChange:l=>te(l.target.value),className:"pl-8"})]})}),Zg=({sales_transactions:P})=>{const[te,l]=ne.useState(null),[Te,y]=ne.useState(null),[J,Y]=ne.useState(""),U=new Date().toISOString().slice(0,10),Z=new Date(Date.now()-2880*60*1e3).toISOString().slice(0,10),[Ae,je]=ne.useState(Z),[T,Xe]=ne.useState(U),G=P.current_page,fe=ne.useCallback(Kg.debounce((C,m,j,de)=>{Ia.get(route("sales-transactions.index"),{search:C,start_date:m,end_date:j,page:de},{preserveState:!0,preserveScroll:!0,replace:!0})},500),[]);ne.useEffect(()=>{fe(J,Ae,T,G)},[J,Ae,T,G,fe]);const _e=(C,m)=>{m==="start"?je(C):Xe(C)},ue=C=>{window.confirm("Are you sure you want to delete this transaction?")&&Ia.delete(route("sales-transactions.destroy",C))},Le=C=>{l(C),C.status==="Completed"&&parseFloat(C.amount_owed)===0?y("instant"):y("credit")},Je=()=>{l(null),y(null)};return a.jsxs(a.Fragment,{children:[a.jsx(Bg,{startDate:Ae,endDate:T,onChange:_e}),a.jsxs(Nr,{children:[a.jsxs(Sr,{children:[a.jsx(Cr,{children:"Sales Transactions"}),a.jsx(Yg,{searchTerm:J,onSearchChange:Y})]}),a.jsxs(Ir,{children:[a.jsxs(Dg,{children:[a.jsx(Pg,{children:a.jsxs(Ta,{children:[a.jsx(Ge,{children:"Transaction ID"}),a.jsx(Ge,{children:"Date"}),a.jsx(Ge,{children:"Customer"}),a.jsx(Ge,{children:"Product"}),a.jsx(Ge,{children:"Quantity"}),a.jsx(Ge,{children:"Unit Price"}),a.jsx(Ge,{children:"Total"}),a.jsx(Ge,{children:"Payment Type"}),a.jsx(Ge,{children:"Amount Paid"}),a.jsx(Ge,{children:"Amount Owed"}),a.jsx(Ge,{children:"Status"}),a.jsx(Ge,{children:"Actions"})]})}),a.jsx(Wg,{children:P.data.map(C=>a.jsxs(Ta,{children:[a.jsx(He,{className:"font-medium",children:C.id}),a.jsx(He,{children:C.date}),a.jsx(He,{children:C.customer}),a.jsx(He,{children:C.sale_items.map((m,j)=>a.jsx("div",{children:m.product},j))}),a.jsx(He,{children:C.sale_items.map((m,j)=>a.jsx("div",{children:m.quantity},j))}),a.jsx(He,{children:C.sale_items.map((m,j)=>a.jsxs("div",{children:["GH₵",parseFloat(m.unit_selling_price).toFixed(2)]},j))}),a.jsx(He,{className:"font-medium",children:C.sale_items.map((m,j)=>a.jsxs("div",{children:["GH₵",parseFloat(m.total).toFixed(2)]},j))}),a.jsx(He,{children:a.jsx(Ea,{variant:C.status==="Partial"?"secondary":C.payment_type==="Cash"?"default":"secondary",children:C.status==="Partial"?"Partial":C.payment_type})}),a.jsxs(He,{children:["GH₵",parseFloat(C.amount_paid).toFixed(2)]}),a.jsxs(He,{children:["GH₵",parseFloat(C.amount_owed).toFixed(2)]}),a.jsx(He,{children:a.jsx(Ea,{variant:C.status==="Completed"?"default":C.status==="Partial"?"secondary":C.status==="Credit"?"outline":"secondary",children:C.status})}),a.jsx(He,{children:a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(ke,{variant:"outline",size:"sm",onClick:()=>Le(C),className:"text-blue-600 hover:text-blue-800",children:[a.jsx(Ig,{className:"mr-1 h-4 w-4"}),"Receipt"]}),a.jsx(ke,{variant:"destructive",size:"sm",onClick:()=>ue(C.id),className:"text-white",children:"Delete"})]})})]},C.id))})]}),P.data.length===0?a.jsx("div",{className:"text-muted-foreground py-8 text-center",children:"No transactions found matching your search."}):a.jsxs("div",{className:"my-3 flex items-center justify-center gap-4",children:[P.prev_page_url&&a.jsx(Ra,{preserveScroll:!0,preserveState:!0,href:P.prev_page_url,className:"rounded border px-4 py-2 hover:bg-gray-100",children:"« Previous"}),a.jsxs("span",{className:"px-4 py-2 font-medium",children:["Page ",P.current_page]}),P.next_page_url&&a.jsx(Ra,{preserveScroll:!0,preserveState:!0,href:P.next_page_url,className:"rounded border px-4 py-2 hover:bg-gray-100",children:"Next »"})]})]})]}),te&&Te==="instant"&&a.jsx($g,{transaction:te,onClose:Je}),te&&Te==="credit"&&a.jsx(zg,{transaction:te,onClose:Je})]})};function ox({sales_transactions:P=[],products:te=[],customers:l=[]}){const[Te,y]=ne.useState(!1),[J,Y]=ne.useState([{product_id:"",qty:"",unit_selling_price:"",total:""}]),[U,Z]=ne.useState(""),[Ae,je]=ne.useState(""),[T,Xe]=ne.useState("cash"),G=Sg({customer_id:"",customer_name:"",transaction_date:new Date().toISOString().split("T")[0],items:J,amount_paid:"",due_date:"",payment_type:"cash"});ne.useEffect(()=>{G.setData("items",J)},[J]),ne.useEffect(()=>{G.setData("amount_paid",U)},[U]),ne.useEffect(()=>{G.setData("due_date",Ae)},[Ae]),ne.useEffect(()=>{G.setData("payment_type",T)},[T]);const fe=J.reduce((m,j)=>m+(parseFloat(j.total)||0),0);ne.useEffect(()=>{T==="cash"&&(Z(fe.toString()),G.setError("amount_paid",void 0)),T==="credit"&&(Z("0"),G.setError("amount_paid",void 0))},[T,fe]);const _e=()=>{Y([{product_id:"",qty:"",unit_selling_price:"",total:""}]),Z(""),je(""),Xe("cash"),G.reset(),G.setData({customer_id:"",customer_name:"",transaction_date:new Date().toISOString().split("T")[0],items:[{product_id:"",qty:"",unit_selling_price:"",total:""}],amount_paid:"",due_date:"",payment_type:"cash"}),y(!0)},ue=()=>{y(!1),Y([{product_id:"",qty:"",unit_selling_price:"",total:""}]),Z(""),je(""),Xe("cash"),G.reset(),G.setData({customer_id:"",customer_name:"",transaction_date:new Date().toISOString().split("T")[0],items:[{product_id:"",qty:"",unit_selling_price:"",total:""}],amount_paid:"",due_date:"",payment_type:"cash"})},Le=[{title:"Sales Transactions",href:"/sales-transactions"}],Je=P.data.filter(m=>m.status==="Completed").reduce((m,j)=>m+parseFloat(j.amount_paid),0),C=P.data.filter(m=>m.payment_type==="Credit").reduce((m,j)=>m+parseFloat(j.total),0)+P.data.filter(m=>m.payment_type==="Partial").reduce((m,j)=>m+parseFloat(j.amount_owed),0);return a.jsx(Rg,{breadcrumbs:Le,children:a.jsxs("div",{className:"min-h-screen space-y-6 bg-gray-100 p-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h1",{className:"text-3xl font-bold",children:"Sales & Transactions"}),a.jsx(ke,{onClick:_e,children:"Add Transaction"})]}),a.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-3",children:[a.jsxs(Nr,{children:[a.jsx(Sr,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:a.jsx(Cr,{className:"text-sm font-medium",children:"Total Sales"})}),a.jsxs(Ir,{children:[a.jsxs("div",{className:"text-2xl font-bold",children:["GH₵",(Je+C).toFixed(2)]}),a.jsx("p",{className:"text-muted-foreground text-xs",children:"All transactions"})]})]}),a.jsxs(Nr,{children:[a.jsx(Sr,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:a.jsx(Cr,{className:"text-sm font-medium",children:"Cash Sales"})}),a.jsxs(Ir,{children:[a.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["GH₵",Je.toFixed(2)]}),a.jsx("p",{className:"text-muted-foreground text-xs",children:"Cash payments"})]})]}),a.jsxs(Nr,{children:[a.jsx(Sr,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:a.jsx(Cr,{className:"text-sm font-medium",children:"Credit Sales"})}),a.jsxs(Ir,{children:[a.jsxs("div",{className:"text-2xl font-bold text-orange-600",children:["GH₵",C.toFixed(2)]}),a.jsx("p",{className:"text-muted-foreground text-xs",children:"Credit payments"})]})]})]}),a.jsx(Zg,{sales_transactions:P}),a.jsx(Gg,{open:Te,onClose:ue,products:te,customers:l,form:G,items:J,setItems:Y,amountPaid:U,setAmountPaid:Z,dueDate:Ae,setDueDate:je,paymentType:T,setPaymentType:Xe,runningTotal:fe})]})})}export{ox as default};
