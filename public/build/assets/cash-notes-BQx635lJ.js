import{r as h,u as ce,j as e,L as V,a as O}from"./app-BnH38fZV.js";import{c as B,F as x}from"./createLucideIcon-BtnL1mUF.js";import{C as g,c as N,a as f,b}from"./card-CpmHGbsc.js";import{D as W,b as J,c as K,d as Q}from"./dialog-Dq9d3o5K.js";import{I}from"./input-Cog3RW_M.js";import{L as k}from"./label-AhG-VvZ5.js";import{T as xe,a as me,b as E,c as D,d as he,e as v}from"./table-DbdgEq6_.js";import{T as ue}from"./textarea-V_S9e6X-.js";import{A as pe,W as je,T as ge}from"./app-layout-CGJfXk6C.js";import{D as Ne}from"./DateRangePicker-DLMwdqgZ.js";import{P as q}from"./plus-B_i5jZEa.js";import{S as A}from"./square-pen-D4M5yto8.js";import{D as fe}from"./dollar-sign-BFe5CrLd.js";import{C as be}from"./calendar-BGEu4eEj.js";import{E as ve}from"./eye-C_K_-kjf.js";import{T as ye}from"./trash-2-DZTaycrW.js";import"./index-B6yMYTsw.js";import"./index-B1pbROxw.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],we=B("ArrowDown",_e);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],Ce=B("ArrowUp",Se),T=[{key:"note_200",value:200,label:"GH₵200"},{key:"note_100",value:100,label:"GH₵100"},{key:"note_50",value:50,label:"GH₵50"},{key:"note_20",value:20,label:"GH₵20"},{key:"note_10",value:10,label:"GH₵10"},{key:"note_5",value:5,label:"GH₵5"}];function z({isOpen:r,onClose:H,onSubmit:o,title:n,submitLabel:l,data:u,setData:m,errors:y,processing:p}){const F=T.reduce((s,a)=>s+(parseInt(u[a.key])||0)*a.value,0);return e.jsx(W,{open:r,onOpenChange:H,children:e.jsxs(J,{className:"max-w-lg max-h-[90vh] overflow-y-auto",children:[e.jsx(K,{className:"pt-2",children:e.jsx(Q,{children:n})}),e.jsxs("form",{onSubmit:o,className:"space-y-4 py-4",children:[e.jsxs("div",{children:[e.jsx(k,{htmlFor:"record_date",children:"Date"}),e.jsx(I,{id:"record_date",type:"date",value:u.record_date,onChange:s=>m("record_date",s.target.value),required:!0}),y.record_date&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:y.record_date})]}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:T.map(s=>e.jsxs("div",{children:[e.jsx(k,{htmlFor:s.key,children:s.label}),e.jsx(I,{id:s.key,type:"number",min:"0",value:u[s.key],onChange:a=>m(s.key,parseInt(a.target.value)||0),className:"text-right"})]},s.key))}),e.jsx("div",{className:"rounded-lg bg-blue-50 p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-blue-700",children:"Running Total"}),e.jsxs("span",{className:"text-2xl font-bold text-blue-700",children:["GH₵",F.toLocaleString("en-GH",{minimumFractionDigits:2})]})]})}),e.jsxs("div",{children:[e.jsx(k,{htmlFor:"notes",children:"Notes (optional)"}),e.jsx(ue,{id:"notes",value:u.notes,onChange:s=>m("notes",s.target.value),placeholder:"Any additional notes...",rows:2})]}),e.jsx("div",{className:"pt-2 pb-2",children:e.jsx(x,{type:"submit",className:"w-full",disabled:p,children:p?"Saving...":l})})]})]})})}function ze({today:r,today_formatted:H,records:o,analytics:n,filters:l}){const[u,m]=h.useState(!1),[y,p]=h.useState(!1),[F,s]=h.useState(!1),[a,_]=h.useState(null),[w,X]=h.useState((l==null?void 0:l.filter_date)||""),[d,Y]=h.useState((l==null?void 0:l.start_date)||""),[c,Z]=h.useState((l==null?void 0:l.end_date)||""),{data:M,setData:S,post:ee,put:te,processing:R,errors:P,reset:G}=ce({record_date:new Date().toISOString().split("T")[0],note_200:0,note_100:0,note_50:0,note_20:0,note_10:0,note_5:0,notes:""}),se=[{title:"Cash Notes",href:"/cash-notes"}];function $(){G(),S({record_date:new Date().toISOString().split("T")[0],note_200:0,note_100:0,note_50:0,note_20:0,note_10:0,note_5:0,notes:""}),m(!0)}function L(t){_(t),S({record_date:t.record_date,note_200:t.note_200,note_100:t.note_100,note_50:t.note_50,note_20:t.note_20,note_10:t.note_10,note_5:t.note_5,notes:t.notes||""}),p(!0)}function ae(t){_(t),s(!0)}function ne(t){t.preventDefault(),ee(route("cash-notes.store"),{onSuccess:()=>{G(),m(!1)}})}function le(t){t.preventDefault(),te(route("cash-notes.update",a.id),{onSuccess:()=>{G(),p(!1),_(null)}})}function re(t){confirm("Are you sure you want to delete this record?")&&O.delete(route("cash-notes.destroy",t),{preserveScroll:!0})}function U(t){X(t),O.get(route("cash-notes.index"),{filter_date:t||void 0,start_date:d||void 0,end_date:c||void 0},{preserveState:!0,preserveScroll:!0,replace:!0})}function oe(t,i){const j=i==="start"?t:d,C=i==="end"?t:c;i==="start"&&Y(t),i==="end"&&Z(t),O.get(route("cash-notes.index"),{start_date:j||void 0,end_date:C||void 0,filter_date:w||void 0},{preserveState:!0,preserveScroll:!0,replace:!0})}function ie(){r?L(r):$()}function de(t){if(!t)return"";const i=[];return T.forEach(j=>{const C=t[j.key];C>0&&i.push(`${j.value}×${C}`)}),i.join(" • ")||"No notes recorded"}return e.jsx(pe,{breadcrumbs:se,children:e.jsxs("div",{className:"min-h-screen space-y-6 bg-gray-100 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Cash Notes"}),e.jsxs(x,{onClick:$,children:[e.jsx(q,{className:"mr-2 h-4 w-4"}),"Record Cash Notes"]})]}),e.jsx(g,{className:"border-2 border-blue-200 bg-gradient-to-r from-blue-50 to-white",children:e.jsx(N,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"rounded-full bg-blue-100 p-3",children:e.jsx(je,{className:"h-8 w-8 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 uppercase tracking-wide",children:"Today's Total"}),e.jsx("p",{className:"text-xs text-gray-400 mb-1",children:H}),e.jsxs("p",{className:"text-4xl font-bold text-gray-900",children:["GH₵",r?parseFloat(r.total).toLocaleString("en-GH",{minimumFractionDigits:2}):"0.00"]}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:r?de(r):"No cash notes recorded today"})]})]}),e.jsx(x,{onClick:ie,variant:r?"outline":"default",children:r?e.jsxs(e.Fragment,{children:[e.jsx(A,{className:"mr-2 h-4 w-4"}),"Edit Today"]}):e.jsxs(e.Fragment,{children:[e.jsx(q,{className:"mr-2 h-4 w-4"}),"Record Today"]})})]})})}),e.jsx(Ne,{startDate:d,endDate:c,onChange:oe}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-4",children:[e.jsxs(g,{children:[e.jsxs(f,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(b,{className:"text-sm font-medium",children:"Period Total"}),e.jsx(fe,{className:"h-4 w-4 text-green-600"})]}),e.jsxs(N,{children:[e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["GH₵",parseFloat(n.period_total||0).toLocaleString("en-GH",{minimumFractionDigits:2})]}),e.jsx("p",{className:"text-muted-foreground text-xs",children:d&&c?`${d} to ${c}`:"Select date range"})]})]}),e.jsxs(g,{children:[e.jsxs(f,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(b,{className:"text-sm font-medium",children:"Monthly Total"}),e.jsx(be,{className:"h-4 w-4 text-blue-600"})]}),e.jsxs(N,{children:[e.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:["GH₵",parseFloat(n.monthly_total||0).toLocaleString("en-GH",{minimumFractionDigits:2})]}),e.jsx("p",{className:"text-muted-foreground text-xs",children:"This month"})]})]}),e.jsxs(g,{children:[e.jsxs(f,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(b,{className:"text-sm font-medium",children:"Highest Day"}),e.jsx(Ce,{className:"h-4 w-4 text-emerald-600"})]}),e.jsxs(N,{children:[e.jsx("div",{className:"text-2xl font-bold text-emerald-600",children:n.highest_day?`GH₵${parseFloat(n.highest_day.total).toLocaleString("en-GH",{minimumFractionDigits:2})}`:"N/A"}),e.jsx("p",{className:"text-muted-foreground text-xs",children:n.highest_day?n.highest_day.date:"No records yet"}),d&&c&&e.jsxs("p",{className:"text-muted-foreground text-xs mt-1",children:[d," to ",c]})]})]}),e.jsxs(g,{children:[e.jsxs(f,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(b,{className:"text-sm font-medium",children:"Lowest Day"}),e.jsx(we,{className:"h-4 w-4 text-orange-600"})]}),e.jsxs(N,{children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:n.lowest_day?`GH₵${parseFloat(n.lowest_day.total).toLocaleString("en-GH",{minimumFractionDigits:2})}`:"N/A"}),e.jsx("p",{className:"text-muted-foreground text-xs",children:n.lowest_day?n.lowest_day.date:"No records yet"}),d&&c&&e.jsxs("p",{className:"text-muted-foreground text-xs mt-1",children:[d," to ",c]})]})]})]}),e.jsxs(g,{children:[e.jsx(f,{children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs(b,{className:"flex items-center gap-2",children:[e.jsx(ge,{className:"h-5 w-5"}),"Cash Notes History"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(k,{htmlFor:"filter_date",className:"text-sm whitespace-nowrap",children:"Filter by date:"}),e.jsx(I,{id:"filter_date",type:"date",value:w,onChange:t=>U(t.target.value),className:"w-auto"}),w&&e.jsx(x,{variant:"ghost",size:"sm",onClick:()=>U(""),children:"Clear"})]})]})}),e.jsxs(N,{children:[e.jsxs(xe,{children:[e.jsx(me,{children:e.jsxs(E,{children:[e.jsx(D,{children:"Date"}),e.jsx(D,{className:"text-right",children:"Total"}),e.jsx(D,{children:"Notes"}),e.jsx(D,{className:"text-right",children:"Actions"})]})}),e.jsx(he,{children:o.data.length===0?e.jsx(E,{children:e.jsx(v,{colSpan:4,className:"text-center py-8 text-muted-foreground",children:w?"No records found for this date.":"No cash notes recorded yet."})}):o.data.map(t=>e.jsxs(E,{children:[e.jsx(v,{className:"font-medium",children:t.formatted_date}),e.jsxs(v,{className:"text-right font-bold",children:["GH₵",parseFloat(t.total).toLocaleString("en-GH",{minimumFractionDigits:2})]}),e.jsx(v,{className:"max-w-xs truncate text-gray-500",children:t.notes||"-"}),e.jsx(v,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(x,{variant:"outline",size:"sm",onClick:()=>ae(t),title:"View breakdown",children:e.jsx(ve,{className:"h-4 w-4"})}),e.jsx(x,{variant:"outline",size:"sm",onClick:()=>L(t),title:"Edit",children:e.jsx(A,{className:"h-4 w-4"})}),e.jsx(x,{variant:"outline",size:"sm",onClick:()=>re(t.id),title:"Delete",className:"text-red-600 hover:text-red-700",children:e.jsx(ye,{className:"h-4 w-4"})})]})})]},t.id))})]}),o.data.length>0&&e.jsxs("div",{className:"mt-4 flex items-center justify-center gap-4",children:[o.prev_page_url&&e.jsx(V,{preserveScroll:!0,preserveState:!0,href:o.prev_page_url,className:"rounded border px-4 py-2 hover:bg-gray-100",children:"« Previous"}),e.jsxs("span",{className:"px-4 py-2 font-medium",children:["Page ",o.current_page]}),o.next_page_url&&e.jsx(V,{preserveScroll:!0,preserveState:!0,href:o.next_page_url,className:"rounded border px-4 py-2 hover:bg-gray-100",children:"Next »"})]})]})]}),e.jsx(z,{isOpen:u,onClose:()=>m(!1),onSubmit:ne,title:"Record Cash Notes",submitLabel:"Save Cash Notes",data:M,setData:S,errors:P,processing:R}),e.jsx(z,{isOpen:y,onClose:()=>{p(!1),_(null)},onSubmit:le,title:"Edit Cash Notes",submitLabel:"Update Cash Notes",data:M,setData:S,errors:P,processing:R}),e.jsx(W,{open:F,onOpenChange:()=>s(!1),children:e.jsxs(J,{className:"max-w-md max-h-[90vh] overflow-y-auto",children:[e.jsx(K,{className:"pt-2",children:e.jsx(Q,{children:"Cash Notes Breakdown"})}),a&&e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsx("div",{className:"text-center border-b pb-4",children:e.jsx("p",{className:"text-sm text-gray-500",children:a.full_date})}),e.jsx("div",{className:"space-y-2",children:T.map(t=>{const i=a[t.key],j=i*t.value;return e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-100",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:"font-medium text-gray-700 w-16",children:t.label}),e.jsx("span",{className:"text-gray-500",children:"×"}),e.jsx("span",{className:"font-medium w-8 text-center",children:i})]}),e.jsxs("span",{className:"font-medium text-gray-900",children:["GH₵",j.toLocaleString("en-GH",{minimumFractionDigits:2})]})]},t.key)})}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t-2 border-gray-300",children:[e.jsx("span",{className:"text-lg font-bold",children:"Total"}),e.jsxs("span",{className:"text-2xl font-bold text-blue-600",children:["GH₵",parseFloat(a.total).toLocaleString("en-GH",{minimumFractionDigits:2})]})]}),a.notes&&e.jsxs("div",{className:"pt-4 border-t",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Notes"}),e.jsx("p",{className:"text-gray-700",children:a.notes})]}),e.jsx("div",{className:"pt-2 pb-2",children:e.jsxs(x,{variant:"outline",className:"w-full",onClick:()=>{s(!1),L(a)},children:[e.jsx(A,{className:"mr-2 h-4 w-4"}),"Edit This Record"]})})]})]})})]})})}export{ze as default};
