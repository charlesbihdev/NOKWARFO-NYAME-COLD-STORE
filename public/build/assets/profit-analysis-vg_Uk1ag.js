import{b as M,r as u,j as e,a as b}from"./app-CJAfpu_B.js";import{c as $,F as O}from"./createLucideIcon-Cg7ANiR-.js";import{C as i,a as n,b as d,c as x}from"./card-CqjrLppC.js";import{T as C,a as T,b as o,c as l,d as y,e as t}from"./table-GVnBoJML.js";import{A as U,T as H}from"./app-layout-BYjCDRLU.js";import{D as B}from"./DateRangePicker-Cup-kuQ_.js";import{T as I}from"./triangle-alert-Ds5pzo1R.js";import{D as _}from"./dollar-sign-N4yXL_bF.js";import"./input-Dk-R2vtg.js";import"./index-Ca9tWU42.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],z=$("RefreshCw",q);function te(){const{total_product_sales:r=[],paid_product_sales:c=[],excluded_count:h=0,recalculatable_count:f=0}=M().props,[g,P]=u.useState(""),[F,S]=u.useState(""),[j,N]=u.useState(!1),w=(s,a)=>{const L=a==="start"?s:g,E=a==="end"?s:F;a==="start"&&P(s),a==="end"&&S(s),b.get(route("profit-analysis.index"),{start_date:L,end_date:E},{preserveState:!0,preserveScroll:!0,replace:!0})},v=()=>{N(!0),b.post(route("profit-analysis.recalculate"),{},{onFinish:()=>N(!1)})},G=[{title:"Profit Analysis",href:"/profit-analysis"}],A=r.reduce((s,a)=>s+parseFloat(a.profit||0),0),R=c.reduce((s,a)=>s+parseFloat(a.profit||0),0),D=r.reduce((s,a)=>s+parseFloat(a.total_amount||0),0),k=r.reduce((s,a)=>s+parseFloat(a.total_cost||0),0),m={totalCost:r.reduce((s,a)=>s+parseFloat(a.total_cost||0),0),totalAmount:r.reduce((s,a)=>s+parseFloat(a.total_amount||0),0),profit:r.reduce((s,a)=>s+parseFloat(a.profit||0),0)},p={totalCost:c.reduce((s,a)=>s+parseFloat(a.total_cost||0),0),totalAmount:c.reduce((s,a)=>s+parseFloat(a.total_amount||0),0),profit:c.reduce((s,a)=>s+parseFloat(a.profit||0),0)};return e.jsx(U,{breadcrumbs:G,children:e.jsxs("div",{className:"min-h-screen space-y-6 bg-gray-100 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Profit Analysis"}),f>0&&e.jsxs(O,{onClick:v,disabled:j,variant:"outline",className:"gap-2",children:[e.jsx(z,{className:`h-4 w-4 ${j?"animate-spin":""}`}),j?"Recalculating...":`Recalculate Historical Profits (${f})`]})]}),h>0&&e.jsxs("div",{className:"flex items-center gap-3 rounded-lg border border-orange-200 bg-orange-50 p-4",children:[e.jsx(I,{className:"h-5 w-5 text-orange-600"}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-orange-800",children:[h," sale item",h>1?"s":""," excluded from profit calculations"]}),e.jsx("p",{className:"text-sm text-orange-700",children:'These items have no cost data. Enter cost prices on products and click "Recalculate Historical Profits" to include them.'})]})]}),e.jsx("div",{className:"mb-6 flex items-center space-x-4",children:e.jsx(B,{startDate:g,endDate:F,onChange:w})}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-4",children:[e.jsxs(i,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(d,{className:"text-sm font-medium",children:"Total Sales Profit"}),e.jsx(H,{className:"h-4 w-4 text-green-600"})]}),e.jsxs(x,{children:[e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["GH₵",A.toFixed(2)]}),e.jsx("p",{className:"text-muted-foreground text-xs",children:"Cash + Credit"})]})]}),e.jsxs(i,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(d,{className:"text-sm font-medium",children:"Cash Sales Profit"}),e.jsx(_,{className:"h-4 w-4 text-blue-600"})]}),e.jsxs(x,{children:[e.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:["GH₵",R.toFixed(2)]}),e.jsx("p",{className:"text-muted-foreground text-xs",children:"Cash only"})]})]}),e.jsxs(i,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(d,{className:"text-sm font-medium",children:"Total Revenue"}),e.jsx(H,{className:"h-4 w-4 text-purple-600"})]}),e.jsxs(x,{children:[e.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:["GH₵",D.toFixed(2)]}),e.jsx("p",{className:"text-muted-foreground text-xs",children:"All sales"})]})]}),e.jsxs(i,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(d,{className:"text-sm font-medium",children:"Total Cost"}),e.jsx(_,{className:"h-4 w-4 text-red-600"})]}),e.jsxs(x,{children:[e.jsxs("div",{className:"text-2xl font-bold text-red-600",children:["GH₵",k.toFixed(2)]}),e.jsx("p",{className:"text-muted-foreground text-xs",children:"Product costs"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:[e.jsxs(i,{children:[e.jsx(n,{children:e.jsx(d,{className:"text-green-700",children:"Total Product Sales (Cash + Credit)"})}),e.jsx(x,{children:e.jsxs(C,{children:[e.jsx(T,{children:e.jsxs(o,{children:[e.jsx(l,{children:"Product"}),e.jsx(l,{children:"Units Sold"}),e.jsx(l,{children:"Cost Price"}),e.jsx(l,{children:"Total Cost"}),e.jsx(l,{children:"Selling Price"}),e.jsx(l,{children:"Total Amount"}),e.jsx(l,{children:"Profit"})]})}),e.jsx(y,{children:r.length===0?e.jsx(o,{children:e.jsx(t,{colSpan:7,className:"text-center text-gray-500 py-8",children:"No sales data with cost information available"})}):e.jsxs(e.Fragment,{children:[r.map((s,a)=>e.jsxs(o,{children:[e.jsx(t,{className:"font-medium",children:s.product}),e.jsx(t,{children:s.units_sold}),e.jsxs(t,{children:["GH₵",parseFloat(s.cost_price).toFixed(2)]}),e.jsxs(t,{children:["GH₵",parseFloat(s.total_cost).toFixed(2)]}),e.jsxs(t,{children:["GH₵",parseFloat(s.selling_price).toFixed(2)]}),e.jsxs(t,{children:["GH₵",parseFloat(s.total_amount).toFixed(2)]}),e.jsxs(t,{className:`font-medium ${parseFloat(s.profit)>=0?"text-green-600":"text-red-600"}`,children:["GH₵",parseFloat(s.profit).toFixed(2)]})]},a)),e.jsxs(o,{className:"bg-green-50 font-bold",children:[e.jsx(t,{children:"TOTALS"}),e.jsx(t,{children:"-"}),e.jsx(t,{children:"-"}),e.jsxs(t,{children:["GH₵",m.totalCost.toFixed(2)]}),e.jsx(t,{children:"-"}),e.jsxs(t,{children:["GH₵",m.totalAmount.toFixed(2)]}),e.jsxs(t,{className:"text-green-600",children:["GH₵",m.profit.toFixed(2)]})]})]})})]})})]}),e.jsxs(i,{children:[e.jsx(n,{children:e.jsx(d,{className:"text-blue-700",children:"Paid Product Sales (Cash Only)"})}),e.jsx(x,{children:e.jsxs(C,{children:[e.jsx(T,{children:e.jsxs(o,{children:[e.jsx(l,{children:"Product"}),e.jsx(l,{children:"Units Sold"}),e.jsx(l,{children:"Cost Price"}),e.jsx(l,{children:"Total Cost"}),e.jsx(l,{children:"Selling Price"}),e.jsx(l,{children:"Total Amount"}),e.jsx(l,{children:"Profit"})]})}),e.jsx(y,{children:c.length===0?e.jsx(o,{children:e.jsx(t,{colSpan:7,className:"text-center text-gray-500 py-8",children:"No cash sales data with cost information available"})}):e.jsxs(e.Fragment,{children:[c.map((s,a)=>e.jsxs(o,{children:[e.jsx(t,{className:"font-medium",children:s.product}),e.jsx(t,{children:s.units_sold}),e.jsxs(t,{children:["GH₵",parseFloat(s.cost_price).toFixed(2)]}),e.jsxs(t,{children:["GH₵",parseFloat(s.total_cost).toFixed(2)]}),e.jsxs(t,{children:["GH₵",parseFloat(s.selling_price).toFixed(2)]}),e.jsxs(t,{children:["GH₵",parseFloat(s.total_amount).toFixed(2)]}),e.jsxs(t,{className:`font-medium ${parseFloat(s.profit)>=0?"text-blue-600":"text-red-600"}`,children:["GH₵",parseFloat(s.profit).toFixed(2)]})]},a)),e.jsxs(o,{className:"bg-blue-50 font-bold",children:[e.jsx(t,{children:"TOTALS"}),e.jsx(t,{children:"-"}),e.jsx(t,{children:"-"}),e.jsxs(t,{children:["GH₵",p.totalCost.toFixed(2)]}),e.jsx(t,{children:"-"}),e.jsxs(t,{children:["GH₵",p.totalAmount.toFixed(2)]}),e.jsxs(t,{className:"text-blue-600",children:["GH₵",p.profit.toFixed(2)]})]})]})})]})})]})]})]})})}export{te as default};
