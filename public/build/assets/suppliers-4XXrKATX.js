import{u as $,j as e,r as b,a as U}from"./app-CNrwjyQV.js";import{B as k}from"./badge-DJOKvdtv.js";import{c as K,F as y}from"./createLucideIcon-CsAAfAhm.js";import{C as A,c as P,a as Y,b as Z}from"./card-DDZW8llL.js";import{T as ee,a as se,b as z,c as I,d as te,e as T}from"./table-YR8wmrS1.js";import{T as ae,A as ne,U as R,d as le,M as ie}from"./app-layout-CFGYWSdX.js";import{I as _}from"./InputError-CBuZe8Xh.js";import{D as H,b as E,c as G,d as X,e as B}from"./dialog-CM93Cn0E.js";import{I as j}from"./input-DbyLavsC.js";import{L as d}from"./label-Ax9nI_kH.js";import{T as F}from"./textarea-CcBepf5G.js";import{P as V}from"./plus-Bj_ZqcCf.js";import{T as W}from"./trash-2-DPkkZxyo.js";import{T as de}from"./trending-down-CrjJ6ZCq.js";import{S as re,a as ce,b as oe,c as me,d as D}from"./select-D_jNuA7x.js";import{D as Q}from"./dollar-sign-CYV1TalK.js";import{P as xe,M as he}from"./phone-CMn9noO7.js";import{S as pe}from"./square-pen-C1npFoBI.js";import{H as ue}from"./history-CY95baPU.js";import"./index-iTuCusql.js";import"./index-DV1aORTS.js";import"./index-D8IGj5O3.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=[["path",{d:"M5 12h14",key:"1ays0h"}]],ge=K("Minus",je);function ye({isOpen:m,onClose:p,errors:t={}}){const{data:l,setData:s,post:r,processing:g,reset:c}=$({name:"",contact_person:"",phone:"",email:"",address:"",additional_info:""});function h(x){x.preventDefault(),r(route("suppliers.store"),{onSuccess:()=>{c(),p()},preserveScroll:!0,preserveState:!0,only:["suppliers","errors","flash"]})}return e.jsx(H,{open:m,onOpenChange:p,children:e.jsxs(E,{className:"max-h-[90vh] max-w-2xl overflow-y-auto",children:[e.jsxs(G,{children:[e.jsx(X,{children:"Add New Supplier"}),e.jsx(B,{children:"Enter the details for the new supplier. All fields marked with * are required."})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"name",children:"Supplier Name *"}),e.jsx(j,{id:"name",placeholder:"Enter supplier name",value:l.name,onChange:x=>s("name",x.target.value),required:!0}),t.name&&e.jsx(_,{message:t.name,className:"mt-1"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"contact_person",children:"Contact Person"}),e.jsx(j,{id:"contact_person",placeholder:"Contact person name",value:l.contact_person,onChange:x=>s("contact_person",x.target.value),required:!0}),t.contact_person&&e.jsx(_,{message:t.contact_person,className:"mt-1"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"phone",children:"Phone Number"}),e.jsx(j,{id:"phone",placeholder:"+233 XX XXX XXXX",value:l.phone,onChange:x=>s("phone",x.target.value),type:"tel"}),t.phone&&e.jsx(_,{message:t.phone,className:"mt-1"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"email",children:"Email Address"}),e.jsx(j,{id:"email",placeholder:"supplier@example.com",value:l.email,onChange:x=>s("email",x.target.value),type:"email"}),t.email&&e.jsx(_,{message:t.email,className:"mt-1"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"address",children:"Address"}),e.jsx(F,{id:"address",placeholder:"Business address",value:l.address,onChange:x=>s("address",x.target.value),rows:2}),t.address&&e.jsx(_,{message:t.address,className:"mt-1"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"additional_info",children:"Additional Information"}),e.jsx(F,{id:"additional_info",placeholder:"Any additional notes or information",value:l.additional_info,onChange:x=>s("additional_info",x.target.value),rows:3}),t.additional_info&&e.jsx(_,{message:t.additional_info,className:"mt-1"})]}),e.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[e.jsx(y,{type:"button",variant:"outline",onClick:p,children:"Cancel"}),e.jsx(y,{onClick:h,disabled:g,children:g?"Creating...":"Add Supplier"})]})]})]})})}function ve({isOpen:m,onClose:p,supplier:t,products:l,errors:s={}}){const[r,g]=b.useState([{product_id:null,product_name:"",cartons:0,lines:0,lines_per_carton:1,unit_price:0}]),{data:c,setData:h,post:x,processing:u,reset:N}=$({supplier_id:(t==null?void 0:t.id)||"",transaction_date:new Date().toISOString().split("T")[0],notes:"",items:[],payment_amount:0,payment_method:"cash",payment_notes:"",make_payment:!1});b.useEffect(()=>{m&&(N(),g([{product_id:null,product_name:"",cartons:0,lines:0,lines_per_carton:1,unit_price:0}]),h({supplier_id:(t==null?void 0:t.id)||"",transaction_date:new Date().toISOString().split("T")[0],notes:"",items:[],payment_amount:0,payment_method:"cash",payment_notes:"",make_payment:!1}))},[m,t,N]),b.useEffect(()=>{h("items",r)},[r]);function v(){g([...r,{product_id:null,product_name:"",cartons:0,lines:0,lines_per_carton:1,unit_price:0}])}function M(i){if(r.length>1){const n=r.filter((o,f)=>f!==i);g(n)}}function C(i,n,o){const f=[...r];if(f[i][n]=o,n==="product_name"){const w=l.find(a=>a.name===o);w?(f[i].product_id=w.id,f[i].lines_per_carton=w.lines_per_carton||1):f[i].product_id=null}g(f)}function S(){return r.reduce((i,n)=>{const o=parseInt(n.cartons)||0,f=parseInt(n.lines)||0,w=parseInt(n.lines_per_carton)||1,a=o*w+f,O=parseFloat(n.unit_price)||0;return i+a*O},0)}function q(i){const n=parseInt(i.cartons)||0,o=parseInt(i.lines)||0;return(parseInt(i.lines_per_carton)||1)<=1?n+o:n>0&&o>0?`${n}C${o}L`:n>0?`${n}C`:o>0?`${o}L`:"0"}function L(i){i.preventDefault(),t&&x(route("suppliers.create-credit-transaction",t.id),{onSuccess:()=>{N(),p()},onError:n=>{console.log("Validation errors:",n)},preserveScroll:!0,preserveState:!0,only:["suppliers","products","errors","flash"]})}return t?e.jsx(H,{open:m,onOpenChange:p,children:e.jsxs(E,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(G,{children:[e.jsxs(X,{children:["Add Credit Transaction for ",t.name]}),e.jsx(B,{children:"Add a new credit transaction for this supplier. Fill in the transaction details and items purchased."})]}),e.jsxs("form",{onSubmit:L,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"transaction_date",children:"Transaction Date *"}),e.jsx(j,{id:"transaction_date",type:"date",value:c.transaction_date,onChange:i=>h("transaction_date",i.target.value)}),s.transaction_date&&e.jsx("div",{className:"text-sm text-red-500",children:s.transaction_date})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{children:"Total Amount"}),e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["GHC ",S().toFixed(2)]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(d,{className:"text-lg font-semibold",children:"Items Purchased"}),e.jsxs(y,{type:"button",onClick:v,variant:"outline",size:"sm",children:[e.jsx(V,{className:"h-4 w-4 mr-2"}),"Add Item"]})]}),r.map((i,n)=>e.jsxs("div",{className:"grid grid-cols-12 gap-3 p-4 border rounded-lg bg-gray-50",children:[e.jsxs("div",{className:"col-span-12",children:[e.jsx(d,{htmlFor:`product_${n}`,children:"Product Name *"}),e.jsx(j,{id:`product_${n}`,list:`products-list-${n}`,placeholder:"Type or select product name",value:i.product_name,onChange:o=>C(n,"product_name",o.target.value),required:!0}),e.jsx("datalist",{id:`products-list-${n}`,children:l.map(o=>e.jsx("option",{value:o.name},o.id))}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Type to search or select from ",l.length," products"]}),s[`items.${n}.product_name`]&&e.jsx("div",{className:"mt-1 text-xs text-red-500",children:s[`items.${n}.product_name`]})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx(d,{htmlFor:`cartons_${n}`,children:"Cartons"}),e.jsx(j,{id:`cartons_${n}`,type:"number",min:"0",value:i.cartons,onChange:o=>C(n,"cartons",parseInt(o.target.value)||0)}),s[`items.${n}.cartons`]&&e.jsx("div",{className:"mt-1 text-xs text-red-500",children:s[`items.${n}.cartons`]})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx(d,{htmlFor:`lines_${n}`,children:"Lines"}),e.jsx(j,{id:`lines_${n}`,type:"number",min:"0",value:i.lines,onChange:o=>C(n,"lines",parseInt(o.target.value)||0)}),s[`items.${n}.lines`]&&e.jsx("div",{className:"mt-1 text-xs text-red-500",children:s[`items.${n}.lines`]})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx(d,{htmlFor:`lines_per_carton_${n}`,children:"Lines/Carton"}),e.jsx(j,{id:`lines_per_carton_${n}`,type:"number",min:"1",value:i.lines_per_carton,onChange:o=>C(n,"lines_per_carton",parseInt(o.target.value)||1),disabled:i.product_id!==null,className:i.product_id!==null?"bg-gray-100":""}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:i.product_id!==null?"Auto-filled from product":"Manual entry"})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx(d,{htmlFor:`unit_price_${n}`,children:"Unit Price *"}),e.jsx(j,{id:`unit_price_${n}`,type:"number",min:"0",step:"0.01",value:i.unit_price,onChange:o=>C(n,"unit_price",parseFloat(o.target.value)||0),required:!0}),s[`items.${n}.unit_price`]&&e.jsx("div",{className:"mt-1 text-xs text-red-500",children:s[`items.${n}.unit_price`]})]}),e.jsxs("div",{className:"col-span-11",children:[e.jsx(d,{children:"Quantity & Total"}),e.jsxs("div",{className:"text-base font-semibold text-gray-700",children:[q(i)," Ã— GHC ",(i.unit_price||0).toFixed(2)," = GHC ",(((parseInt(i.cartons)||0)*(parseInt(i.lines_per_carton)||1)+(parseInt(i.lines)||0))*(parseFloat(i.unit_price)||0)).toFixed(2)]})]}),e.jsx("div",{className:"col-span-1 flex items-end",children:r.length>1&&e.jsx(y,{type:"button",onClick:()=>M(n),variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700",children:e.jsx(W,{className:"h-4 w-4"})})})]},n)),s.items&&e.jsx("div",{className:"mt-1 text-xs text-red-500",children:s.items})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"notes",children:"Notes"}),e.jsx(F,{id:"notes",placeholder:"Additional notes about this transaction",value:c.notes,onChange:i=>h("notes",i.target.value),rows:3}),s.notes&&e.jsx("div",{className:"text-sm text-red-500",children:s.notes})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"make_payment",checked:c.make_payment,onChange:i=>h("make_payment",i.target.checked),className:"rounded border-gray-300"}),e.jsx(d,{htmlFor:"make_payment",className:"text-lg font-semibold text-green-700",children:"Make Payment for This Transaction"})]}),c.make_payment&&e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg space-y-4",children:[e.jsx("h4",{className:"font-semibold text-green-800",children:"Payment Details"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"payment_amount",children:"Payment Amount *"}),e.jsx(j,{id:"payment_amount",type:"number",min:"0",max:S(),step:"0.01",value:c.payment_amount,onChange:i=>h("payment_amount",parseFloat(i.target.value)||0),placeholder:"Enter payment amount",required:!0}),e.jsxs("div",{className:"text-xs text-gray-600",children:["Maximum: GHC ",S().toFixed(2)]}),s.payment_amount&&e.jsx("div",{className:"text-sm text-red-500",children:s.payment_amount})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"payment_method",children:"Payment Method"}),e.jsxs("select",{id:"payment_method",value:c.payment_method,onChange:i=>h("payment_method",i.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"cash",children:"Cash"}),e.jsx("option",{value:"bank_transfer",children:"Bank Transfer"}),e.jsx("option",{value:"check",children:"Check"}),e.jsx("option",{value:"mobile_money",children:"Mobile Money"}),e.jsx("option",{value:"other",children:"Other"})]}),s.payment_method&&e.jsx("div",{className:"text-sm text-red-500",children:s.payment_method})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"payment_notes",children:"Payment Notes"}),e.jsx(F,{id:"payment_notes",placeholder:"Notes about this payment (optional)",value:c.payment_notes,onChange:i=>h("payment_notes",i.target.value),rows:2}),s.payment_notes&&e.jsx("div",{className:"text-sm text-red-500",children:s.payment_notes})]}),e.jsxs("div",{className:"bg-white p-3 rounded border",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Transaction Amount:"}),e.jsxs("span",{className:"font-semibold",children:["GHC ",S().toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Payment Amount:"}),e.jsxs("span",{className:"font-semibold text-green-600",children:["GHC ",c.payment_amount||0]})]}),e.jsxs("div",{className:"flex justify-between text-sm border-t pt-1",children:[e.jsx("span",{children:"Remaining Balance:"}),e.jsxs("span",{className:"font-semibold text-red-600",children:["GHC ",Math.max(0,S()-(c.payment_amount||0)).toFixed(2)]})]})]})]})]}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-lg font-semibold text-blue-800",children:"Transaction Summary"}),e.jsxs("span",{className:"text-2xl font-bold text-blue-900",children:["Total: GHC ",S().toFixed(2)]})]}),e.jsx("div",{className:"text-sm text-blue-600 mt-2",children:c.make_payment&&c.payment_amount>0?e.jsxs(e.Fragment,{children:["Transaction amount: GHC ",S().toFixed(2)," | Payment: GHC ",c.payment_amount," | Remaining: GHC ",Math.max(0,S()-c.payment_amount).toFixed(2)]}):`This transaction will be added to ${t.name}'s outstanding balance. Payments can be made separately to reduce the overall debt.`})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx(y,{type:"button",variant:"outline",onClick:p,children:"Cancel"}),e.jsx(y,{type:"submit",disabled:u,children:u?"Creating...":"Create Transaction"})]})]})]})}):null}function fe({isOpen:m,onClose:p,supplier:t,errors:l={}}){const{data:s,setData:r,put:g,processing:c,reset:h}=$({name:"",contact_person:"",phone:"",email:"",address:"",additional_info:""});b.useEffect(()=>{t&&r({name:t.name||"",contact_person:t.contact_person||"",phone:t.phone||"",email:t.email||"",address:t.address||"",additional_info:t.additional_info||""})},[t]);function x(){t&&g(route("suppliers.update",t.id),{onSuccess:()=>{h(),p()},preserveScroll:!0,preserveState:!0,only:["suppliers","errors","flash"]})}return t?e.jsx(H,{open:m,onOpenChange:p,children:e.jsxs(E,{className:"max-h-[90vh] max-w-2xl overflow-y-auto",children:[e.jsxs(G,{children:[e.jsx(X,{children:"Edit Supplier"}),e.jsx(B,{children:"Update the supplier information. All fields marked with * are required."})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"edit-name",children:"Supplier Name *"}),e.jsx(j,{id:"edit-name",placeholder:"Enter supplier name",value:s.name,onChange:u=>r("name",u.target.value),required:!0}),l.name&&e.jsx(_,{message:l.name,className:"mt-1"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"edit-contact_person",children:"Contact Person"}),e.jsx(j,{id:"edit-contact_person",placeholder:"Contact person name",value:s.contact_person,onChange:u=>r("contact_person",u.target.value)}),l.contact_person&&e.jsx(_,{message:l.contact_person,className:"mt-1"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"edit-phone",children:"Phone Number"}),e.jsx(j,{id:"edit-phone",placeholder:"+233 XX XXX XXXX",value:s.phone,onChange:u=>r("phone",u.target.value),type:"tel"}),l.phone&&e.jsx(_,{message:l.phone,className:"mt-1"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"edit-email",children:"Email Address"}),e.jsx(j,{id:"edit-email",placeholder:"supplier@example.com",value:s.email,onChange:u=>r("email",u.target.value),type:"email"}),l.email&&e.jsx(_,{message:l.email,className:"mt-1"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"edit-address",children:"Address"}),e.jsx(F,{id:"edit-address",placeholder:"Business address",value:s.address,onChange:u=>r("address",u.target.value),rows:2}),l.address&&e.jsx(_,{message:l.address,className:"mt-1"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"edit-additional_info",children:"Additional Information"}),e.jsx(F,{id:"edit-additional_info",placeholder:"Any additional notes or information",value:s.additional_info,onChange:u=>r("additional_info",u.target.value),rows:3}),l.additional_info&&e.jsx(_,{message:l.additional_info,className:"mt-1"})]}),e.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[e.jsx(y,{type:"button",variant:"outline",onClick:p,children:"Cancel"}),e.jsx(y,{onClick:x,disabled:c,children:c?"Updating...":"Update Supplier"})]})]})]})}):null}function _e({supplier:m}){const p=parseFloat(m.total_owed||0)||0,t=parseFloat(m.total_paid||0)||0,l=parseFloat(m.total_outstanding||0)||0,s=m.transactions_count||0,r=()=>l>0?"text-red-600":l<0?"text-green-600":"text-gray-600",g=()=>l>0?e.jsx(ae,{className:"h-3 w-3"}):l<0?e.jsx(de,{className:"h-3 w-3"}):e.jsx(ge,{className:"h-3 w-3"}),c=h=>`GHC ${(parseFloat(h)||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`;return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:`flex items-center gap-1 font-medium ${r()}`,children:[g(),e.jsxs("span",{className:"text-sm",children:[l>0&&"Outstanding: ",l<0&&"Credit: ",l===0&&"Settled: ",c(l)]})]}),s>0&&e.jsxs("div",{className:"space-y-1 text-xs text-gray-500",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Total Owed:"}),e.jsx("span",{children:c(p)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Total Paid:"}),e.jsx("span",{children:c(t)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Transactions:"}),e.jsx("span",{children:s})]}),m.last_transaction_date&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Last Activity:"}),e.jsx("span",{children:m.last_transaction_date})]})]}),e.jsxs("div",{className:"flex gap-1",children:[l>0&&e.jsx(k,{className:"text-xs bg-red-600 text-white hover:bg-red-700",children:"Outstanding"}),l<0&&e.jsx(k,{variant:"secondary",className:"text-xs",children:"Overpaid"}),l===0&&s>0&&e.jsx(k,{variant:"outline",className:"text-xs",children:"Settled"}),s===0&&e.jsx(k,{variant:"outline",className:"text-xs",children:"No Transactions"})]})]})}function Ne({isOpen:m,onClose:p,supplier:t,errors:l={}}){const{data:s,setData:r,post:g,processing:c,reset:h,clearErrors:x}=$({payment_amount:"",payment_date:new Date().toISOString().split("T")[0],payment_method:"",notes:""});b.useEffect(()=>{m&&(h(),x(),r({payment_amount:"",payment_date:new Date().toISOString().split("T")[0],payment_method:"",notes:""}))},[m,h,x]);function u(v){v.preventDefault(),g(route("suppliers.make-payment",t.id),{onSuccess:()=>{h(),p()},preserveScroll:!0,preserveState:!0,only:["suppliers","errors","flash"]})}if(!t)return null;const N=t.total_outstanding||0;return e.jsx(H,{open:m,onOpenChange:p,children:e.jsxs(E,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(G,{children:[e.jsxs(X,{children:["Make Payment to ",t.name]}),e.jsx(B,{children:"Record a payment made to this supplier to reduce their outstanding debt."})]}),e.jsxs("form",{onSubmit:u,className:"space-y-6",children:[e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-lg font-semibold text-yellow-800",children:"Current Outstanding Balance"}),e.jsxs("span",{className:"text-2xl font-bold text-yellow-900",children:["GHC ",N.toFixed(2)]})]}),e.jsxs("div",{className:"text-sm text-yellow-600 mt-2",children:["This payment will reduce the overall outstanding debt for ",t.name]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"payment_amount",children:"Payment Amount *"}),e.jsx(j,{id:"payment_amount",type:"number",min:"0.01",max:N,step:"0.01",placeholder:"Enter payment amount",value:s.payment_amount,onChange:v=>r("payment_amount",parseFloat(v.target.value)),required:!0}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Maximum payment: GHC ",N.toFixed(2)]}),l.payment_amount&&e.jsx("div",{className:"text-sm text-red-500",children:l.payment_amount})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"payment_date",children:"Payment Date *"}),e.jsx(j,{id:"payment_date",type:"date",value:s.payment_date,onChange:v=>r("payment_date",v.target.value),required:!0}),l.payment_date&&e.jsx("div",{className:"text-sm text-red-500",children:l.payment_date})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"payment_method",children:"Payment Method"}),e.jsxs(re,{value:s.payment_method,onValueChange:v=>r("payment_method",v),children:[e.jsx(ce,{children:e.jsx(oe,{placeholder:"Select payment method"})}),e.jsxs(me,{children:[e.jsx(D,{value:"cash",children:"Cash"}),e.jsx(D,{value:"bank_transfer",children:"Bank Transfer"}),e.jsx(D,{value:"mobile_money",children:"Mobile Money"}),e.jsx(D,{value:"check",children:"Check"}),e.jsx(D,{value:"other",children:"Other"})]})]}),l.payment_method&&e.jsx("div",{className:"text-sm text-red-500",children:l.payment_method})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"notes",children:"Notes"}),e.jsx(F,{id:"notes",placeholder:"Optional notes about this payment",value:s.notes,onChange:v=>r("notes",v.target.value),rows:3}),l.notes&&e.jsx("div",{className:"text-sm text-red-500",children:l.notes})]}),e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-lg font-semibold text-green-800",children:"Payment Summary"}),e.jsxs("span",{className:"text-2xl font-bold text-green-900",children:["GHC ",s.payment_amount||0]})]}),e.jsxs("div",{className:"text-sm text-green-600 mt-2",children:["After this payment, the new outstanding balance will be:",e.jsxs("span",{className:"font-semibold ml-1",children:["GHC ",Math.max(0,N-(s.payment_amount||0)).toFixed(2)]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx(y,{type:"button",variant:"outline",onClick:p,children:"Cancel"}),e.jsx(y,{type:"submit",disabled:c||!s.payment_amount||s.payment_amount<=0||s.payment_amount>N,children:c?"Processing...":"Record Payment"})]})]})]})})}function ze({suppliers:m=[],products:p=[],errors:t={}}){const[l,s]=b.useState(!1),[r,g]=b.useState(!1),[c,h]=b.useState(!1),[x,u]=b.useState(!1),[N,v]=b.useState(null),[M,C]=b.useState(null),S=[{title:"Suppliers",href:"/suppliers"}];function q(a){v(a),g(!0)}function L(a){confirm("Are you sure you want to delete this supplier?")&&U.delete(route("suppliers.destroy",a),{preserveScroll:!0,preserveState:!0,only:["suppliers","flash","errors"]})}function i(a){C(a),h(!0)}function n(a){C(a),u(!0)}function o(a){U.get(route("suppliers.transactions",a.id))}function f(a){U.patch(route("suppliers.toggle-status",a.id),{},{preserveScroll:!0,preserveState:!0,only:["suppliers","flash"]})}const w={totalSuppliers:m.length,activeSuppliers:m.filter(a=>a.is_active).length,totalOutstanding:m.reduce((a,O)=>{const J=parseFloat(O.total_outstanding||0)||0;return a+J},0),suppliersWithDebt:m.filter(a=>(parseFloat(a.total_outstanding||0)||0)>0).length};return e.jsx(ne,{breadcrumbs:S,children:e.jsxs("div",{className:"min-h-screen space-y-6 bg-gray-100 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Supplier Management"}),e.jsxs(y,{onClick:()=>s(!0),children:[e.jsx(V,{className:"mr-2 h-4 w-4"}),"Add Supplier"]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-4",children:[e.jsx(A,{children:e.jsx(P,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(R,{className:"h-5 w-5 text-blue-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Suppliers"}),e.jsx("p",{className:"text-2xl font-bold",children:w.totalSuppliers})]})]})})}),e.jsx(A,{children:e.jsx(P,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(R,{className:"h-5 w-5 text-green-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Active Suppliers"}),e.jsx("p",{className:"text-2xl font-bold",children:w.activeSuppliers})]})]})})}),e.jsx(A,{children:e.jsx(P,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Q,{className:"h-5 w-5 text-red-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Outstanding"}),e.jsxs("p",{className:"text-2xl font-bold",children:["GHC ",w.totalOutstanding.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]})})}),e.jsx(A,{children:e.jsx(P,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"h-5 w-5 text-orange-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"With Outstanding Debt"}),e.jsx("p",{className:"text-2xl font-bold",children:w.suppliersWithDebt})]})]})})})]}),e.jsxs(A,{children:[e.jsx(Y,{children:e.jsxs(Z,{className:"flex items-center gap-2",children:[e.jsx(R,{className:"h-5 w-5"}),"Supplier Directory"]})}),e.jsx(P,{children:e.jsxs(ee,{children:[e.jsx(se,{children:e.jsxs(z,{children:[e.jsx(I,{children:"Supplier Details"}),e.jsx(I,{children:"Contact Info"}),e.jsx(I,{children:"Financial Status"}),e.jsx(I,{children:"Status"}),e.jsx(I,{children:"Actions"})]})}),e.jsxs(te,{children:[m.map(a=>e.jsxs(z,{children:[e.jsx(T,{children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:a.name}),a.contact_person&&e.jsx("p",{className:"text-sm text-gray-500",children:a.contact_person})]})}),e.jsx(T,{children:e.jsxs("div",{className:"space-y-1",children:[a.phone&&e.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[e.jsx(xe,{className:"h-3 w-3"}),a.phone]}),a.email&&e.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[e.jsx(he,{className:"h-3 w-3"}),a.email]}),a.address&&e.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[e.jsx(ie,{className:"h-3 w-3"}),e.jsx("span",{className:"max-w-32 truncate",children:a.address})]})]})}),e.jsx(T,{children:e.jsx(_e,{supplier:a})}),e.jsx(T,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(k,{variant:a.is_active?"default":"secondary",className:"cursor-pointer",onClick:()=>f(a),children:a.is_active?"Active":"Inactive"}),a.has_outstanding_debt&&e.jsx(k,{className:"text-xs bg-red-600 text-white hover:bg-red-700",children:"Debt"})]})}),e.jsx(T,{children:e.jsxs("div",{className:"flex flex-wrap gap-1",children:[e.jsx(y,{variant:"outline",size:"sm",onClick:()=>q(a),children:e.jsx(pe,{className:"h-3 w-3"})}),e.jsx(y,{variant:"outline",size:"sm",onClick:()=>o(a),title:"View Transactions",children:e.jsx(ue,{className:"h-3 w-3"})}),e.jsx(y,{variant:"outline",size:"sm",onClick:()=>i(a),title:"Add Transaction",className:"text-blue-600",children:e.jsx(V,{className:"h-3 w-3"})}),e.jsx(y,{variant:"outline",size:"sm",onClick:()=>n(a),title:a.has_outstanding_debt?`Make Payment (Outstanding: GHC ${a.total_outstanding})`:"Make Payment",className:a.has_outstanding_debt?"text-green-600":"text-gray-400",disabled:!a.has_outstanding_debt,children:e.jsx(Q,{className:"h-3 w-3"})}),e.jsx(y,{variant:"outline",size:"sm",onClick:()=>L(a.id),className:"text-red-600",disabled:a.has_outstanding_debt,title:a.has_outstanding_debt?"Cannot delete supplier with outstanding debt":"Delete supplier",children:e.jsx(W,{className:"h-3 w-3"})})]})})]},a.id)),m.length===0&&e.jsx(z,{children:e.jsx(T,{colSpan:5,className:"text-muted-foreground py-8 text-center",children:"No suppliers found. Add your first supplier to get started."})})]})]})})]}),e.jsx(ye,{isOpen:l,onClose:()=>s(!1),errors:t}),e.jsx(fe,{isOpen:r,onClose:()=>g(!1),supplier:N,errors:t}),e.jsx(ve,{isOpen:c,onClose:()=>{h(!1),C(null)},supplier:M,products:p,errors:t}),e.jsx(Ne,{isOpen:x,onClose:()=>{u(!1),C(null)},supplier:M,errors:t})]})})}export{ze as default};
